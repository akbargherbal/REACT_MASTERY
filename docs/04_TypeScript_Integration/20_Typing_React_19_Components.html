<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20_Typing_React_19_Components</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg-main: #0f172a;
            --bg-card: #1e293b;
            --bg-code: #0f172a;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --accent: #06b6d4;
            --success: #10b981;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.7; 
            color: var(--text-primary); 
            background: var(--bg-main);
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        .home-btn { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: var(--accent);
            color: white; 
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-decoration: none; 
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .home-btn:hover { 
            background: #0891b2;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(6, 182, 212, 0.5);
        }
        
        .breadcrumb { 
            background: var(--bg-card);
            padding: 12px 0; 
            margin-bottom: 24px; 
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .breadcrumb a { 
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .breadcrumb a:hover { 
            color: var(--primary);
            text-decoration: underline;
        }
        
        .content { 
            background: var(--bg-card);
            padding: 3rem; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }
        
        .file-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 1.5rem; 
            margin: 2rem 0; 
        }
        
        .file-item { 
            padding: 1.5rem; 
            border: 1px solid var(--border);
            border-radius: 12px; 
            background: var(--bg-main);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .file-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .file-item:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
        }
        
        .file-item:hover::before {
            opacity: 1;
        }
        
        .file-item a { 
            color: var(--text-primary);
            text-decoration: none; 
            font-weight: 600; 
            display: block;
            font-size: 1.1rem;
        }
        
        .file-item a:hover { 
            color: var(--primary);
        }
        
        .file-type { 
            font-size: 13px; 
            color: var(--text-secondary);
            margin-top: 8px; 
            font-weight: 500;
        }
        
        /* Code Blocks */
        pre { 
            background: var(--bg-code);
            padding: 1.5rem; 
            border-radius: 12px; 
            overflow-x: auto;
            border: 1px solid var(--border);
            margin: 1.5rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        pre code { 
            background: none;
            padding: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        /* Copy Button */
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            opacity: 0.7;
            z-index: 10;
        }
        
        .copy-btn:hover {
            opacity: 1;
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .copy-btn.copied {
            background: var(--success);
        }
        
        pre:hover .copy-btn {
            opacity: 1;
        }
        
        /* Inline Code */
        code { 
            background: var(--bg-code);
            color: #8b5cf6;
            padding: 3px 8px; 
            border-radius: 6px; 
            font-size: 1.1em;
            font-family: 'Fira Code', 'Consolas', monospace;
            border: 1px solid var(--border);
        }
        
        /* Headings */
        h1, h2, h3, h4, h5, h6 { 
            color: var(--text-primary);
            margin: 2rem 0 1rem 0;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        h1 { 
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 12px;
            margin-bottom: 1.5rem;
        }
        
        h2 { 
            font-size: 2rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 8px;
        }
        
        h3 { 
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        /* Links */
        a { 
            color: var(--accent);
            transition: color 0.2s;
        }
        
        a:hover { 
            color: var(--primary);
        }
        
        /* Paragraphs */
        p {
            margin: 1rem 0;
            color: var(--text-secondary);
        }
        
        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
            color: var(--text-secondary);
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        /* Tables */
        table { 
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        th, td { 
            border: 1px solid var(--border);
            padding: 12px 16px;
            text-align: left;
        }
        
        th { 
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: var(--bg-card);
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* Horizontal Rule */
        hr {
            border: none;
            border-top: 2px solid var(--border);
            margin: 2rem 0;
        }
        
        .footer { 
            text-align: center; 
            padding: 2rem; 
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 3rem; 
            font-size: 14px;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-main);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 6px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .file-list { grid-template-columns: 1fr; }
            .content { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-btn">üè†</a>
    <div class="container">
        <div class="breadcrumb">
            <div style="padding: 0 20px;">
                <a href="../index.html">üè† Home</a> <span style="color: #64748b;">/</span> <a href="index.html">04_TypeScript_Integration</a>
            </div>
        </div>
        <div class="content">
            <h1 id="chapter-20-typing-react-19-components">Chapter 20: Typing React 19 Components</h1>
<h2 id="function-component-types">Function Component Types</h2>
<h2 id="learning-objective">Learning Objective</h2>
<p>Understand the modern, standard way to type a React function component and its props, and why it's preferred over legacy patterns like <code>React.FC</code>.</p>
<h2 id="why-this-matters">Why This Matters</h2>
<p>How you type your components sets the foundation for your entire application's type safety. Using the modern, explicit approach makes your components' APIs clearer, prevents common bugs related to implicit props like <code>children</code>, and aligns with the direction of the React ecosystem.</p>
<h2 id="discovery-phase">Discovery Phase</h2>
<p>Let's start with the simplest possible typed component. It takes no props and just renders a message.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// A simple component with no props.</span>
<span class="c1">// The return type is implicitly inferred as JSX.Element or similar.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">WelcomeMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Welcome</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Typed</span><span class="w"> </span><span class="nx">React</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="c1">// You can be explicit about the return type if you want, but it&#39;s often not necessary.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">ExplicitWelcomeMessage</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ReactElement</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Welcome</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Typed</span><span class="w"> </span><span class="nx">React</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<p>TypeScript's inference is excellent here. It knows that a function returning JSX is a valid React component. You generally don't need to annotate the return type.</p>
<p>The real typing happens when we introduce props. The standard way is to define a type for the props object and apply it to the function's first argument.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// 1. Define the shape of the props object using a `type` alias.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">GreetingProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 2. Apply the type to the `props` argument.</span>
<span class="c1">// We use destructuring to pull out the `name` property.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">Greeting</span><span class="p">({</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">GreetingProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">Greeting</span><span class="w"> </span><span class="na">name</span><span class="o">=</span><span class="s">&quot;Alice&quot;</span><span class="w"> </span><span class="p">/&gt;;</span>
<span class="w">  </span><span class="c1">// Try passing a number: &lt;Greeting name={123} /&gt;</span>
<span class="w">  </span><span class="c1">// TypeScript will immediately show an error.</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rendered Output</strong>:</p>
<div class="codehilite"><pre><span></span><code>Hello, Alice!
</code></pre></div>

<p>This is the pattern you will use for 95% of your components. It is simple, explicit, and easy to read.</p>
<h2 id="deep-dive">Deep Dive</h2>
<h3 id="the-legacy-reactfc-pattern">The Legacy <code>React.FC</code> Pattern</h3>
<p>You will encounter another pattern in older codebases or tutorials: <code>React.FC</code> (or its full name, <code>React.FunctionComponent</code>).</p>
<p>Let's see the same <code>Greeting</code> component written with <code>React.FC</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">GreetingProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Legacy pattern using React.FC</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">GreetingFC</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">FC</span><span class="p">&lt;</span><span class="nt">GreetingProps</span><span class="p">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="c1">// Modern, preferred pattern</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">GreetingModern</span><span class="p">({</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">GreetingProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<p>While they look similar, <code>React.FC</code> has two main drawbacks that have made it fall out of favor:</p>
<ol>
<li><strong>Implicit <code>children</code></strong>: As we discussed in Chapter 19, older versions of <code>React.FC</code> automatically added <code>children?: React.ReactNode</code> to your props. This meant you could pass children to a component that wasn't designed to use them, which was a source of bugs. While this has been fixed in the latest <code>@types/react</code>, the historical confusion remains.</li>
<li><strong>Doesn't work well with generics</strong>: Typing generic components (which we'll cover later in this chapter) is more cumbersome with <code>React.FC</code>.</li>
</ol>
<p>The modern approach of typing props directly on the function argument is more direct and avoids these issues entirely.</p>
<h3 id="common-confusion-reactfc-vs-plain-function">Common Confusion: <code>React.FC</code> vs. Plain Function</h3>
<p><strong>You might think</strong>: "<code>React.FC</code> seems more official. Isn't it better to use it to signal that this is a React component?"</p>
<p><strong>Actually</strong>: A function that accepts a props object and returns JSX <em>is</em> a React component. You don't need a special type to "bless" it as one. The modern pattern is more aligned with standard TypeScript function typing and is less verbose.</p>
<p><strong>Why the confusion happens</strong>: <code>React.FC</code> was promoted in early TypeScript-React documentation, so it's widespread in older content. The community consensus has since shifted.</p>
<p><strong>How to remember</strong>: Type your component like any other function. The props are the arguments, and the JSX is the return value. Keep it simple.</p>
<h3 id="production-perspective">Production Perspective</h3>
<ul>
<li><strong>Consistency is Key</strong>: Choose the modern pattern (<code>function MyComponent(props: MyProps)</code>) and stick with it across your project. Use a linter to enforce this consistency.</li>
<li><strong>Readability</strong>: The modern pattern is easier to read because the props type is directly next to the props it's describing.</li>
<li><strong>Refactoring</strong>: When refactoring an older codebase, consider converting <code>React.FC</code> components to the modern function syntax to improve consistency and explicitness, especially regarding the <code>children</code> prop.</li>
</ul>
<h2 id="typing-props">Typing Props</h2>
<h2 id="learning-objective_1">Learning Objective</h2>
<p>Define and apply structured types for component props using <code>type</code> or <code>interface</code>, including destructuring for cleaner access.</p>
<h2 id="why-this-matters_1">Why This Matters</h2>
<p>Props are the public API of your components. A well-defined props type acts as a contract, ensuring that components are used correctly. This is the single most important typing skill in React, as it prevents the most common category of bugs: passing incorrect data.</p>
<h2 id="discovery-phase_1">Discovery Phase</h2>
<p>Let's build a <code>UserProfile</code> card component that displays a user's information. We'll start by defining the shape of its props.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Define the props type.</span>
<span class="c1">// Using `type` is a great default, as we discussed in Chapter 19.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">UserProfileProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">avatarUrl</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isActive</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;light&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Using a union type for specific options</span>
<span class="p">};</span>

<span class="c1">// Step 2: Apply the type and destructure the props.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">UserProfile</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">avatarUrl</span><span class="p">,</span><span class="w"> </span><span class="nx">isActive</span><span class="p">,</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">UserProfileProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cardStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">border</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1px solid #ccc&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">borderRadius</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;8px&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;16px&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">maxWidth</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;250px&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;#333&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#fff&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;#fff&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#333&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">statusStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="nx">isActive</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;grey&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">cardStyle</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">img</span><span class="w"> </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">avatarUrl</span><span class="p">}</span><span class="w"> </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb">&#39;s avatar`</span><span class="p">}</span><span class="w"> </span><span class="na">width</span><span class="o">=</span><span class="s">&quot;80&quot;</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">borderRadius</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;50%&#39;</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">username</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">statusStyle</span><span class="p">}&gt;{</span><span class="nx">isActive</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;Online&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Offline&#39;</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">UserProfile</span>
<span class="w">      </span><span class="na">username</span><span class="o">=</span><span class="s">&quot;JaneDoe&quot;</span>
<span class="w">      </span><span class="na">avatarUrl</span><span class="o">=</span><span class="s">&quot;https://i.pravatar.cc/80&quot;</span>
<span class="w">      </span><span class="na">isActive</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
<span class="w">      </span><span class="na">theme</span><span class="o">=</span><span class="s">&quot;dark&quot;</span>
<span class="w">    </span><span class="p">/&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rendered Output</strong>:</p>
<div class="codehilite"><pre><span></span><code>(A dark-themed card with an avatar, the username &quot;JaneDoe&quot;, and the status &quot;Online&quot; in green text.)
</code></pre></div>

<p>This example demonstrates several key practices:</p>
<ol>
<li><strong>Descriptive Type Name</strong>: <code>UserProfileProps</code> clearly indicates its purpose.</li>
<li><strong>Primitive Types</strong>: We use <code>string</code> and <code>boolean</code>.</li>
<li><strong>Union Type</strong>: The <code>theme</code> prop is restricted to either <code>'light'</code> or <code>'dark'</code>, preventing invalid values.</li>
<li><strong>Destructuring</strong>: In the function signature <code>({ username, ... }: UserProfileProps)</code>, we immediately pull the properties we need into local constants, making the component body cleaner.</li>
</ol>
<h2 id="deep-dive_1">Deep Dive</h2>
<h3 id="interface-vs-type-for-props"><code>interface</code> vs. <code>type</code> for Props</h3>
<p>As covered in Chapter 19, you can also use an <code>interface</code> to define props.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Using `interface`</span>
<span class="kr">interface</span><span class="w"> </span><span class="nx">UserProfilePropsInterface</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">avatarUrl</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isActive</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">UserProfileWithInterface</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">avatarUrl</span><span class="p">,</span><span class="w"> </span><span class="nx">isActive</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">UserProfilePropsInterface</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ...same implementation</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;{</span><span class="nx">username</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="c1">// Using `type` (recommended for consistency)</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">UserProfilePropsType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">avatarUrl</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isActive</span><span class="o">:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">UserProfileWithType</span><span class="p">({</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">avatarUrl</span><span class="p">,</span><span class="w"> </span><span class="nx">isActive</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">UserProfilePropsType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ...same implementation</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;{</span><span class="nx">username</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<p>For typing component props, both are functionally equivalent. The recommendation to stick with <code>type</code> is for consistency across your codebase, as <code>type</code> can represent unions and other complex types that <code>interface</code> cannot.</p>
<h3 id="typing-complex-prop-shapes">Typing Complex Prop Shapes</h3>
<p>Props aren't just primitives. They can be objects, arrays, and functions.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">Post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">;</span><span class="w"> </span><span class="c1">// Nested object</span>
<span class="w">  </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">[];</span><span class="w"> </span><span class="c1">// Array of strings</span>
<span class="w">  </span><span class="nx">onLike</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">postId</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span><span class="w"> </span><span class="c1">// Function prop</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">PostCard</span><span class="p">({</span><span class="w"> </span><span class="nx">post</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">post</span><span class="o">:</span><span class="w"> </span><span class="nx">Post</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleLike</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// We can call `onLike` with confidence, knowing it exists and</span>
<span class="w">    </span><span class="c1">// expects a number.</span>
<span class="w">    </span><span class="nx">post</span><span class="p">.</span><span class="nx">onLike</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">By</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">tags</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">tag</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">tag</span><span class="p">}&gt;</span><span class="err">#</span><span class="p">{</span><span class="nx">tag</span><span class="p">}</span><span class="w"> </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;)}</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleLike</span><span class="p">}&gt;</span><span class="nx">Like</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Here, we've defined a complex <code>Post</code> type that includes:</p>
<ul>
<li>A nested <code>User</code> object.</li>
<li>An array of strings for <code>tags</code>.</li>
<li>A function <code>onLike</code> that takes a <code>postId</code> and returns nothing (<code>void</code>).</li>
</ul>
<p>By defining this shape, we get full type safety and autocompletion when accessing <code>post.author.name</code> or calling <code>post.onLike(post.id)</code>.</p>
<h3 id="production-perspective_1">Production Perspective</h3>
<ul>
<li><strong>Colocate Types</strong>: For components that are only used in one file, define the props type right above the component. For shared components, it's common to have a <code>types.ts</code> file in the component's folder or to export the type from the component file itself (more on this in 20.6).</li>
<li><strong>Props as an API Contract</strong>: Think of your props type as the formal documentation for your component. It tells other developers exactly what data is needed and in what shape.</li>
<li><strong>Avoid <code>any</code></strong>: Never use <code>any</code> in your props. It's an escape hatch that negates the benefits of TypeScript. If you have a complex object you don't want to type fully, use <code>unknown</code> and perform type checking, or at least use a generic <code>Record&lt;string, unknown&gt;</code>.</li>
</ul>
<h2 id="props-with-children">Props with Children</h2>
<h2 id="learning-objective_2">Learning Objective</h2>
<p>Correctly type components that accept <code>children</code> props using the explicit <code>React.ReactNode</code> type.</p>
<h2 id="why-this-matters_2">Why This Matters</h2>
<p>Many components are designed to wrap other content, like layouts, cards, or modals. As of React 19's type definitions, you must be explicit about accepting <code>children</code>. Mastering this pattern is essential for building compositional UIs in a type-safe way.</p>
<h2 id="discovery-phase_2">Discovery Phase</h2>
<p>Let's build a <code>Card</code> component. It should be able to wrap any content we pass to it.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Define the props, including `children`.</span>
<span class="c1">// `React.ReactNode` is the correct type for anything React can render.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">CardProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ReactNode</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Step 2: Use the props in your component.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">Card</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">CardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">border</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1px solid #ccc&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">borderRadius</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;8px&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;16px&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">margin</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;10px&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Step 3: Use the component by nesting content inside it.</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Card</span><span class="w"> </span><span class="na">title</span><span class="o">=</span><span class="s">&quot;User Profile&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">This</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="nx">some</span><span class="w"> </span><span class="nx">information</span><span class="w"> </span><span class="nx">about</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">user</span><span class="p">.&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">Contact</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Card</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rendered Output</strong>:</p>
<div class="codehilite"><pre><span></span><code>(A bordered box with the title &quot;User Profile&quot; containing a paragraph and a button.)
</code></pre></div>

<p>The key here is <code>children: React.ReactNode;</code>. By adding this to our <code>CardProps</code>, we explicitly state that this component is designed to be a container. If we were to omit it, trying to pass children to <code>&lt;Card&gt;</code> would result in a TypeScript error.</p>
<h2 id="deep-dive_2">Deep Dive</h2>
<h3 id="what-is-reactreactnode">What is <code>React.ReactNode</code>?</h3>
<p><code>React.ReactNode</code> is a very broad type provided by React. It includes:</p>
<ul>
<li><code>string</code></li>
<li><code>number</code></li>
<li><code>boolean</code> (which don't render)</li>
<li><code>null</code> and <code>undefined</code> (which don't render)</li>
<li><code>React.ReactElement</code> (i.e., JSX like <code>&lt;p /&gt;</code>)</li>
<li>An array of <code>React.ReactNode</code>s</li>
</ul>
<p>This makes it the perfect type for <code>children</code> because it covers every valid value you could possibly place between a component's opening and closing tags.</p>
<h3 id="optional-children">Optional Children</h3>
<p>Sometimes, a component can accept children but doesn't require them. In this case, you can make the <code>children</code> prop optional with a <code>?</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">AlertBoxProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;warning&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children</span><span class="o">?:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ReactNode</span><span class="p">;</span><span class="w"> </span><span class="c1">// Children are optional</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">AlertBox</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">AlertBoxProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#e0f7fa&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">warning</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#fff3e0&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">colors</span><span class="p">[</span><span class="nx">type</span><span class="p">],</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;10px&#39;</span><span class="w"> </span><span class="p">}}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;{</span><span class="nx">message</span><span class="p">}&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">children</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">marginTop</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;8px&#39;</span><span class="w"> </span><span class="p">}}&gt;{</span><span class="nx">children</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Used without children */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">AlertBox</span><span class="w"> </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;warning&quot;</span><span class="w"> </span><span class="na">message</span><span class="o">=</span><span class="s">&quot;Your session is about to expire.&quot;</span><span class="w"> </span><span class="p">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Used with children */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">AlertBox</span><span class="w"> </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;info&quot;</span><span class="w"> </span><span class="na">message</span><span class="o">=</span><span class="s">&quot;New feature available!&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">You</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">now</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="nx">your</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">CSV</span><span class="p">.&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">AlertBox</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>By marking <code>children</code> as optional (<code>children?</code>), we can use <code>AlertBox</code> in both ways. Inside the component, we check if <code>children</code> exists before rendering it to avoid rendering an empty container.</p>
<h3 id="common-confusion-reactreactnode-vs-reactreactelement">Common Confusion: <code>React.ReactNode</code> vs. <code>React.ReactElement</code></h3>
<p><strong>You might think</strong>: "My children will always be JSX, so shouldn't I use <code>React.ReactElement</code>?"</p>
<p><strong>Actually</strong>: <code>React.ReactElement</code> is much more restrictive. It only accepts a single JSX element. It does <em>not</em> accept strings, numbers, or arrays of elements.</p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">element</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// OK</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Error!</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">array</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="nx">p</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">p</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">];</span><span class="w"> </span><span class="c1">// Error!</span>
</code></pre></div>

<p><strong>Why the confusion happens</strong>: The names are similar, and in many cases, the child is just one element.</p>
<p><strong>How to remember</strong>: Always default to <code>React.ReactNode</code> for <code>children</code>. It's safer and covers all valid use cases. Only use <code>React.ReactElement</code> if you are building a component that <em>must</em> receive a single JSX element and nothing else (e.g., a component that clones its child to add props).</p>
<h3 id="production-perspective_2">Production Perspective</h3>
<ul>
<li><strong>Composition is Key</strong>: The <code>children</code> prop is the heart of React's composition model. Typing it correctly is fundamental to building reusable and flexible UI libraries.</li>
<li><strong>Clarity of Intent</strong>: Explicitly typing <code>children</code> makes the component's purpose clear. A developer seeing <code>children: React.ReactNode</code> in the props knows immediately that it's a wrapper or container component.</li>
<li><strong>The <code>PropsWithChildren</code> Utility Type</strong>: You might see <code>type MyProps = PropsWithChildren&lt;{ foo: string }&gt;</code> in older code. This was a helper type that automatically added <code>children</code> for you. It is now discouraged in favor of explicitly adding <code>children: React.ReactNode</code> to your own props type for better clarity.</li>
</ul>
<h2 id="ref-props-without-forwardref">Ref Props Without forwardRef</h2>
<h2 id="learning-objective_3">Learning Objective</h2>
<p>Pass <code>ref</code>s to function components as regular props in React 19, eliminating the need for the <code>React.forwardRef</code> wrapper.</p>
<h2 id="why-this-matters_3">Why This Matters</h2>
<p>Directly passing <code>ref</code>s has been a long-standing request in the React community. React 19 finally makes it possible, simplifying component code, reducing boilerplate, and making <code>ref</code>s behave like any other prop. This is a major quality-of-life improvement.</p>
<h2 id="discovery-phase_3">Discovery Phase</h2>
<p>Let's look at the classic use case: creating a custom <code>Input</code> component that the parent needs to focus programmatically.</p>
<p>First, let's quickly review the <strong>legacy way</strong> using <code>forwardRef</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// LEGACY PATTERN: Pre-React 19</span>
<span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">forwardRef</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">LegacyInputProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// We had to wrap our entire component in `forwardRef`.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">LegacyInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">forwardRef</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="err">,</span><span class="w"> </span><span class="na">LegacyInputProps</span><span class="p">&gt;(</span>
<span class="w">  </span><span class="p">({</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">ref</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">input</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>
</code></pre></div>

<p>This pattern worked, but it was verbose. The <code>forwardRef</code> wrapper and the separate <code>ref</code> argument were confusing for beginners.</p>
<p>Now, let's see the beautiful simplicity of the <strong>modern React 19 way</strong>.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useRef</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// MODERN PATTERN: React 19</span>
<span class="c1">// Step 1: Add `ref` to your props type.</span>
<span class="c1">// Use `React.Ref&lt;T&gt;` where T is the DOM element type.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">ModernInputProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">ref</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Ref</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="c1">// Step 2: Your component is just a regular function.</span>
<span class="c1">// `ref` is destructured from props like anything else.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">ModernInput</span><span class="p">({</span><span class="w"> </span><span class="nx">label</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ModernInputProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">input</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// --- USAGE ---</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">inputRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Focus the input when the component mounts</span>
<span class="w">    </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">The</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="nx">below</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">focused</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="nx">load</span><span class="p">.&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">ModernInput</span><span class="w"> </span><span class="na">label</span><span class="o">=</span><span class="s">&quot;My Input&quot;</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">inputRef</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Interactive Behavior</strong>:
When the page loads, the input field will be automatically focused, and the cursor will be blinking inside it.</p>
<p>The difference is stark.</p>
<ol>
<li>No more <code>forwardRef</code> wrapper.</li>
<li><code>ref</code> is just another property in our <code>ModernInputProps</code> type.</li>
<li>The component is a standard function, making it easier to read and type.</li>
</ol>
<p>The correct type to use is <code>React.Ref&lt;T&gt;</code>, where <code>T</code> is the type of the element the ref will be attached to (e.g., <code>HTMLInputElement</code>, <code>HTMLButtonElement</code>, <code>HTMLDivElement</code>).</p>
<h2 id="deep-dive_3">Deep Dive</h2>
<h3 id="how-does-it-work">How Does It Work?</h3>
<p>React 19 changed the compiler and reconciler to treat a prop named <code>ref</code> specially. When you pass a <code>ref</code> prop to a function component, React understands that it should not be treated as a regular prop but should be attached to the underlying DOM element you specify. This was previously only possible with class components or <code>forwardRef</code>.</p>
<h3 id="typing-refs-for-custom-component-instances">Typing Refs for Custom Component Instances</h3>
<p>You can also use <code>ref</code> to get a handle on a custom component instance, allowing you to call methods on it. This is done via the <code>useImperativeHandle</code> hook.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useRef</span><span class="p">,</span><span class="w"> </span><span class="nx">useImperativeHandle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Define the methods you want to expose.</span>
<span class="k">export</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="nx">FancyInputHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">fancyFocus</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="w">  </span><span class="nx">fancyClear</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Step 2: Type the ref prop with your handle type.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">FancyInputProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">ref</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Ref</span><span class="p">&lt;</span><span class="nt">FancyInputHandle</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">FancyInput</span><span class="p">({</span><span class="w"> </span><span class="nx">label</span><span class="p">,</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">FancyInputProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">inputRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Step 3: Use `useImperativeHandle` to expose specific functions.</span>
<span class="w">  </span><span class="nx">useImperativeHandle</span><span class="p">(</span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">fancyFocus</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Focused with a fancy border!&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2px solid red&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">fancyClear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1px solid black&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">}));</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">input</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">inputRef</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// --- USAGE ---</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">fancyRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">FancyInputHandle</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">FancyInput</span><span class="w"> </span><span class="na">label</span><span class="o">=</span><span class="s">&quot;Fancy Input&quot;</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">fancyRef</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fancyRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">fancyFocus</span><span class="p">()}&gt;</span><span class="nx">Focus</span><span class="w"> </span><span class="nx">It</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fancyRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">fancyClear</span><span class="p">()}&gt;</span><span class="nx">Clear</span><span class="w"> </span><span class="nx">It</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>In this advanced pattern, we type the <code>ref</code> with <code>React.Ref&lt;FancyInputHandle&gt;</code>. This tells the parent component that when it uses <code>fancyRef.current</code>, it will have access to the <code>fancyFocus</code> and <code>fancyClear</code> methods, and nothing else. This is a powerful way to create safe and explicit APIs for component interaction.</p>
<h3 id="production-perspective_3">Production Perspective</h3>
<ul>
<li><strong>Migration Path</strong>: When upgrading a codebase to React 19, gradually refactor all <code>forwardRef</code> components to the new, simpler pattern. This is a low-risk, high-reward change that improves code clarity.</li>
<li><strong>Naming Convention</strong>: Always name the prop <code>ref</code>. React 19 specifically looks for a prop with this exact name to enable the new behavior. Don't use names like <code>inputRef</code> or <code>forwardedRef</code> for this purpose anymore.</li>
<li><strong>Limit Imperative APIs</strong>: While exposing methods via <code>useImperativeHandle</code> is powerful, it should be used sparingly. It's an "imperative" escape hatch in a declarative library. Always prefer declarative solutions (passing props) when possible. Use imperative handles for things that are difficult to express with props, like managing focus, triggering animations, or integrating with third-party DOM libraries.</li>
</ul>
<h2 id="optional-and-default-props">Optional and Default Props</h2>
<h2 id="learning-objective_4">Learning Objective</h2>
<p>Define optional props in a type definition and provide default values for them within the component using JavaScript's default parameters.</p>
<h2 id="why-this-matters_4">Why This Matters</h2>
<p>Components should be flexible. Optional props allow a component to have a simpler default appearance or behavior, which can be customized when needed. Providing sensible defaults makes your components easier to use and reduces the amount of boilerplate code required from the consumer.</p>
<h2 id="discovery-phase_4">Discovery Phase</h2>
<p>Let's build a <code>Button</code> component. Most of the time, it will be a standard button, but we want to allow for optional customization, like changing its size or disabling it.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Define optional props with `?`</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">ButtonProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ReactNode</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="w">  </span><span class="nx">size</span><span class="o">?:</span><span class="w"> </span><span class="s1">&#39;small&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;medium&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;large&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Optional</span>
<span class="w">  </span><span class="nx">disabled</span><span class="o">?:</span><span class="w"> </span><span class="kr">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Optional</span>
<span class="p">};</span>

<span class="c1">// Step 2: Provide default values using default parameters</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">Button</span><span class="p">({</span>
<span class="w">  </span><span class="nx">children</span><span class="p">,</span>
<span class="w">  </span><span class="nx">onClick</span><span class="p">,</span>
<span class="w">  </span><span class="nx">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;medium&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Default value</span>
<span class="w">  </span><span class="nx">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// Default value</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ButtonProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sizeStyles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">small</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;4px 8px&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;12px&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">medium</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;8px 16px&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;14px&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">large</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;12px 24px&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;16px&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClick</span><span class="p">}</span>
<span class="w">      </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">disabled</span><span class="p">}</span>
<span class="w">      </span><span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">sizeStyles</span><span class="p">[</span><span class="nx">size</span><span class="p">]}</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// --- USAGE ---</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;flex&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;10px&#39;</span><span class="w"> </span><span class="p">}}&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Uses all defaults (medium size, not disabled) */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Default clicked!&#39;</span><span class="p">)}&gt;</span><span class="nx">Default</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Overrides the size prop */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Large clicked!&#39;</span><span class="p">)}</span><span class="w"> </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;large&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="nx">Large</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Overrides the disabled prop */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Disabled clicked!&#39;</span><span class="p">)}</span><span class="w"> </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}&gt;</span>
<span class="w">        </span><span class="nx">Disabled</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Rendered Output</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Default] [  Large  ] [Disabled]</span>
<span class="na">(Three buttons of different sizes and states.)</span>
</code></pre></div>

<p>This pattern is elegant and effective:</p>
<ol>
<li>In <code>ButtonProps</code>, <code>size?</code> and <code>disabled?</code> tell TypeScript that these props are optional. A consumer of <code>Button</code> does not have to provide them.</li>
<li>In the function signature, <code>size = 'medium'</code> and <code>disabled = false</code> are JavaScript default parameters. If the <code>size</code> or <code>disabled</code> prop is <code>undefined</code> (i.e., not passed by the parent), these values will be used instead.</li>
</ol>
<p>This combination ensures that inside our component, <code>size</code> and <code>disabled</code> are <em>always</em> defined. We don't need to check for <code>undefined</code>.</p>
<h2 id="deep-dive_4">Deep Dive</h2>
<h3 id="why-default-parameters-are-a-best-practice">Why Default Parameters are a Best Practice</h3>
<p>You could achieve a similar result by checking for <code>undefined</code> inside the component body:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Button</span><span class="p">(</span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="kt">ButtonProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">children</span><span class="p">,</span><span class="w"> </span><span class="nx">onClick</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">&quot;medium&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">disabled</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p>However, using default parameters in the function signature is generally preferred because:</p>
<ul>
<li><strong>It's more concise</strong>: The declaration and default value are in one place.</li>
<li><strong>It's clearer to readers</strong>: It's immediately obvious what the default values are just by looking at the function signature.</li>
<li><strong>It plays nicely with destructuring</strong>: It fits naturally into the destructuring pattern we already use for props.</li>
</ul>
<h3 id="common-confusion-null-vs-undefined-for-default-props">Common Confusion: <code>null</code> vs. <code>undefined</code> for Default Props</h3>
<p><strong>You might think</strong>: "If I pass <code>size={null}</code> to the button, will it use the default value?"</p>
<p><strong>Actually</strong>: No. JavaScript default parameters only kick in if the value is <code>undefined</code>. If you explicitly pass <code>null</code>, the variable will be <code>null</code>.</p>
<p><strong>Why the confusion happens</strong>: <code>null</code> and <code>undefined</code> are often treated similarly.</p>
<p><strong>How to remember</strong>: Default parameters answer the question, "What should the value be if this prop is <em>missing</em>?" If the prop is explicitly provided (even as <code>null</code>), that value will be used. This is why it's important to have strict <code>tsconfig.json</code> settings, as TypeScript would likely catch an attempt to use <code>null</code> where a string like <code>'medium'</code> is expected.</p>
<h3 id="production-perspective_4">Production Perspective</h3>
<ul>
<li><strong>Design for Simplicity</strong>: When designing a component API, make the most common use case the one with the fewest props. Use optional props with sensible defaults for customizations. A good component should be easy to use for the simple case and powerful enough for the complex case.</li>
<li><strong>Boolean Props</strong>: For boolean props like <code>disabled</code>, <code>isLoading</code>, or <code>isActive</code>, it's a common convention to make them optional and default to <code>false</code>. This allows consumers to use the shorthand <code>&lt;MyComponent disabled /&gt;</code> which is equivalent to <code>disabled={true}</code>.</li>
<li><strong>Consistency in Defaults</strong>: If you have a library of components, be consistent with your default props. For example, all buttons might default to <code>size="medium"</code>. This makes the library predictable and easier to learn.</li>
</ul>
<h2 id="component-type-exports">Component Type Exports</h2>
<h2 id="learning-objective_5">Learning Objective</h2>
<p>Export component prop types alongside the component itself to enable type-safe composition and usage in other parts of the application.</p>
<h2 id="why-this-matters_5">Why This Matters</h2>
<p>When you build a component, you're not just building the runtime code; you're also creating a typed API. Exporting the props type allows other developers (or you, in another file) to use your component without having to guess its props or re-declare its types. This is fundamental for building scalable and maintainable frontends.</p>
<h2 id="discovery-phase_5">Discovery Phase</h2>
<p>Let's create a <code>FancyButton</code> component and its corresponding props type in its own file. Then we'll see how to import and use both in another file.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// FileName: components/FancyButton.tsx</span>

<span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Export the props type directly.</span>
<span class="k">export</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="nx">FancyButtonProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">variant</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;primary&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;secondary&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ReactNode</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Step 2: Export the component as the default export.</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">FancyButton</span><span class="p">({</span><span class="w"> </span><span class="nx">variant</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="p">,</span><span class="w"> </span><span class="nx">onClick</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">FancyButtonProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">variant</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;primary&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;grey&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">border</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;10px 20px&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClick</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, let's imagine we are building a <code>CallToAction</code> component in a different file. This component will use our <code>FancyButton</code>, and it needs to accept some of the button's props to pass them through.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// FileName: components/CallToAction.tsx</span>

<span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="c1">// Step 3: Import the component AND its props type.</span>
<span class="k">import</span><span class="w"> </span><span class="nx">FancyButton</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="nx">FancyButtonProps</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./FancyButton&#39;</span><span class="p">;</span>

<span class="c1">// We can use `Pick` to select only the props we want to pass through.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">CallToActionProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">buttonVariant</span><span class="o">:</span><span class="w"> </span><span class="nx">FancyButtonProps</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">];</span><span class="w"> </span><span class="c1">// Or Pick&lt;FancyButtonProps, &#39;variant&#39;&gt;</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">CallToAction</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="nx">buttonVariant</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">CallToActionProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">FancyButton</span><span class="w"> </span><span class="na">variant</span><span class="o">=</span><span class="p">{</span><span class="nx">buttonVariant</span><span class="p">}</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;CTA Clicked!&#39;</span><span class="p">)}&gt;</span>
<span class="w">        </span><span class="nx">Click</span><span class="w"> </span><span class="nx">Me</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">FancyButton</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>This pattern is incredibly powerful.</p>
<ol>
<li>We exported <code>FancyButtonProps</code> from <code>FancyButton.tsx</code>.</li>
<li>In <code>CallToAction.tsx</code>, we imported <code>FancyButtonProps</code>. The <code>type</code> keyword in the import statement (<code>import { type FancyButtonProps }</code>) is a modern feature that tells bundlers this is a type-only import, which can be safely erased at compile time.</li>
<li>We then reused <code>FancyButtonProps['variant']</code> to ensure that our <code>CallToAction</code> component's <code>buttonVariant</code> prop must be one of the valid variants from the button itself. If we later add a <code>'tertiary'</code> variant to <code>FancyButton</code>, this type will update automatically.</li>
</ol>
<h2 id="deep-dive_5">Deep Dive</h2>
<h3 id="patterns-for-exporting-types">Patterns for Exporting Types</h3>
<p>There are a few common conventions for exporting types:</p>
<ol>
<li>
<p><strong>Named export from component file (Recommended)</strong>: This is the pattern we just saw. It's clean, simple, and keeps the types co-located with the component logic.</p>
<p><code>typescript
// Button.tsx
export type ButtonProps = { /* ... */ };
export default function Button(props: ButtonProps) { /* ... */ }</code></p>
<ol>
<li><strong>Separate <code>types.ts</code> file</strong>: For very complex components with many related types, you might create a dedicated types file.</li>
</ol>
<p><code>- Button/
  - index.tsx
  - types.ts</code></p>
<p><code>typescript
// Button/types.ts
export type ButtonProps = { /* ... */ };
export type ButtonSize = 'small' | 'medium';</code></p>
<p><code>typescript
// Button/index.tsx
import { ButtonProps } from "./types";
export * from "./types"; // Re-export types for consumers
export default function Button(props: ButtonProps) {
  /* ... */
}</code></p>
<p>This approach is good for organization when you have more than just one props type.</p>
</li>
</ol>
<h3 id="using-reactcomponentprops">Using <code>React.ComponentProps</code></h3>
<p>TypeScript gives us a handy utility type for when a component <em>doesn't</em> export its props type. <code>React.ComponentProps&lt;T&gt;</code> can extract the props type from a component type.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Imagine this component is from a third-party library and doesn&#39;t export its props.</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">ThirdPartyButton</span><span class="p">({</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sm&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;lg&#39;</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">size</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/button&gt;;</span>
<span class="p">}</span>

<span class="c1">// We can extract its props type!</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">InferredProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ComponentProps</span><span class="o">&lt;</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">ThirdPartyButton</span><span class="o">&gt;</span><span class="p">;</span>
<span class="c1">// InferredProps is now: { size: &quot;sm&quot; | &quot;lg&quot;; }</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">MyWrapper</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="nx">InferredProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lg&#39;</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// This is type-safe</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">ThirdPartyButton</span><span class="w"> </span><span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>While this is a useful escape hatch, it's always better to explicitly export props types from your own components. <code>React.ComponentProps</code> is most useful for working with third-party libraries that haven't followed this best practice.</p>
<h3 id="production-perspective_5">Production Perspective</h3>
<ul>
<li><strong>Building a Design System</strong>: When creating a reusable component library or design system, exporting prop types is non-negotiable. It's the primary way you provide a type-safe API for the consumers of your library.</li>
<li><strong>Wrapper Components</strong>: The most common use case for imported prop types is creating wrapper components. A wrapper might add some styling, state, or logic around a base component and needs to accept and pass through a subset of the base component's props. Using <code>Pick</code> and <code>Omit</code> with the imported prop types is the standard way to do this.</li>
<li><strong>Type-Only Imports</strong>: Use <code>import type { MyType } from './MyFile'</code> or <code>import { type MyType } from './MyFile'</code>. This makes it explicit that you're importing something that has no runtime code, which can help with build optimizations and prevents accidental imports of values when you only wanted a type.</li>
</ul>
<h2 id="event-handler-types">Event Handler Types</h2>
<h2 id="learning-objective_6">Learning Objective</h2>
<p>Correctly type event handler props and inline event callbacks using React's synthetic event types for full type safety on event objects.</p>
<h2 id="why-this-matters_6">Why This Matters</h2>
<p>Handling user interaction is at the core of React. Typing your event handlers correctly ensures you can safely access event properties like <code>event.target.value</code> without runtime errors and gives you excellent autocompletion in your editor, speeding up development.</p>
<h2 id="discovery-phase_6">Discovery Phase</h2>
<p>Let's start with the most common event: a button click.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// We want to pass a function to be called on click.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">ClickableButtonProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">onButtonClick</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">ClickableButton</span><span class="p">({</span><span class="w"> </span><span class="nx">onButtonClick</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ClickableButtonProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// To get the type for the `event` object, we can use React&#39;s built-in types.</span>
<span class="w">  </span><span class="c1">// The type for a click event is `React.MouseEvent`.</span>
<span class="w">  </span><span class="c1">// We can make it more specific by providing the element type in angle brackets.</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">MouseEvent</span><span class="p">&lt;</span><span class="nt">HTMLButtonElement</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Now, `event` is fully typed! We get autocomplete for properties like:</span>
<span class="w">    </span><span class="c1">// event.currentTarget</span>
<span class="w">    </span><span class="c1">// event.clientX</span>
<span class="w">    </span><span class="c1">// event.altKey</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Button was clicked!&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
<span class="w">    </span><span class="nx">onButtonClick</span><span class="p">(</span><span class="s1">&#39;Button clicked successfully!&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}&gt;</span><span class="nx">Click</span><span class="w"> </span><span class="nx">Me</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<p>The key is <code>React.MouseEvent&lt;HTMLButtonElement&gt;</code>.</p>
<ul>
<li><code>MouseEvent</code> tells us it's a mouse-related event (click, mousedown, mouseup, etc.).</li>
<li><code>&lt;HTMLButtonElement&gt;</code> is a generic argument that makes the type even more specific. It tells TypeScript that <code>event.currentTarget</code> will be an HTML button element, giving us access to all of its properties.</li>
</ul>
<p>Now let's look at a form input's <code>onChange</code> event, which is slightly different.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">ControlledInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">setValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// The type for an input&#39;s change event is `React.ChangeEvent`.</span>
<span class="w">  </span><span class="c1">// The specific element is `HTMLInputElement`.</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ChangeEvent</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Because we typed the event correctly, TypeScript knows that</span>
<span class="w">    </span><span class="c1">// `event.target` is an input element and has a `value` property.</span>
<span class="w">    </span><span class="nx">setValue</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">input</span><span class="w"> </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span><span class="w"> </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleChange</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">Current</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">value</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Interactive Behavior</strong>:
As you type in the input field, the text below it updates in real-time.</p>
<p>Without <code>React.ChangeEvent&lt;HTMLInputElement&gt;</code>, TypeScript would not know about <code>event.target.value</code>, and you would get a compile-time error. This is one of the most common places where proper typing prevents runtime errors.</p>
<h2 id="deep-dive_6">Deep Dive</h2>
<h3 id="common-event-types">Common Event Types</h3>
<p>Here is a quick reference for the most common event types you'll use:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Event</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Element Generic</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>onClick</code>, <code>onMouseDown</code></td>
<td style="text-align: left;"><code>React.MouseEvent</code></td>
<td style="text-align: left;"><code>HTMLButtonElement</code>, <code>HTMLDivElement</code>, etc.</td>
</tr>
<tr>
<td style="text-align: left;"><code>onChange</code></td>
<td style="text-align: left;"><code>React.ChangeEvent</code></td>
<td style="text-align: left;"><code>HTMLInputElement</code>, <code>HTMLTextAreaElement</code>, <code>HTMLSelectElement</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>onSubmit</code></td>
<td style="text-align: left;"><code>React.FormEvent</code></td>
<td style="text-align: left;"><code>HTMLFormElement</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>onFocus</code>, <code>onBlur</code></td>
<td style="text-align: left;"><code>React.FocusEvent</code></td>
<td style="text-align: left;">Any focusable element</td>
</tr>
<tr>
<td style="text-align: left;"><code>onKeyDown</code>, <code>onKeyUp</code></td>
<td style="text-align: left;"><code>React.KeyboardEvent</code></td>
<td style="text-align: left;">Any element that can receive key events</td>
</tr>
</tbody>
</table>
<p><strong>Pro Tip</strong>: You don't need to memorize these. In VS Code, you can simply hover your mouse over the event prop (e.g., <code>onClick</code> in the JSX) and it will show you the exact type signature required.</p>
<h3 id="typing-event-handler-props">Typing Event Handler Props</h3>
<p>When a parent component needs to provide the event handler, you type it in the component's props.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="nx">type</span><span class="w"> </span><span class="nx">SearchBarProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The prop is a function that receives the new text value.</span>
<span class="w">  </span><span class="nx">onSearchChange</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">newQuery</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">SearchBar</span><span class="p">({</span><span class="w"> </span><span class="nx">onSearchChange</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">SearchBarProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ChangeEvent</span><span class="p">&lt;</span><span class="nt">HTMLInputElement</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">onSearchChange</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">      </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;search&quot;</span>
<span class="w">      </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search...&quot;</span>
<span class="w">      </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleChange</span><span class="p">}</span>
<span class="w">    </span><span class="p">/&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Notice the separation of concerns. The <code>SearchBar</code> component knows how to handle the raw browser event (<code>React.ChangeEvent</code>). It then extracts the useful data (<code>event.target.value</code>) and calls the <code>onSearchChange</code> prop with just that data. This is a great pattern because the parent component doesn't need to know about the browser's event object; it just receives the string it cares about.</p>
<h3 id="production-perspective_6">Production Perspective</h3>
<ul>
<li><strong>Abstracting Event Details</strong>: As shown in the <code>SearchBar</code> example, it's a best practice for child components to handle the raw event and pass up only the relevant data to the parent. This makes parent components simpler and decouples them from the child's internal DOM structure.</li>
<li><strong>Passing the Full Event</strong>: Sometimes, the parent component <em>does</em> need the full event object (e.g., to call <code>event.preventDefault()</code>). In that case, you would type the prop like this:
  <code>typescript
  type FormProps = {
    // The prop is a function that receives the entire event object.
    onSubmit: (event: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; void;
  };</code></li>
<li><strong>Inline Handlers</strong>: For simple cases, you can write the handler inline. TypeScript's inference is so good that you often don't need to type the <code>event</code> parameter manually.
  <code>jsx
  &lt;input onChange={(e) =&gt; setValue(e.target.value)} /&gt;</code>
  Here, <code>e</code> is automatically inferred as <code>React.ChangeEvent&lt;HTMLInputElement&gt;</code> because TypeScript knows it's being passed to the <code>onChange</code> prop of an <code>&lt;input&gt;</code> element.</li>
</ul>
<h2 id="typing-refs">Typing Refs</h2>
<h2 id="learning-objective_7">Learning Objective</h2>
<p>Correctly type refs created with the <code>useRef</code> hook for accessing DOM elements and persisting mutable values across renders.</p>
<h2 id="why-this-matters_7">Why This Matters</h2>
<p>Refs are the primary way to interact with the DOM directly in React. Proper typing is crucial for ensuring that you are calling methods on the correct element type (e.g., <code>.focus()</code> on an input) and for handling the fact that the ref's <code>current</code> property is <code>null</code> on the initial render.</p>
<h2 id="discovery-phase_7">Discovery Phase</h2>
<p>Let's revisit the focus management example, but this time, the ref will be created and used entirely <em>inside</em> one component.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useRef</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;react&quot;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">FocusableInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Step 1: Provide a generic argument to `useRef` for the element type.</span>
<span class="w">  </span><span class="c1">// Initialize it with `null`.</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">inputRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">HTMLInputElement</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Step 2: The `current` property might be null.</span>
<span class="w">    </span><span class="c1">// On the first render, React hasn&#39;t attached the ref to the DOM element yet.</span>
<span class="w">    </span><span class="c1">// The effect runs *after* the render, so `current` will be populated.</span>
<span class="w">    </span><span class="c1">// We use optional chaining (`?.`) for safety.</span>
<span class="w">    </span><span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span><span class="w"> </span><span class="c1">// Empty dependency array means this runs once after mount.</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">This</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">focused</span><span class="w"> </span><span class="nx">after</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">component</span><span class="w"> </span><span class="nx">mounts</span><span class="p">.&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Step 3: Attach the ref to the DOM element. */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">input</span><span class="w"> </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">inputRef</span><span class="p">}</span><span class="w"> </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>This example highlights the three critical steps for typing DOM refs:</p>
<ol>
<li><strong>Declaration</strong>: <code>useRef&lt;HTMLInputElement&gt;(null)</code>. You tell <code>useRef</code> what kind of element it will hold. The initial value <em>must</em> be <code>null</code> for DOM refs, because the DOM node doesn't exist yet when <code>useRef</code> is called.</li>
<li><strong>Access</strong>: <code>inputRef.current?.focus()</code>. The type of <code>inputRef.current</code> is <code>HTMLInputElement | null</code>. TypeScript forces you to account for the <code>null</code> case. Optional chaining (<code>?.</code>) is the most common way to handle this.</li>
<li><strong>Attachment</strong>: <code>&lt;input ref={inputRef} /&gt;</code>. You pass the ref object to the <code>ref</code> attribute of the DOM element.</li>
</ol>
<h2 id="deep-dive_7">Deep Dive</h2>
<h3 id="the-refs-current-property">The Ref's <code>current</code> Property</h3>
<p>The <code>ref</code> object itself is stable across renders. It's a simple object with a single property: <code>current</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// The shape of a ref object</span>
<span class="p">{</span>
<span class="w">  </span><span class="nx">current</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="c1">// where T is the type you provided</span>
<span class="p">}</span>
</code></pre></div>

<p>React mutates the <code>current</code> property to point to the DOM node after it has been mounted. Before that, it's <code>null</code>. This is why the null check is essential.</p>
<h3 id="refs-for-storing-mutable-values">Refs for Storing Mutable Values</h3>
<p>Refs can also be used to store any mutable value that you want to persist across renders without causing a re-render when it changes. This is like an "instance variable" for a function component.</p>
<p>When using <code>useRef</code> for this purpose, you can provide a non-null initial value.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useRef</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">Timer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">seconds</span><span class="p">,</span><span class="w"> </span><span class="nx">setSeconds</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Here, we&#39;re storing a number. The type is inferred.</span>
<span class="w">  </span><span class="c1">// `intervalRef.current` will be `number | undefined`.</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">intervalRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;();</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Start the interval</span>
<span class="w">    </span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">setSeconds</span><span class="p">(</span><span class="nx">prev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">prev</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Cleanup function: clear the interval when the component unmounts.</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span><span class="w"> </span><span class="c1">// Run only once on mount.</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Timer</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">seconds</span><span class="p">}</span><span class="nx">s</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<p>In this example, <code>intervalRef</code> is used to hold the ID of the <code>setInterval</code>. We need to store this ID so we can clear it in the <code>useEffect</code> cleanup function when the component unmounts.</p>
<ul>
<li>We type it as <code>useRef&lt;number&gt;()</code>. Since we don't provide an initial value, it starts as <code>undefined</code>.</li>
<li>The type of <code>intervalRef.current</code> is <code>number | undefined</code>.</li>
<li>This is a perfect use case for a ref because changing the interval ID should not trigger a re-render.</li>
</ul>
<h3 id="common-confusion-state-vs-ref-for-mutable-data">Common Confusion: State vs. Ref for Mutable Data</h3>
<p><strong>You might think</strong>: "If I need to store a value, why not just use <code>useState</code>?"</p>
<p><strong>Actually</strong>: You should use <code>useState</code> only for data that, when changed, should cause the component to re-render and reflect the new value in the UI. Use <code>useRef</code> for data that needs to be persisted across renders but does <em>not</em> directly drive the UI.</p>
<p><strong>Why the confusion happens</strong>: Both can "hold" data.</p>
<p><strong>How to remember</strong>:</p>
<ul>
<li>Does changing this value need to update what the user sees? ‚Üí Use <strong>state</strong>.</li>
<li>Do I just need to keep track of something behind the scenes (like a timer ID, a previous value, or a third-party library instance)? ‚Üí Use <strong>ref</strong>.</li>
</ul>
<h3 id="production-perspective_7">Production Perspective</h3>
<ul>
<li><strong>DOM Manipulation</strong>: Use refs for direct DOM interactions that are hard to achieve declaratively, such as managing focus, measuring element dimensions, or integrating with non-React libraries that need a DOM node (like a charting library).</li>
<li><strong>Avoiding Null Checks</strong>: In some cases, you might be certain that a ref will be populated by the time you access it (e.g., in an event handler that only runs after a user clicks). In these rare cases, you can use a non-null assertion (<code>!</code>) like <code>myRef.current!.focus()</code>. However, this is risky as it bypasses TypeScript's safety checks. Use optional chaining (<code>?.</code>) whenever possible.</li>
<li><strong>Refs and Custom Hooks</strong>: Refs are often encapsulated within custom hooks to manage complex logic, such as a <code>useClickOutside</code> hook that takes a ref to an element and triggers a callback when the user clicks outside of it.</li>
</ul>
<h2 id="generic-components">Generic Components</h2>
<h2 id="learning-objective_8">Learning Objective</h2>
<p>Create flexible, reusable, and type-safe generic components that can work with various data structures while maintaining full type safety.</p>
<h2 id="why-this-matters_8">Why This Matters</h2>
<p>Hard-coding components to specific data types leads to code duplication and poor maintainability. Generics are the key to unlocking true reusability in a typed system, allowing you to build foundational components (like lists, tables, and dropdowns) that can be adapted to any data model in your application.</p>
<h2 id="discovery-phase_8">Discovery Phase</h2>
<p>In Chapter 19, we built a basic generic <code>List</code> component. Let's take it a step further and build a generic <code>SelectDropdown</code> component. This component should be able to handle an array of any kind of object, as long as those objects have some properties we can use for the value and label of the options.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// Step 1: Define a generic constraint.</span>
<span class="c1">// Any object passed to our component MUST have `id` and `name` properties.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">SelectableItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Step 2: Create the generic props type.</span>
<span class="c1">// `T` can be any object, as long as it `extends` our constraint.</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">SelectDropdownProps</span><span class="p">&lt;</span><span class="nt">T</span><span class="w"> </span><span class="na">extends</span><span class="w"> </span><span class="na">SelectableItem</span><span class="p">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onSelect</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">selectedItem</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Step 3: Create the generic component.</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SelectDropdown</span><span class="p">&lt;</span><span class="nt">T</span><span class="w"> </span><span class="na">extends</span><span class="w"> </span><span class="na">SelectableItem</span><span class="p">&gt;({</span>
<span class="w">  </span><span class="nx">items</span><span class="p">,</span>
<span class="w">  </span><span class="nx">label</span><span class="p">,</span>
<span class="w">  </span><span class="nx">onSelect</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">SelectDropdownProps</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">selectedValue</span><span class="p">,</span><span class="w"> </span><span class="nx">setSelectedValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">&gt;(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">ChangeEvent</span><span class="p">&lt;</span><span class="nt">HTMLSelectElement</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectedId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">selectedItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">items</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">selectedId</span><span class="p">);</span>
<span class="w">    </span><span class="nx">setSelectedValue</span><span class="p">(</span><span class="nx">selectedId</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">selectedItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">onSelect</span><span class="p">(</span><span class="nx">selectedItem</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">select</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">selectedValue</span><span class="p">}</span><span class="w"> </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleChange</span><span class="p">}&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">disabled</span><span class="p">&gt;</span><span class="nx">Select</span><span class="w"> </span><span class="nx">an</span><span class="w"> </span><span class="nx">option</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="c1">// We can safely access `item.id` and `item.name` because of our constraint.</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">))}</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, let's use this generic component with two different data structures.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// --- USAGE ---</span>

<span class="c1">// Data structure 1: Users</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;admin&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// Data structure 2: Products</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;p1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Laptop&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">1500</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;p2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Keyboard&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="p">},</span>
<span class="p">];</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleUserSelect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// `user` is fully typed here! We can access `user.role`.</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Selected user: </span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">, Role: </span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleProductSelect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// `product` is also fully typed! We can access `product.price`.</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Selected product: </span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">, Price: $</span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;flex&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;column&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;20px&#39;</span><span class="w"> </span><span class="p">}}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">SelectDropdown</span><span class="w"> </span><span class="na">items</span><span class="o">=</span><span class="p">{</span><span class="nx">users</span><span class="p">}</span><span class="w"> </span><span class="na">label</span><span class="o">=</span><span class="s">&quot;Select User&quot;</span><span class="w"> </span><span class="na">onSelect</span><span class="o">=</span><span class="p">{</span><span class="nx">handleUserSelect</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">SelectDropdown</span><span class="w"> </span><span class="na">items</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="na">label</span><span class="o">=</span><span class="s">&quot;Select Product&quot;</span><span class="w"> </span><span class="na">onSelect</span><span class="o">=</span><span class="p">{</span><span class="nx">handleProductSelect</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Interactive Behavior</strong>:
The UI shows two dropdowns. When you select an option from the "Select User" dropdown, an alert shows the user's name and role. When you select from the "Select Product" dropdown, an alert shows the product's name and price.</p>
<p>This demonstrates the power of generics:</p>
<ol>
<li><strong>Constraint</strong>: <code>T extends { id: string | number; name: string; }</code> ensures that any data we pass in is workable.</li>
<li><strong>Flexibility</strong>: We can pass an array of <code>users</code> or <code>products</code>, and the component works perfectly with both.</li>
<li><strong>Type Safety</strong>: In the <code>onSelect</code> callback, TypeScript knows the exact type of the selected item (<code>user</code> or <code>product</code>), including the properties that were not part of the constraint (like <code>role</code> and <code>price</code>).</li>
</ol>
<h2 id="deep-dive_8">Deep Dive</h2>
<h3 id="making-generic-components-even-more-flexible">Making Generic Components Even More Flexible</h3>
<p>Our <code>SelectDropdown</code> requires the properties to be named <code>id</code> and <code>name</code>. What if our data uses <code>value</code> and <code>label</code> instead? We can make the component even more generic by allowing the consumer to provide accessor functions.</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// No constraint on T this time!</span>
<span class="nx">type</span><span class="w"> </span><span class="nx">SuperSelectProps</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[];</span>
<span class="w">  </span><span class="c1">// Functions to get the value and label from an item of type T</span>
<span class="w">  </span><span class="nx">getItemValue</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">item</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">getItemLabel</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">item</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onSelect</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">selectedItem</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SuperSelect</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;({</span>
<span class="w">  </span><span class="nx">items</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getItemValue</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getItemLabel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">onSelect</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">SuperSelectProps</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ... implementation would be similar, but use the accessor functions</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">select</span><span class="w"> </span><span class="na">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">items</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">getItemValue</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">value</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">selected</span><span class="p">)</span><span class="w"> </span><span class="nx">onSelect</span><span class="p">(</span><span class="nx">selected</span><span class="p">);</span>
<span class="w">    </span><span class="p">}}&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getItemValue</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getItemLabel</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}&gt;{</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">})}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// --- USAGE with different data shape ---</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">categories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">categoryId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cat1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">displayName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Electronics&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">categoryId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cat2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">displayName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Books&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// &lt;SuperSelect</span>
<span class="c1">//   items={categories}</span>
<span class="c1">//   getItemValue={(c) =&gt; c.categoryId}</span>
<span class="c1">//   getItemLabel={(c) =&gt; c.displayName}</span>
<span class="c1">//   onSelect={(c) =&gt; alert(c.displayName)}</span>
<span class="c1">// /&gt;</span>
</code></pre></div>

<p>This version is maximally flexible. It makes no assumptions about the shape of the data objects <code>T</code>. Instead, it asks the consumer to provide the logic for extracting the necessary pieces of data. This is a common pattern in advanced component libraries and rendering engines.</p>
<h3 id="production-perspective_8">Production Perspective</h3>
<ul>
<li><strong>Identify the Generic Core</strong>: When building a component, ask yourself: "What is the core, repeatable logic, and what is the data-specific part?" The core logic belongs in the generic component, and the data-specific parts should be handled by props (like <code>renderItem</code>) or accessor functions (<code>getItemValue</code>).</li>
<li><strong>Start Specific, then Generalize</strong>: It's often easier to build a specific version of a component first (e.g., a <code>UserSelectDropdown</code>). Once it's working, you can refactor it to be generic by identifying the hard-coded parts and replacing them with generic type parameters and props.</li>
<li><strong>Generics in Custom Hooks</strong>: Generics are not just for components. They are incredibly powerful for custom hooks. For example, a <code>useQuery&lt;T&gt;</code> hook could be generic over the type of data <code>T</code> it fetches from an API, providing end-to-end type safety from your data fetching layer to your components.</li>
</ul>
<h2 id="module-synthesis">Module Synthesis üìã</h2>
<h2 id="module-synthesis_1">Module Synthesis</h2>
<p>In this chapter, we bridged the gap between TypeScript theory and the practical reality of building React components. We've established a comprehensive toolkit for typing every aspect of a component's API, ensuring they are robust, predictable, and easy for other developers to consume.</p>
<p>We began by defining the modern standard for typing function components, moving away from the legacy <code>React.FC</code> to a simpler, more explicit pattern. We then dove deep into the heart of component typing: defining <strong>props</strong>. We learned to type everything from simple primitives and union types to complex nested objects and callback functions.</p>
<p>We mastered the patterns for building compositional UIs by explicitly typing the <strong><code>children</code> prop</strong> with <code>React.ReactNode</code>. We then celebrated a major React 19 improvement: passing <strong><code>ref</code>s as regular props</strong>, which drastically simplifies creating components that need to expose DOM nodes. We also covered the essential patterns of <strong>optional and default props</strong>, making our components more flexible and easier to use.</p>
<p>Finally, we elevated our thinking to component architecture. We learned why <strong>exporting prop types</strong> is crucial for creating a scalable system of interconnected components. We covered how to type <strong>event handlers</strong> for safe user interactions and how to correctly type <strong><code>useRef</code></strong> for both DOM access and mutable value storage. We culminated with <strong>generic components</strong>, the pinnacle of reusability, allowing us to write a single component that can adapt to any data structure while maintaining perfect type safety.</p>
<h2 id="looking-ahead">Looking Ahead</h2>
<p>You are now fully equipped to write type-safe React components for almost any scenario. The next chapter, <strong>Chapter 21: Typing React 19 Features</strong>, will build directly on this knowledge. We will focus specifically on the new, state-of-the-art APIs introduced in React 19. We'll see how to type the revolutionary <code>use</code> hook, build type-safe forms with Actions using <code>useActionState</code> and <code>useOptimistic</code>, and understand the typing distinctions between Server and Client Components. This is where we apply our skills to the cutting edge of React.</p>
        </div>
        <div class="footer">
            Generated on 2025-10-25 16:27:48 | Made with ‚ù§Ô∏è by GitHub Pages Generator
        </div>
    </div>
    <script>
        // Syntax highlighting for code blocks
        document.addEventListener('DOMContentLoaded', (event) => {
            // Highlight code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Add copy buttons to code blocks
            document.querySelectorAll('pre').forEach((pre) => {
                const button = document.createElement('button');
                button.className = 'copy-btn';
                button.textContent = 'Copy';
                
                button.addEventListener('click', () => {
                    const code = pre.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                        button.textContent = 'Error';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                });
                
                pre.appendChild(button);
            });
        });
    </script>
</body>
</html>