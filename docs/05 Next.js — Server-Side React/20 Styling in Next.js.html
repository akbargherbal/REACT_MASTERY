<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20 Styling in Next.js</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg-main: #0f172a;
            --bg-card: #1e293b;
            --bg-code: #0f172a;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --accent: #06b6d4;
            --success: #10b981;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.7; 
            color: var(--text-primary); 
            background: var(--bg-main);
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        .home-btn { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: var(--accent);
            color: white; 
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-decoration: none; 
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .home-btn:hover { 
            background: #0891b2;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(6, 182, 212, 0.5);
        }
        
        .breadcrumb { 
            background: var(--bg-card);
            padding: 12px 0; 
            margin-bottom: 24px; 
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .breadcrumb a { 
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .breadcrumb a:hover { 
            color: var(--primary);
            text-decoration: underline;
        }
        
        .content { 
            background: var(--bg-card);
            padding: 3rem; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }
        
        .file-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 1.5rem; 
            margin: 2rem 0; 
        }
        
        .file-item { 
            padding: 1.5rem; 
            border: 1px solid var(--border);
            border-radius: 12px; 
            background: var(--bg-main);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .file-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .file-item:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
        }
        
        .file-item:hover::before {
            opacity: 1;
        }
        
        .file-item a { 
            color: var(--text-primary);
            text-decoration: none; 
            font-weight: 600; 
            display: block;
            font-size: 1.1rem;
        }
        
        .file-item a:hover { 
            color: var(--primary);
        }
        
        .file-type { 
            font-size: 13px; 
            color: var(--text-secondary);
            margin-top: 8px; 
            font-weight: 500;
        }
        
        /* Code Blocks */
        pre { 
            background: var(--bg-code);
            padding: 1.5rem; 
            border-radius: 12px; 
            overflow-x: auto;
            border: 1px solid var(--border);
            margin: 1.5rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        pre code { 
            background: none;
            padding: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        /* Copy Button */
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            opacity: 0.7;
            z-index: 10;
        }
        
        .copy-btn:hover {
            opacity: 1;
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .copy-btn.copied {
            background: var(--success);
        }
        
        pre:hover .copy-btn {
            opacity: 1;
        }
        
        /* Inline Code */
        code { 
            background: var(--bg-code);
            color: #8b5cf6;
            padding: 3px 8px; 
            border-radius: 6px; 
            font-size: 1.1em;
            font-family: 'Fira Code', 'Consolas', monospace;
            border: 1px solid var(--border);
        }
        
        /* Headings */
        h1, h2, h3, h4, h5, h6 { 
            color: var(--text-primary);
            margin: 2rem 0 1rem 0;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        h1 { 
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 12px;
            margin-bottom: 1.5rem;
        }
        
        h2 { 
            font-size: 2rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 8px;
        }
        
        h3 { 
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        /* Links */
        a { 
            color: var(--accent);
            transition: color 0.2s;
        }
        
        a:hover { 
            color: var(--primary);
        }
        
        /* Paragraphs */
        p {
            margin: 1rem 0;
            color: var(--text-secondary);
        }
        
        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
            color: var(--text-secondary);
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        /* Tables */
        table { 
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        th, td { 
            border: 1px solid var(--border);
            padding: 12px 16px;
            text-align: left;
        }
        
        th { 
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: var(--bg-card);
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* Horizontal Rule */
        hr {
            border: none;
            border-top: 2px solid var(--border);
            margin: 2rem 0;
        }
        
        .footer { 
            text-align: center; 
            padding: 2rem; 
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 3rem; 
            font-size: 14px;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-main);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 6px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .file-list { grid-template-columns: 1fr; }
            .content { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-btn">üè†</a>
    <div class="container">
        <div class="breadcrumb">
            <div style="padding: 0 20px;">
                <a href="../index.html">üè† Home</a> <span style="color: #64748b;">/</span> <a href="index.html">05 Next.js ‚Äî Server-Side React</a>
            </div>
        </div>
        <div class="content">
            <h1 id="chapter-20-styling-in-nextjs">Chapter 20: Styling in Next.js</h1>
<h2 id="tailwind-css-the-pragmatic-choice">Tailwind CSS: the pragmatic choice</h2>
<h2 id="the-problem-styling-at-scale">The Problem: Styling at Scale</h2>
<p>You've built a Next.js application with Server Components, data fetching, and authentication. Your components work perfectly. But they look like they were designed in 1995.</p>
<p>You need to style your application. Not just make it "not ugly"‚Äîyou need a styling solution that:</p>
<ul>
<li>Works seamlessly with Server Components</li>
<li>Doesn't cause flash of unstyled content (FOUC)</li>
<li>Scales from prototype to production</li>
<li>Doesn't require writing CSS class names for every single element</li>
<li>Integrates with component libraries</li>
<li>Supports theming and dark mode</li>
</ul>
<p>Let's establish our reference implementation: a product catalog that we'll style progressively through this chapter.</p>
<h3 id="reference-implementation-e-commerce-product-catalog">Reference Implementation: E-commerce Product Catalog</h3>
<p>We'll build a product listing page with:
- Product cards with images, titles, prices
- Category filters
- Search functionality
- Responsive grid layout
- Dark mode support</p>
<p><strong>Project Structure</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">src</span><span class="o">/</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">app</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">products</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="n">tsx</span><span class="w">          </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="n">listing</span><span class="w"> </span><span class="p">(</span><span class="n">our</span><span class="w"> </span><span class="n">focus</span><span class="p">)</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="o">[</span><span class="n">id</span><span class="o">]/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">       </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">page</span><span class="p">.</span><span class="n">tsx</span><span class="w">      </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="n">detail</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">layout</span><span class="p">.</span><span class="n">tsx</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">globals</span><span class="p">.</span><span class="n">css</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">components</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductCard</span><span class="p">.</span><span class="n">tsx</span><span class="w">       </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Individual</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="n">display</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductGrid</span><span class="p">.</span><span class="n">tsx</span><span class="w">       </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Grid</span><span class="w"> </span><span class="n">container</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">SearchBar</span><span class="p">.</span><span class="n">tsx</span><span class="w">         </span><span class="err">‚Üê</span><span class="w"> </span><span class="k">Search</span><span class="w"> </span><span class="k">input</span>
<span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span>
<span class="w">    </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">ts</span><span class="w">           </span><span class="err">‚Üê</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">fetching</span>
</code></pre></div>

<p>Let's start with unstyled components to see the problem clearly.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/lib/products.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Product</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Simulating API call</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Wireless Headphones&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">99.99</span><span class="p">,</span>
<span class="w">      </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Electronics&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/products/headphones.jpg&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;High-quality wireless headphones with noise cancellation&#39;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Smart Watch&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">299.99</span><span class="p">,</span>
<span class="w">      </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Electronics&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/products/watch.jpg&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Feature-rich smartwatch with health tracking&#39;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Laptop Stand&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">49.99</span><span class="p">,</span>
<span class="w">      </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Accessories&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;/products/stand.jpg&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Ergonomic aluminum laptop stand&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Link</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/link&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Link</span><span class="w"> </span><span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`/products/</span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">          </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">          </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">          </span><span class="na">width</span><span class="o">=</span><span class="p">{</span><span class="mf">300</span><span class="p">}</span>
<span class="w">          </span><span class="na">height</span><span class="o">=</span><span class="p">{</span><span class="mf">300</span><span class="p">}</span>
<span class="w">        </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductGrid.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductCard</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductCard&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductGridProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">products</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="p">({</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductGridProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ProductCard</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">))}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="the-failure-unstyled-components">The Failure: Unstyled Components</h3>
<p>Run the application and navigate to <code>/products</code>.</p>
<p><strong>Browser Behavior</strong>:
- Products display in a vertical list (no grid)
- Images are full-width, breaking layout
- No spacing between elements
- Text is default browser styling (Times New Roman)
- Links are blue and underlined
- No hover states or visual feedback
- Mobile view is identical to desktop (no responsiveness)</p>
<p><strong>Visual Evidence</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Wireless Headphones]</span>
<span class="k">[Full-width image]</span>
<span class="na">Wireless Headphones</span>
<span class="na">Electronics</span>
<span class="na">$99.99</span>

<span class="k">[Smart Watch]</span>
<span class="k">[Full-width image]</span>
<span class="na">Smart Watch</span>
<span class="na">Electronics</span>
<span class="na">$299.99</span>
</code></pre></div>

<p>Everything is stacked vertically with minimal spacing. It looks like a document from 1995.</p>
<h3 id="diagnostic-analysis-why-unstyled-components-fail">Diagnostic Analysis: Why Unstyled Components Fail</h3>
<p><strong>What the user experiences</strong>:
- Expected: Modern, grid-based product catalog with visual hierarchy
- Actual: Vertical list of unstyled elements with no visual design</p>
<p><strong>What we need</strong>:
1. Grid layout for product cards
2. Consistent spacing and typography
3. Visual hierarchy (headings, prices, categories)
4. Responsive design (mobile, tablet, desktop)
5. Interactive states (hover, focus)
6. Professional color scheme</p>
<p><strong>Why inline styles won't solve this</strong>:
- Inline styles don't support media queries (no responsive design)
- No hover/focus states
- Repetitive code for every element
- No design system or consistency
- Hard to maintain and update</p>
<p><strong>Why traditional CSS files are problematic</strong>:
- Naming conventions become complex at scale (BEM, SMACSS)
- Unused CSS accumulates over time
- Global namespace conflicts
- Hard to know which styles are safe to delete
- Difficult to co-locate styles with components</p>
<p><strong>What we need</strong>: A styling solution that provides utility classes for rapid development while maintaining type safety and avoiding the pitfalls of traditional CSS.</p>
<h2 id="tailwind-css-utility-first-styling">Tailwind CSS: Utility-First Styling</h2>
<p>Tailwind CSS is a utility-first CSS framework. Instead of writing custom CSS classes, you compose designs using pre-defined utility classes directly in your JSX.</p>
<p><strong>Philosophy</strong>:
- Utility classes for every CSS property (<code>text-center</code>, <code>flex</code>, <code>bg-blue-500</code>)
- Compose complex designs from simple utilities
- No naming conventions needed
- Responsive modifiers built-in (<code>md:flex</code>, <code>lg:grid-cols-3</code>)
- Purges unused CSS automatically in production</p>
<h3 id="setting-up-tailwind-css-in-nextjs">Setting Up Tailwind CSS in Next.js</h3>
<p>Next.js has first-class Tailwind support. Let's install it.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install Tailwind CSS and its dependencies</span>
npm<span class="w"> </span>install<span class="w"> </span>-D<span class="w"> </span>tailwindcss<span class="w"> </span>postcss<span class="w"> </span>autoprefixer

<span class="c1"># Initialize Tailwind configuration</span>
npx<span class="w"> </span>tailwindcss<span class="w"> </span>init<span class="w"> </span>-p
</code></pre></div>

<p>This creates two files:
- <code>tailwind.config.js</code> - Tailwind configuration
- <code>postcss.config.js</code> - PostCSS configuration (Tailwind runs through PostCSS)</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// tailwind.config.js</span>
<span class="cm">/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;./src/pages/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/components/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/app/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">extend</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Critical configuration</strong>: The <code>content</code> array tells Tailwind which files to scan for class names. This enables automatic purging of unused CSS in production.</p>
<p>Now add Tailwind's directives to your global CSS file:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/* src/app/globals.css */</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">base</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">utilities</span><span class="p">;</span>
</code></pre></div>

<p>Import this CSS file in your root layout:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/layout.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;./globals.css&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">RootLayout</span><span class="p">({</span>
<span class="w">  </span><span class="nx">children</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">html</span><span class="w"> </span><span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;{</span><span class="nx">children</span><span class="p">}&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="iteration-1-styling-with-tailwind-utilities">Iteration 1: Styling with Tailwind Utilities</h3>
<p>Let's transform our unstyled components using Tailwind's utility classes.</p>
<p><strong>Before</strong> (Unstyled):</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">Image</span><span class="w"> </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span><span class="w"> </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="w"> </span><span class="na">width</span><span class="o">=</span><span class="p">{</span><span class="mf">300</span><span class="p">}</span><span class="w"> </span><span class="na">height</span><span class="o">=</span><span class="p">{</span><span class="mf">300</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>After</strong> (Tailwind styled):</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Link</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/link&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Link</span><span class="w"> </span>
<span class="w">      </span><span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`/products/</span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group block&quot;</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="cm">/* Image container with aspect ratio */</span><span class="p">}</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden bg-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">            </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">            </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="na">fill</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">          </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Content */</span><span class="p">}</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500&quot;</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-gray-900 group-hover:text-blue-600&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>What changed</strong>:
- <code>group</code> class on Link enables hover effects on children
- <code>overflow-hidden rounded-lg</code> creates rounded corners with hidden overflow
- <code>border border-gray-200</code> adds subtle border
- <code>shadow-sm hover:shadow-md</code> adds shadow that increases on hover
- <code>aspect-square</code> maintains 1:1 aspect ratio for images
- <code>fill</code> on Image makes it fill the container
- <code>object-cover</code> ensures image covers area without distortion
- <code>group-hover:scale-105</code> scales image on card hover
- <code>p-4</code> adds padding (1rem = 16px)
- <code>text-sm</code>, <code>text-lg</code>, <code>text-xl</code> control font sizes
- <code>font-semibold</code>, <code>font-bold</code> control font weights
- <code>text-gray-500</code>, <code>text-gray-900</code> control text colors
- <code>mt-1</code>, <code>mt-2</code> add top margin</p>
<p>Now update the grid container:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductGrid.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductCard</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductCard&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductGridProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">products</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="p">({</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductGridProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ProductCard</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">))}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Responsive grid breakdown</strong>:
- <code>grid</code> enables CSS Grid
- <code>grid-cols-1</code> - 1 column on mobile (default)
- <code>sm:grid-cols-2</code> - 2 columns on small screens (640px+)
- <code>lg:grid-cols-3</code> - 3 columns on large screens (1024px+)
- <code>xl:grid-cols-4</code> - 4 columns on extra-large screens (1280px+)
- <code>gap-6</code> - 1.5rem (24px) gap between grid items</p>
<p>Update the page layout:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">h1</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8 text-3xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Layout utilities</strong>:
- <code>mx-auto</code> centers the container horizontally
- <code>max-w-7xl</code> sets maximum width (80rem = 1280px)
- <code>px-4 sm:px-6 lg:px-8</code> responsive horizontal padding
- <code>py-8</code> vertical padding (2rem = 32px)
- <code>mb-8</code> bottom margin on heading</p>
<h3 id="verification-styled-product-catalog">Verification: Styled Product Catalog</h3>
<p>Restart your development server and navigate to <code>/products</code>.</p>
<p><strong>Browser Behavior</strong>:
- Products display in responsive grid (1/2/3/4 columns based on screen width)
- Cards have rounded corners, borders, and shadows
- Images maintain aspect ratio and scale on hover
- Typography has clear hierarchy (category, name, price)
- Hover states provide visual feedback
- Layout adapts smoothly to different screen sizes</p>
<p><strong>Expected vs. Actual</strong>:
- ‚úÖ Grid layout works across all screen sizes
- ‚úÖ Visual hierarchy is clear
- ‚úÖ Interactive states provide feedback
- ‚úÖ Professional appearance
- ‚úÖ No flash of unstyled content (CSS is bundled with Next.js)</p>
<h3 id="understanding-tailwinds-utility-classes">Understanding Tailwind's Utility Classes</h3>
<p>Let's decode the most common patterns:</p>
<p><strong>Spacing</strong> (margin and padding):
- <code>m-4</code> = margin: 1rem (16px)
- <code>mt-4</code> = margin-top: 1rem
- <code>p-4</code> = padding: 1rem
- <code>px-4</code> = padding-left and padding-right: 1rem
- <code>py-4</code> = padding-top and padding-bottom: 1rem</p>
<p><strong>Sizing</strong>:
- <code>w-full</code> = width: 100%
- <code>h-64</code> = height: 16rem (256px)
- <code>max-w-7xl</code> = max-width: 80rem (1280px)</p>
<p><strong>Typography</strong>:
- <code>text-sm</code> = font-size: 0.875rem (14px)
- <code>text-lg</code> = font-size: 1.125rem (18px)
- <code>font-bold</code> = font-weight: 700
- <code>text-gray-900</code> = color: #111827</p>
<p><strong>Layout</strong>:
- <code>flex</code> = display: flex
- <code>grid</code> = display: grid
- <code>grid-cols-3</code> = grid-template-columns: repeat(3, minmax(0, 1fr))
- <code>gap-4</code> = gap: 1rem</p>
<p><strong>Responsive modifiers</strong>:
- <code>sm:</code> = @media (min-width: 640px)
- <code>md:</code> = @media (min-width: 768px)
- <code>lg:</code> = @media (min-width: 1024px)
- <code>xl:</code> = @media (min-width: 1280px)</p>
<p><strong>State modifiers</strong>:
- <code>hover:</code> = :hover pseudo-class
- <code>focus:</code> = :focus pseudo-class
- <code>group-hover:</code> = hover on parent with <code>group</code> class</p>
<h3 id="adding-search-and-filters">Adding Search and Filters</h3>
<p>Let's add a search bar to demonstrate form styling with Tailwind.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/SearchBar.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">SearchBarProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">onSearch</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">query</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SearchBar</span><span class="p">({</span><span class="w"> </span><span class="nx">onSearch</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">SearchBarProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="nx">setQuery</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleSubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">React.FormEvent</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">    </span><span class="nx">onSearch</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">form</span><span class="w"> </span><span class="na">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">          </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
<span class="w">          </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">query</span><span class="p">}</span>
<span class="w">          </span><span class="na">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setQuery</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">          </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search products...&quot;</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex-1 rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">        </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">          </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;rounded-lg bg-blue-600 px-6 py-2 font-semibold text-white transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&quot;</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="nx">Search</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Form styling patterns</strong>:
- <code>flex gap-2</code> creates horizontal layout with spacing
- <code>flex-1</code> makes input grow to fill available space
- <code>rounded-lg</code> rounds corners
- <code>border border-gray-300</code> adds border
- <code>px-4 py-2</code> adds padding inside input
- <code>focus:border-blue-500</code> changes border color on focus
- <code>focus:outline-none</code> removes default browser outline
- <code>focus:ring-2 focus:ring-blue-500</code> adds custom focus ring
- <code>bg-blue-600</code> sets background color
- <code>hover:bg-blue-700</code> darkens on hover
- <code>focus:ring-offset-2</code> adds space between element and focus ring</p>
<h3 id="iteration-2-category-filters">Iteration 2: Category Filters</h3>
<p>Add category filter buttons:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/CategoryFilter.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">CategoryFilterProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">categories</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">selectedCategory</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onSelectCategory</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">CategoryFilter</span><span class="p">({</span>
<span class="w">  </span><span class="nx">categories</span><span class="p">,</span>
<span class="w">  </span><span class="nx">selectedCategory</span><span class="p">,</span>
<span class="w">  </span><span class="nx">onSelectCategory</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">CategoryFilterProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-6 flex flex-wrap gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">        </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">onSelectCategory</span><span class="p">(</span><span class="kc">null</span><span class="p">)}</span>
<span class="w">        </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`rounded-full px-4 py-2 text-sm font-medium transition-colors </span><span class="si">${</span>
<span class="w">          </span><span class="nx">selectedCategory</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">null</span>
<span class="w">            </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;bg-blue-600 text-white&#39;</span>
<span class="w">            </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bg-gray-100 text-gray-700 hover:bg-gray-200&#39;</span>
<span class="w">        </span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">      </span><span class="p">&gt;</span>
<span class="w">        </span><span class="nx">All</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">categories</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">category</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">          </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span>
<span class="w">          </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">onSelectCategory</span><span class="p">(</span><span class="nx">category</span><span class="p">)}</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`rounded-full px-4 py-2 text-sm font-medium transition-colors </span><span class="si">${</span>
<span class="w">            </span><span class="nx">selectedCategory</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">category</span>
<span class="w">              </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;bg-blue-600 text-white&#39;</span>
<span class="w">              </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bg-gray-100 text-gray-700 hover:bg-gray-200&#39;</span>
<span class="w">          </span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">category</span><span class="p">}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">))}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Conditional styling pattern</strong>:
- Template literal with ternary operator for dynamic classes
- <code>rounded-full</code> creates pill-shaped buttons
- Different styles for selected vs. unselected state
- <code>flex-wrap</code> allows buttons to wrap on small screens</p>
<h3 id="when-to-apply-tailwind-css">When to Apply Tailwind CSS</h3>
<p><strong>What it optimizes for</strong>:
- Rapid development and prototyping
- Consistency through design system
- Automatic purging of unused CSS
- No naming conventions needed
- Co-location of styles with components</p>
<p><strong>What it sacrifices</strong>:
- Initial learning curve (memorizing utility classes)
- Verbose className strings
- Harder to read for developers unfamiliar with Tailwind</p>
<p><strong>When to choose Tailwind</strong>:
- Building new applications from scratch
- Need rapid iteration and prototyping
- Want consistent design system
- Team is comfortable with utility-first approach
- Using component libraries that support Tailwind (shadcn/ui, Headless UI)</p>
<p><strong>When to avoid Tailwind</strong>:
- Existing codebase with established CSS architecture
- Team strongly prefers traditional CSS
- Need very custom, artistic designs (though Tailwind is flexible)
- Working with designers who provide pixel-perfect mockups in traditional CSS</p>
<h3 id="code-characteristics">Code Characteristics</h3>
<p><strong>Setup complexity</strong>: Low
- Single npm install
- Minimal configuration
- Works out of the box with Next.js</p>
<p><strong>Maintenance burden</strong>: Low
- No CSS files to maintain
- Styles co-located with components
- Automatic purging prevents bloat</p>
<p><strong>Performance impact</strong>: Excellent
- Tiny production bundle (only used utilities)
- No runtime JavaScript
- Optimized by PostCSS</p>
<h3 id="common-failure-modes-and-their-signatures">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-styles-not-applying">Symptom: Styles not applying</h4>
<p><strong>Browser behavior</strong>:
Classes are in the HTML but have no effect</p>
<p><strong>Console pattern</strong>:
No errors (Tailwind silently ignores unknown classes)</p>
<p><strong>DevTools clues</strong>:
- Element has class names in HTML
- No corresponding CSS rules in Styles panel
- Check for typos: <code>text-centre</code> vs. <code>text-center</code></p>
<p><strong>Root cause</strong>: Typo in class name or class not in Tailwind's default configuration</p>
<p><strong>Solution</strong>: Check Tailwind documentation for correct class name, or extend theme in <code>tailwind.config.js</code></p>
<h4 id="symptom-styles-work-in-development-but-not-production">Symptom: Styles work in development but not production</h4>
<p><strong>Browser behavior</strong>:
Styles disappear after <code>npm run build</code></p>
<p><strong>Console pattern</strong>:
No errors</p>
<p><strong>Root cause</strong>: File not included in Tailwind's <code>content</code> configuration</p>
<p><strong>Solution</strong>: Add file path pattern to <code>content</code> array in <code>tailwind.config.js</code></p>
<h4 id="symptom-custom-colors-not-working">Symptom: Custom colors not working</h4>
<p><strong>Browser behavior</strong>:
<code>bg-brand-500</code> doesn't apply</p>
<p><strong>Root cause</strong>: Custom colors must be defined in theme configuration</p>
<p><strong>Solution</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// tailwind.config.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">extend</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">brand</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="mf">500</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#3B82F6&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="mf">600</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#2563EB&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="debugging-workflow-tailwind-issues">Debugging Workflow: Tailwind Issues</h3>
<p><strong>Step 1: Verify Tailwind is loaded</strong>
- Open DevTools ‚Üí Elements
- Inspect any element
- Check Styles panel for Tailwind utility classes
- If no Tailwind classes exist, check <code>globals.css</code> import</p>
<p><strong>Step 2: Check class name spelling</strong>
- Tailwind silently ignores typos
- Common mistakes: <code>center</code> vs. <code>centre</code>, <code>gray</code> vs. <code>grey</code>
- Use VS Code Tailwind IntelliSense extension for autocomplete</p>
<p><strong>Step 3: Verify content configuration</strong>
- Check <code>tailwind.config.js</code> content array
- Ensure your file paths are included
- Restart dev server after config changes</p>
<p><strong>Step 4: Check for class conflicts</strong>
- Later classes override earlier ones
- <code>className="text-red-500 text-blue-500"</code> ‚Üí blue wins
- Use conditional logic carefully</p>
<p><strong>Step 5: Inspect computed styles</strong>
- DevTools ‚Üí Elements ‚Üí Computed tab
- See final CSS values
- Identify which rule is actually applied</p>
<h2 id="css-modules-as-a-fallback">CSS Modules as a fallback</h2>
<h2 id="when-tailwind-isnt-enough">When Tailwind Isn't Enough</h2>
<p>Tailwind is excellent for most styling needs, but sometimes you need:
- Complex animations with keyframes
- Pseudo-elements (::before, ::after) with content
- Very specific CSS that doesn't map to utilities
- Scoped styles without verbose className strings</p>
<p>CSS Modules provide scoped CSS with traditional syntax. They're built into Next.js with zero configuration.</p>
<h3 id="the-failure-complex-animations-in-tailwind">The Failure: Complex Animations in Tailwind</h3>
<p>Let's add a loading skeleton to our product cards. We want a shimmer animation that sweeps across the card.</p>
<p><strong>Attempt with Tailwind</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCardSkeleton.tsx - Tailwind attempt</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCardSkeleton</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;aspect-square animate-pulse bg-gray-200&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-4 w-20 animate-pulse rounded bg-gray-200&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 h-6 w-32 animate-pulse rounded bg-gray-200&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 h-6 w-24 animate-pulse rounded bg-gray-200&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Browser Behavior</strong>:
- Elements pulse (fade in/out)
- No shimmer effect
- Looks generic, not polished</p>
<p><strong>Limitation</strong>: Tailwind's <code>animate-pulse</code> is a simple opacity animation. Creating a custom shimmer effect requires:
- Custom keyframes
- Gradient backgrounds
- Pseudo-elements for the shimmer overlay</p>
<p><strong>What we need</strong>: CSS Modules for complex, custom animations.</p>
<h3 id="css-modules-scoped-traditional-css">CSS Modules: Scoped Traditional CSS</h3>
<p>CSS Modules automatically scope CSS class names to prevent conflicts. Each component gets its own CSS file.</p>
<p><strong>File naming convention</strong>: <code>ComponentName.module.css</code></p>
<p>Let's create a proper shimmer skeleton:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/* src/components/ProductCardSkeleton.module.css */</span>
<span class="p">.</span><span class="nc">skeleton</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">overflow</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#e5e7eb</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">  </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">imageContainer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">  </span><span class="k">aspect-ratio</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">90</span><span class="kt">deg</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">25</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#e5e7eb</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">75</span><span class="kt">%</span><span class="p">);</span>
<span class="w">  </span><span class="k">background-size</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation</span><span class="p">:</span><span class="w"> </span><span class="n">shimmer</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">categoryBar</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">90</span><span class="kt">deg</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">25</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#e5e7eb</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">75</span><span class="kt">%</span><span class="p">);</span>
<span class="w">  </span><span class="k">background-size</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation</span><span class="p">:</span><span class="w"> </span><span class="n">shimmer</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">infinite</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">titleBar</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">90</span><span class="kt">deg</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">25</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#e5e7eb</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">75</span><span class="kt">%</span><span class="p">);</span>
<span class="w">  </span><span class="k">background-size</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation</span><span class="p">:</span><span class="w"> </span><span class="n">shimmer</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">infinite</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation-delay</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="kt">s</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">priceBar</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">90</span><span class="kt">deg</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">25</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#e5e7eb</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="mh">#f3f4f6</span><span class="w"> </span><span class="mi">75</span><span class="kt">%</span><span class="p">);</span>
<span class="w">  </span><span class="k">background-size</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation</span><span class="p">:</span><span class="w"> </span><span class="n">shimmer</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">infinite</span><span class="p">;</span>
<span class="w">  </span><span class="k">animation-delay</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="kt">s</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span><span class="w"> </span><span class="nt">shimmer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">0</span><span class="o">%</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-position</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">%</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nt">100</span><span class="o">%</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-position</span><span class="p">:</span><span class="w"> </span><span class="mi">-200</span><span class="kt">%</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCardSkeleton.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="nx">styles</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductCardSkeleton.module.css&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCardSkeleton</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageContainer</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">content</span><span class="p">}&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">categoryBar</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">titleBar</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">priceBar</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>How CSS Modules work</strong>:
1. Import CSS file as JavaScript object: <code>import styles from './Component.module.css'</code>
2. Access classes as properties: <code>styles.skeleton</code>, <code>styles.imageContainer</code>
3. Next.js automatically generates unique class names: <code>ProductCardSkeleton_skeleton__a1b2c3</code>
4. Styles are scoped to this component only</p>
<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Shimmer animation sweeps across skeleton elements
- Staggered animation (category ‚Üí title ‚Üí price)
- Smooth, professional loading state</p>
<p><strong>DevTools Evidence</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ProductCardSkeleton_skeleton__a1b2c3&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ProductCardSkeleton_imageContainer__d4e5f6&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p>Class names are automatically scoped with hash suffix.</p>
<h3 id="iteration-3-combining-tailwind-and-css-modules">Iteration 3: Combining Tailwind and CSS Modules</h3>
<p>You can use both approaches in the same component. Use Tailwind for standard utilities and CSS Modules for complex custom styles.</p>
<p><strong>Pattern</strong>: Combine class names with template literals:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx - Hybrid approach</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Link</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/link&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">styles</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductCard.module.css&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Link</span><span class="w"> </span>
<span class="w">      </span><span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`/products/</span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group block&quot;</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`relative aspect-square overflow-hidden bg-gray-100 </span><span class="si">${</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageContainer</span><span class="si">}</span><span class="sb">`</span><span class="p">}&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">            </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">            </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="na">fill</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">          </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">isNew</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">badge</span><span class="p">}&gt;</span><span class="nx">New</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">)}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500&quot;</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-gray-900 group-hover:text-blue-600&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c">/* src/components/ProductCard.module.css */</span>
<span class="p">.</span><span class="nc">imageContainer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">badge</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">right</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="w"> </span><span class="mf">0.75</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#3b82f6</span><span class="p">;</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">9999</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">text-transform</span><span class="p">:</span><span class="w"> </span><span class="kc">uppercase</span><span class="p">;</span>
<span class="w">  </span><span class="k">letter-spacing</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">badge</span><span class="p">::</span><span class="nd">before</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;‚ú®&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Why this works</strong>:
- Tailwind handles standard utilities (spacing, colors, typography)
- CSS Modules handle complex custom styles (badge with pseudo-element)
- Both class names coexist: <code>className="tailwind-classes ${styles.cssModule}"</code></p>
<h3 id="when-to-use-css-modules">When to Use CSS Modules</h3>
<p><strong>What it optimizes for</strong>:
- Complex animations with keyframes
- Pseudo-elements with content
- Scoped styles without verbose class names
- Traditional CSS workflow
- Gradual migration from existing CSS</p>
<p><strong>What it sacrifices</strong>:
- Separate CSS files to maintain
- Manual scoping (though automatic)
- No design system utilities (unless you build them)</p>
<p><strong>When to choose CSS Modules</strong>:
- Need complex animations or pseudo-elements
- Team prefers traditional CSS syntax
- Migrating from existing CSS codebase
- Specific styles that don't map to Tailwind utilities
- Want scoped styles without Tailwind's verbosity</p>
<p><strong>When to avoid CSS Modules</strong>:
- Standard UI components (Tailwind is faster)
- Need design system consistency
- Want minimal CSS maintenance
- Prefer utility-first approach</p>
<h3 id="code-characteristics_1">Code Characteristics</h3>
<p><strong>Setup complexity</strong>: Zero
- Built into Next.js
- No configuration needed
- Just create <code>.module.css</code> files</p>
<p><strong>Maintenance burden</strong>: Medium
- Separate CSS files to maintain
- Need to manage class name imports
- Can accumulate unused styles</p>
<p><strong>Performance impact</strong>: Good
- Scoped CSS prevents conflicts
- Automatic code splitting per component
- No runtime JavaScript</p>
<h3 id="common-failure-modes-and-their-signatures_1">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-styles-not-applying_1">Symptom: Styles not applying</h4>
<p><strong>Browser behavior</strong>:
Component renders but has no styles</p>
<p><strong>Console pattern</strong>:
No errors</p>
<p><strong>DevTools clues</strong>:
- Element has no class attribute
- Or class name is undefined: <code>class="undefined"</code></p>
<p><strong>Root cause</strong>: Forgot to import CSS Module or typo in class name</p>
<p><strong>Solution</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Wrong - forgot import</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Component</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="c1">// ‚úÖ Correct - import CSS Module</span>
<span class="k">import</span><span class="w"> </span><span class="nx">styles</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./Component.module.css&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Component</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="symptom-class-name-collision">Symptom: Class name collision</h4>
<p><strong>Browser behavior</strong>:
Styles from different components interfere with each other</p>
<p><strong>Root cause</strong>: Using regular <code>.css</code> file instead of <code>.module.css</code></p>
<p><strong>Solution</strong>: Rename file to <code>.module.css</code> and import as object</p>
<h4 id="symptom-global-styles-not-working">Symptom: Global styles not working</h4>
<p><strong>Browser behavior</strong>:
Global styles (like body, html) don't apply from CSS Module</p>
<p><strong>Root cause</strong>: CSS Modules scope all classes, including global selectors</p>
<p><strong>Solution</strong>: Use <code>:global()</code> wrapper or put global styles in <code>globals.css</code></p>
<div class="codehilite"><pre><span></span><code><span class="c">/* Component.module.css */</span>
<span class="c">/* ‚ùå Wrong - this gets scoped */</span>
<span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ‚úÖ Correct - use :global() */</span>
<span class="p">:</span><span class="nd">global</span><span class="o">(</span><span class="nt">body</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Or better - put in globals.css */</span>
</code></pre></div>

<h3 id="debugging-workflow-css-modules-issues">Debugging Workflow: CSS Modules Issues</h3>
<p><strong>Step 1: Verify import</strong>
- Check that CSS Module is imported
- Verify file name ends with <code>.module.css</code>
- Check import path is correct</p>
<p><strong>Step 2: Inspect generated class names</strong>
- Open DevTools ‚Üí Elements
- Check class attribute on element
- Should see scoped name: <code>Component_className__hash</code></p>
<p><strong>Step 3: Check Styles panel</strong>
- DevTools ‚Üí Elements ‚Üí Styles
- Verify CSS rules are present
- Check if rules are being overridden</p>
<p><strong>Step 4: Verify class name exists in CSS</strong>
- Check for typos: <code>styles.container</code> vs. <code>styles.contianer</code>
- Use TypeScript for autocomplete (CSS Modules are typed)</p>
<p><strong>Step 5: Check specificity conflicts</strong>
- CSS Modules have same specificity as regular classes
- Global styles or Tailwind might override
- Use DevTools to see which rule wins</p>
<h2 id="shadcnui-pre-built-components-done-right">shadcn/ui: pre-built components done right</h2>
<h2 id="the-problem-building-ui-components-from-scratch">The Problem: Building UI Components from Scratch</h2>
<p>You've styled your product catalog with Tailwind. Now you need:
- A modal dialog for product details
- A dropdown menu for user actions
- A toast notification system
- Form inputs with validation states
- Accessible, keyboard-navigable components</p>
<p>You could build these from scratch, but:
- Accessibility is hard (ARIA attributes, keyboard navigation, focus management)
- Edge cases are numerous (click outside, escape key, focus trapping)
- Animations and transitions require careful coordination
- Testing across browsers and devices is time-consuming</p>
<p><strong>The traditional solution</strong>: Component libraries like Material-UI, Ant Design, Chakra UI.</p>
<p><strong>The problem with traditional libraries</strong>:
- Heavy bundle size (entire library even if you use 3 components)
- Opinionated styling that's hard to customize
- Runtime JavaScript for theming
- Vendor lock-in (hard to migrate away)
- Often conflict with Tailwind</p>
<h3 id="shadcnui-a-different-approach">shadcn/ui: A Different Approach</h3>
<p>shadcn/ui is not a component library you install. It's a collection of <strong>copy-paste components</strong> that you own.</p>
<p><strong>Philosophy</strong>:
- Copy component code into your project
- Components are yours to modify
- Built with Radix UI (accessible primitives)
- Styled with Tailwind CSS
- No runtime dependencies (except Radix)
- No vendor lock-in</p>
<p><strong>How it works</strong>:
1. Run CLI command to add component
2. Component code is copied to your <code>components/ui</code> directory
3. You own the code and can modify it
4. Import and use like any other component</p>
<h3 id="setting-up-shadcnui">Setting Up shadcn/ui</h3>
<p>First, initialize shadcn/ui in your Next.js project:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Initialize shadcn/ui</span>
npx<span class="w"> </span>shadcn-ui@latest<span class="w"> </span>init
</code></pre></div>

<p>This will prompt you with configuration questions:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Would</span> <span class="n">you</span> <span class="n">like</span> <span class="n">to</span> <span class="n">use</span> <span class="n">TypeScript</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">Yes</span>
<span class="n">Which</span> <span class="n">style</span> <span class="n">would</span> <span class="n">you</span> <span class="n">like</span> <span class="n">to</span> <span class="n">use</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">Default</span>
<span class="n">Which</span> <span class="n">color</span> <span class="n">would</span> <span class="n">you</span> <span class="n">like</span> <span class="n">to</span> <span class="n">use</span> <span class="k">as</span> <span class="n">base</span> <span class="n">color</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">Slate</span>
<span class="n">Where</span> <span class="ow">is</span> <span class="n">your</span> <span class="k">global</span> <span class="n">CSS</span> <span class="n">file</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">src</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="nb">globals</span><span class="o">.</span><span class="n">css</span>
<span class="n">Would</span> <span class="n">you</span> <span class="n">like</span> <span class="n">to</span> <span class="n">use</span> <span class="n">CSS</span> <span class="n">variables</span> <span class="k">for</span> <span class="n">colors</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">Yes</span>
<span class="n">Where</span> <span class="ow">is</span> <span class="n">your</span> <span class="n">tailwind</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">js</span> <span class="n">located</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="n">tailwind</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">js</span>
<span class="n">Configure</span> <span class="n">the</span> <span class="kn">import</span><span class="w"> </span><span class="nn">alias</span> <span class="k">for</span> <span class="n">components</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="o">@/</span><span class="n">components</span>
<span class="n">Configure</span> <span class="n">the</span> <span class="kn">import</span><span class="w"> </span><span class="nn">alias</span> <span class="k">for</span> <span class="n">utils</span><span class="err">?</span> <span class="err">‚Ä∫</span> <span class="o">@/</span><span class="n">lib</span><span class="o">/</span><span class="n">utils</span>
</code></pre></div>

<p>This creates:
- <code>components/ui/</code> directory for shadcn components
- <code>lib/utils.ts</code> with utility functions
- Updates <code>tailwind.config.js</code> with shadcn theme
- Updates <code>globals.css</code> with CSS variables</p>
<h3 id="iteration-4-adding-a-dialog-component">Iteration 4: Adding a Dialog Component</h3>
<p>Let's add a modal dialog to show product details. First, install the dialog component:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Add dialog component</span>
npx<span class="w"> </span>shadcn-ui@latest<span class="w"> </span>add<span class="w"> </span>dialog
</code></pre></div>

<p>This copies the dialog component code to <code>components/ui/dialog.tsx</code>. Let's examine what was added:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ui/dialog.tsx (generated by shadcn)</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;react&quot;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@radix-ui/react-dialog&quot;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">X</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;lucide-react&quot;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">cn</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@/lib/utils&quot;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">Dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Root</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">DialogTrigger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Trigger</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">DialogPortal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Portal</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">DialogClose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Close</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">DialogOverlay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">forwardRef</span><span class="o">&lt;</span>
<span class="w">  </span><span class="nx">React</span><span class="p">.</span><span class="nx">ElementRef</span><span class="p">&lt;</span><span class="nt">typeof</span><span class="w"> </span><span class="na">DialogPrimitive.Overlay</span><span class="p">&gt;,</span>
<span class="w">  </span><span class="nx">React</span><span class="p">.</span><span class="nx">ComponentPropsWithoutRef</span><span class="p">&lt;</span><span class="nt">typeof</span><span class="w"> </span><span class="na">DialogPrimitive.Overlay</span><span class="p">&gt;</span>
<span class="o">&gt;</span><span class="p">(({</span><span class="w"> </span><span class="nx">className</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">props</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">ref</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">DialogPrimitive</span><span class="p">.</span><span class="na">Overlay</span>
<span class="w">    </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span>
<span class="w">    </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cn</span><span class="p">(</span>
<span class="w">      </span><span class="s2">&quot;fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">className</span>
<span class="w">    </span><span class="p">)}</span>
<span class="w">    </span><span class="p">{</span><span class="na">...props</span><span class="p">}</span>
<span class="w">  </span><span class="p">/&gt;</span>
<span class="p">))</span>
<span class="nx">DialogOverlay</span><span class="p">.</span><span class="nx">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Overlay</span><span class="p">.</span><span class="nx">displayName</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">DialogContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">forwardRef</span><span class="o">&lt;</span>
<span class="w">  </span><span class="nx">React</span><span class="p">.</span><span class="nx">ElementRef</span><span class="p">&lt;</span><span class="nt">typeof</span><span class="w"> </span><span class="na">DialogPrimitive.Content</span><span class="p">&gt;,</span>
<span class="w">  </span><span class="nx">React</span><span class="p">.</span><span class="nx">ComponentPropsWithoutRef</span><span class="p">&lt;</span><span class="nt">typeof</span><span class="w"> </span><span class="na">DialogPrimitive.Content</span><span class="p">&gt;</span>
<span class="o">&gt;</span><span class="p">(({</span><span class="w"> </span><span class="nx">className</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">props</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">ref</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="p">&lt;</span><span class="nt">DialogPortal</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">DialogOverlay</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">DialogPrimitive</span><span class="p">.</span><span class="na">Content</span>
<span class="w">      </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span>
<span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cn</span><span class="p">(</span>
<span class="w">        </span><span class="s2">&quot;fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">className</span>
<span class="w">      </span><span class="p">)}</span>
<span class="w">      </span><span class="p">{</span><span class="na">...props</span><span class="p">}</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DialogPrimitive</span><span class="p">.</span><span class="na">Close</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">X</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-4 w-4&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span><span class="nx">Close</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DialogPrimitive</span><span class="p">.</span><span class="na">Close</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">DialogPrimitive</span><span class="p">.</span><span class="na">Content</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">DialogPortal</span><span class="p">&gt;</span>
<span class="p">))</span>
<span class="nx">DialogContent</span><span class="p">.</span><span class="nx">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DialogPrimitive</span><span class="p">.</span><span class="nx">Content</span><span class="p">.</span><span class="nx">displayName</span>

<span class="c1">// ... more component exports</span>

<span class="k">export</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">Dialog</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogPortal</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogOverlay</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogClose</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTrigger</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogContent</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogHeader</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogFooter</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTitle</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogDescription</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>What this gives you</strong>:
- Accessible dialog built on Radix UI primitives
- Keyboard navigation (Escape to close, Tab to cycle focus)
- Focus trapping (focus stays inside dialog)
- Scroll locking (body doesn't scroll when dialog is open)
- Smooth animations (fade in/out, zoom, slide)
- Styled with Tailwind utilities
- Fully customizable (it's your code now)</p>
<p>Now create a product detail dialog:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductDetailDialog.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">Dialog</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogContent</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogDescription</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogHeader</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTitle</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTrigger</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/dialog&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductDetailDialogProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductDetailDialogProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Dialog</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DialogTrigger</span><span class="w"> </span><span class="na">asChild</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DialogTrigger</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DialogContent</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;max-w-3xl&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DialogHeader</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">DialogTitle</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">DialogTitle</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">DialogDescription</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">DialogDescription</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">DialogHeader</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;grid gap-6 md:grid-cols-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden rounded-lg bg-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex flex-col gap-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">            </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-2 text-sm font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">Description</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-600&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">            </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-auto rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-blue-700&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Add</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Cart</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DialogContent</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Dialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Update the ProductCard to use the dialog:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductDetailDialog&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">ProductDetailDialog</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group cursor-pointer&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden bg-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500&quot;</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-gray-900 group-hover:text-blue-600&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">ProductDetailDialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Click product card ‚Üí dialog opens with smooth animation
- Background darkens (overlay)
- Body scroll is locked
- Press Escape ‚Üí dialog closes
- Click outside dialog ‚Üí dialog closes
- Click X button ‚Üí dialog closes
- Tab key cycles through focusable elements inside dialog
- Focus returns to trigger element when closed</p>
<p><strong>Accessibility Evidence</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">role</span><span class="o">=</span><span class="s">&quot;dialog&quot;</span> <span class="na">aria-modal</span><span class="o">=</span><span class="s">&quot;true&quot;</span> <span class="na">aria-labelledby</span><span class="o">=</span><span class="s">&quot;dialog-title&quot;</span> <span class="na">aria-describedby</span><span class="o">=</span><span class="s">&quot;dialog-description&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;dialog-title&quot;</span><span class="p">&gt;</span>Wireless Headphones<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;dialog-description&quot;</span><span class="p">&gt;</span>Electronics<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p>Proper ARIA attributes for screen readers.</p>
<h3 id="adding-more-components">Adding More Components</h3>
<p>Let's add a toast notification system for "Add to Cart" feedback:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Add toast component</span>
npx<span class="w"> </span>shadcn-ui@latest<span class="w"> </span>add<span class="w"> </span>toast
</code></pre></div>

<p>This adds:
- <code>components/ui/toast.tsx</code> - Toast component
- <code>components/ui/toaster.tsx</code> - Toast container
- <code>components/ui/use-toast.ts</code> - Hook for showing toasts</p>
<p>Add the Toaster to your root layout:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/layout.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;./globals.css&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Toaster</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/toaster&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">RootLayout</span><span class="p">({</span>
<span class="w">  </span><span class="nx">children</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">html</span><span class="w"> </span><span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Toaster</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Now use the toast in the product detail dialog:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductDetailDialog.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">Dialog</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogContent</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogDescription</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogHeader</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTitle</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DialogTrigger</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useToast</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/use-toast&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductDetailDialogProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductDetailDialogProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">toast</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useToast</span><span class="p">();</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleAddToCart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">toast</span><span class="p">({</span>
<span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Added to cart&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> has been added to your cart.`</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Dialog</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DialogTrigger</span><span class="w"> </span><span class="na">asChild</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DialogTrigger</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DialogContent</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;max-w-3xl&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DialogHeader</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">DialogTitle</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">DialogTitle</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">DialogDescription</span><span class="p">&gt;{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}&lt;/</span><span class="nt">DialogDescription</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">DialogHeader</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;grid gap-6 md:grid-cols-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden rounded-lg bg-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex flex-col gap-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">            </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-2 text-sm font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">Description</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-600&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">            </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleAddToCart</span><span class="p">}</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-auto rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-blue-700&quot;</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Add</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Cart</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DialogContent</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Dialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Click "Add to Cart" ‚Üí toast notification appears in bottom-right corner
- Toast shows product name
- Toast auto-dismisses after 5 seconds
- Multiple toasts stack vertically
- Smooth slide-in animation</p>
<h3 id="iteration-5-form-components">Iteration 5: Form Components</h3>
<p>Add form components for a newsletter signup:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Add form components</span>
npx<span class="w"> </span>shadcn-ui@latest<span class="w"> </span>add<span class="w"> </span>button<span class="w"> </span>input<span class="w"> </span>label
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/NewsletterSignup.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Button</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/button&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Input</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/input&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Label</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/label&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useToast</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/use-toast&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">NewsletterSignup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="nx">setEmail</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">toast</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useToast</span><span class="p">();</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleSubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">React.FormEvent</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">    </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Simulate API call</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">));</span>

<span class="w">    </span><span class="nx">toast</span><span class="p">({</span>
<span class="w">      </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Subscribed!&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;You&#39;ve been added to our newsletter.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">setEmail</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">form</span><span class="w"> </span><span class="na">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-2&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Label</span><span class="w"> </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span><span class="nx">Email</span><span class="w"> </span><span class="nx">address</span><span class="p">&lt;/</span><span class="nt">Label</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Input</span>
<span class="w">          </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;email&quot;</span>
<span class="w">          </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span>
<span class="w">          </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;you@example.com&quot;</span>
<span class="w">          </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">email</span><span class="p">}</span>
<span class="w">          </span><span class="na">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setEmail</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">          </span><span class="na">required</span>
<span class="w">        </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="w"> </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isLoading</span><span class="p">}</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">isLoading</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;Subscribing...&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Subscribe&#39;</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="when-to-apply-shadcnui">When to Apply shadcn/ui</h3>
<p><strong>What it optimizes for</strong>:
- Accessible, production-ready components
- Full customization (you own the code)
- No vendor lock-in
- Tailwind-first styling
- Type-safe components
- Small bundle size (only what you use)</p>
<p><strong>What it sacrifices</strong>:
- Initial setup time (CLI commands for each component)
- More code in your repository
- Manual updates (no npm update)
- Need to understand component internals for deep customization</p>
<p><strong>When to choose shadcn/ui</strong>:
- Building production applications
- Need accessible components
- Want full control over component code
- Using Tailwind CSS
- Prefer copy-paste over npm install
- Want to learn from well-written component code</p>
<p><strong>When to avoid shadcn/ui</strong>:
- Prototyping (too much setup)
- Need frequent component updates from maintainers
- Team unfamiliar with Radix UI primitives
- Prefer traditional component libraries</p>
<h3 id="code-characteristics_2">Code Characteristics</h3>
<p><strong>Setup complexity</strong>: Medium
- CLI initialization required
- Each component needs separate install
- Need to understand Radix UI primitives</p>
<p><strong>Maintenance burden</strong>: Medium
- Components live in your codebase
- Manual updates when shadcn releases improvements
- Need to maintain component code yourself</p>
<p><strong>Performance impact</strong>: Excellent
- Only bundle components you use
- No runtime theming overhead
- Tree-shakeable
- Radix UI is lightweight</p>
<h3 id="common-failure-modes-and-their-signatures_2">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-component-not-found">Symptom: Component not found</h4>
<p><strong>Browser behavior</strong>:
Import error in console</p>
<p><strong>Console pattern</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">Module</span><span class="w"> </span><span class="nn">not</span><span class="w"> </span><span class="n">found</span><span class="p">:</span><span class="w"> </span><span class="n">Can</span><span class="c">&#39;t resolve &#39;@/components/ui/dialog&#39;</span>
</code></pre></div>

<p><strong>Root cause</strong>: Forgot to install component with CLI</p>
<p><strong>Solution</strong>: Run <code>npx shadcn-ui@latest add dialog</code></p>
<h4 id="symptom-styles-not-applying-to-shadcn-components">Symptom: Styles not applying to shadcn components</h4>
<p><strong>Browser behavior</strong>:
Components render but look unstyled</p>
<p><strong>Root cause</strong>: CSS variables not configured in <code>globals.css</code></p>
<p><strong>Solution</strong>: Ensure shadcn initialization added CSS variables:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/* src/app/globals.css */</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">base</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">utilities</span><span class="p">;</span>

<span class="p">@</span><span class="k">layer</span><span class="w"> </span><span class="nt">base</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">--background</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="c">/* ... more variables */</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">dark</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">--background</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="c">/* ... more variables */</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="symptom-dialog-doesnt-close-on-escape">Symptom: Dialog doesn't close on Escape</h4>
<p><strong>Browser behavior</strong>:
Dialog stays open when pressing Escape key</p>
<p><strong>Root cause</strong>: Event handler preventing default behavior</p>
<p><strong>Solution</strong>: Don't call <code>e.preventDefault()</code> on keyboard events in dialog content</p>
<h4 id="symptom-toast-doesnt-appear">Symptom: Toast doesn't appear</h4>
<p><strong>Browser behavior</strong>:
<code>toast()</code> called but nothing shows</p>
<p><strong>Root cause</strong>: Forgot to add <code>&lt;Toaster /&gt;</code> to layout</p>
<p><strong>Solution</strong>: Add Toaster component to root layout</p>
<h3 id="debugging-workflow-shadcnui-issues">Debugging Workflow: shadcn/ui Issues</h3>
<p><strong>Step 1: Verify component installation</strong>
- Check <code>components/ui/</code> directory for component file
- If missing, run <code>npx shadcn-ui@latest add [component]</code></p>
<p><strong>Step 2: Check CSS variables</strong>
- Open DevTools ‚Üí Elements ‚Üí Computed
- Verify CSS variables are defined (e.g., <code>--background</code>)
- If missing, check <code>globals.css</code> has shadcn variables</p>
<p><strong>Step 3: Inspect Radix primitives</strong>
- shadcn components wrap Radix UI primitives
- Check Radix UI documentation for behavior
- Verify props are passed correctly</p>
<p><strong>Step 4: Check for conflicts</strong>
- Global styles might override component styles
- Check specificity in DevTools ‚Üí Styles panel
- Ensure Tailwind classes aren't conflicting</p>
<p><strong>Step 5: Review component source</strong>
- Component code is in your project
- Read the implementation in <code>components/ui/</code>
- Modify if needed (you own the code)</p>
<h2 id="dark-mode-and-theming">Dark mode and theming</h2>
<h2 id="the-problem-supporting-dark-mode">The Problem: Supporting Dark Mode</h2>
<p>Your product catalog looks great in light mode. But modern applications need dark mode:
- User preference (many users prefer dark interfaces)
- Accessibility (reduces eye strain in low-light environments)
- Battery savings (on OLED screens)
- Professional appearance</p>
<h3 id="the-failure-naive-dark-mode-implementation">The Failure: Naive Dark Mode Implementation</h3>
<p>Let's try the obvious approach: add a dark mode toggle that changes a class on the body.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/DarkModeToggle.tsx - Naive attempt</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">DarkModeToggle</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isDark</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsDark</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">toggleDarkMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setIsDark</span><span class="p">(</span><span class="o">!</span><span class="nx">isDark</span><span class="p">);</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;dark&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleDarkMode</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">isDark</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚òÄÔ∏è&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;üåô&#39;</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx - Using the toggle</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DarkModeToggle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/DarkModeToggle&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8 flex items-center justify-between&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">h1</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900&quot;</span><span class="p">&gt;</span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DarkModeToggle</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Browser Behavior</strong>:
- Click toggle ‚Üí <code>dark</code> class added to body
- But nothing changes visually
- Text is still black on white
- No dark mode styles applied</p>
<h3 id="diagnostic-analysis-why-naive-dark-mode-fails">Diagnostic Analysis: Why Naive Dark Mode Fails</h3>
<p><strong>What the user experiences</strong>:
- Expected: Dark background, light text when dark mode enabled
- Actual: No visual change, toggle does nothing</p>
<p><strong>Browser DevTools Evidence</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">body</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;dark&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-900&quot;</span><span class="p">&gt;</span>Our Products<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>

<p>The <code>dark</code> class is present, but no styles respond to it.</p>
<p><strong>What's missing</strong>:
1. Dark mode variants in Tailwind classes
2. CSS variables that change based on dark mode
3. Persistence (preference resets on page reload)
4. System preference detection
5. Hydration mismatch prevention (server renders light, client wants dark)</p>
<p><strong>Root cause</strong>: Tailwind's dark mode variants aren't enabled, and we're not using them in our components.</p>
<h3 id="configuring-tailwind-for-dark-mode">Configuring Tailwind for Dark Mode</h3>
<p>Tailwind supports dark mode through the <code>dark:</code> variant. First, enable it in your config:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// tailwind.config.js</span>
<span class="cm">/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">darkMode</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Enable class-based dark mode</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;./src/pages/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/components/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/app/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">extend</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Dark mode strategies</strong>:
- <code>'class'</code> - Dark mode enabled when <code>dark</code> class is on <code>html</code> or <code>body</code>
- <code>'media'</code> - Dark mode follows system preference (<code>prefers-color-scheme: dark</code>)</p>
<p>We use <code>'class'</code> for manual control with fallback to system preference.</p>
<h3 id="iteration-6-adding-dark-mode-variants">Iteration 6: Adding Dark Mode Variants</h3>
<p>Update components to include dark mode styles:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx - With dark mode</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductDetailDialog&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">ProductDetailDialog</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group cursor-pointer&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md dark:border-gray-700 dark:bg-gray-800&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden bg-gray-100 dark:bg-gray-700&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500 dark:text-gray-400&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-gray-900 group-hover:text-blue-600 dark:text-gray-100 dark:group-hover:text-blue-400&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-gray-900 dark:text-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">ProductDetailDialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Dark mode pattern</strong>:
- Add <code>dark:</code> prefix to any utility class
- <code>bg-white dark:bg-gray-800</code> - white in light mode, dark gray in dark mode
- <code>text-gray-900 dark:text-gray-100</code> - dark text in light mode, light text in dark mode
- <code>border-gray-200 dark:border-gray-700</code> - lighter border in light mode, darker in dark mode</p>
<p>Update the page layout:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx - With dark mode</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DarkModeToggle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/DarkModeToggle&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-h-screen bg-white dark:bg-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8 flex items-center justify-between&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">h1</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900 dark:text-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">DarkModeToggle</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Click toggle ‚Üí background turns dark, text turns light
- Product cards have dark backgrounds
- Borders are visible but subtle
- Hover states still work
- Images remain unchanged (correct)</p>
<p><strong>But there's still a problem</strong>: Refresh the page and dark mode resets. The preference isn't persisted.</p>
<h3 id="the-failure-hydration-mismatch">The Failure: Hydration Mismatch</h3>
<p>Let's add localStorage persistence:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/DarkModeToggle.tsx - With localStorage (BROKEN)</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">DarkModeToggle</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isDark</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsDark</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Load preference from localStorage</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">stored</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;darkMode&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">isDarkMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stored</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">setIsDark</span><span class="p">(</span><span class="nx">isDarkMode</span><span class="p">);</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;dark&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">isDarkMode</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">toggleDarkMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">newValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">isDark</span><span class="p">;</span>
<span class="w">    </span><span class="nx">setIsDark</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
<span class="w">    </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;darkMode&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">newValue</span><span class="p">));</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;dark&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">newValue</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span>
<span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleDarkMode</span><span class="p">}</span>
<span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-800&quot;</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">isDark</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚òÄÔ∏è&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;üåô&#39;</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Browser Behavior</strong>:
- Enable dark mode ‚Üí works
- Refresh page ‚Üí <strong>flash of light mode before dark mode applies</strong>
- Console shows warning</p>
<p><strong>Browser Console</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">Prop</span><span class="w"> </span><span class="n n-Quoted">`className`</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">match</span><span class="p">.</span><span class="w"> </span><span class="k">Server</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;bg-white&quot;</span><span class="w"> </span><span class="k">Client</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;bg-white dark:bg-gray-900&quot;</span>
</code></pre></div>

<h3 id="diagnostic-analysis-hydration-mismatch">Diagnostic Analysis: Hydration Mismatch</h3>
<p><strong>What the user experiences</strong>:
- Expected: Dark mode persists across page loads without flash
- Actual: Brief flash of light mode, then dark mode applies</p>
<p><strong>What's happening</strong>:
1. Server renders HTML with light mode (no access to localStorage)
2. HTML sent to browser shows light mode
3. React hydrates on client
4. useEffect runs, reads localStorage, applies dark mode
5. React sees mismatch between server HTML and client state
6. User sees flash as DOM updates</p>
<p><strong>React DevTools Evidence</strong>:
- Component tree shows hydration warning
- Server-rendered HTML doesn't match client-rendered HTML</p>
<p><strong>Root cause</strong>: Server can't access localStorage (it's browser-only). Server always renders light mode, client might need dark mode.</p>
<p><strong>What we need</strong>: A way to apply dark mode before React hydrates, preventing the flash.</p>
<h3 id="the-solution-next-themes">The Solution: next-themes</h3>
<p>The <code>next-themes</code> library solves hydration mismatches by:
1. Injecting a script before React hydrates
2. Reading preference from localStorage
3. Applying dark mode class immediately
4. Preventing flash of incorrect theme</p>
<p>Install next-themes:</p>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>next-themes
</code></pre></div>

<p>Add the ThemeProvider to your root layout:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/layout.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;./globals.css&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ThemeProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next-themes&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Toaster</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/toaster&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">RootLayout</span><span class="p">({</span>
<span class="w">  </span><span class="nx">children</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">html</span><span class="w"> </span><span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">suppressHydrationWarning</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ThemeProvider</span><span class="w"> </span><span class="na">attribute</span><span class="o">=</span><span class="s">&quot;class&quot;</span><span class="w"> </span><span class="na">defaultTheme</span><span class="o">=</span><span class="s">&quot;system&quot;</span><span class="w"> </span><span class="na">enableSystem</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">Toaster</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">ThemeProvider</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>ThemeProvider props</strong>:
- <code>attribute="class"</code> - Adds <code>dark</code> class to <code>html</code> element
- <code>defaultTheme="system"</code> - Follows system preference by default
- <code>enableSystem</code> - Allows system preference detection
- <code>suppressHydrationWarning</code> on <code>html</code> - Prevents React warning (next-themes handles it)</p>
<p>Now create a proper theme toggle:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ThemeToggle.tsx</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useTheme</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next-themes&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Button</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/button&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ThemeToggle</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">mounted</span><span class="p">,</span><span class="w"> </span><span class="nx">setMounted</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">theme</span><span class="p">,</span><span class="w"> </span><span class="nx">setTheme</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useTheme</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// useEffect only runs on the client, so we can safely show the UI</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setMounted</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">mounted</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Render placeholder to avoid hydration mismatch</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">variant</span><span class="o">=</span><span class="s">&quot;ghost&quot;</span><span class="w"> </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;icon&quot;</span><span class="w"> </span><span class="na">disabled</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-5 w-5&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">Button</span>
<span class="w">      </span><span class="na">variant</span><span class="o">=</span><span class="s">&quot;ghost&quot;</span>
<span class="w">      </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;icon&quot;</span>
<span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTheme</span><span class="p">(</span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;light&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="p">)}</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span><span class="err">‚òÄÔ∏è</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span><span class="err">üåô</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">)}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span><span class="nx">Toggle</span><span class="w"> </span><span class="nx">theme</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Key pattern</strong>: The <code>mounted</code> check prevents hydration mismatch by:
1. Rendering a placeholder on server (disabled button)
2. Rendering actual toggle after client hydration
3. Avoiding mismatch between server and client HTML</p>
<p>Update the products page:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ThemeToggle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ThemeToggle&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-h-screen bg-white dark:bg-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8 flex items-center justify-between&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">h1</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900 dark:text-gray-100&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">ThemeToggle</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Click toggle ‚Üí theme changes instantly
- Refresh page ‚Üí <strong>no flash</strong>, correct theme applied immediately
- Close browser, reopen ‚Üí preference persisted
- No hydration warnings in console</p>
<p><strong>How it works</strong>:
1. next-themes injects blocking script in <code>&lt;head&gt;</code>
2. Script runs before React hydrates
3. Reads localStorage, applies theme class
4. React hydrates with correct theme already applied
5. No mismatch, no flash</p>
<h3 id="iteration-7-system-preference-detection">Iteration 7: System Preference Detection</h3>
<p>Add a three-way toggle: light, dark, system.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ThemeToggle.tsx - Three-way toggle</span>
<span class="s1">&#39;use client&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useTheme</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next-themes&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DropdownMenu</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DropdownMenuContent</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DropdownMenuItem</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DropdownMenuTrigger</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/dropdown-menu&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Button</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/button&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ThemeToggle</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">mounted</span><span class="p">,</span><span class="w"> </span><span class="nx">setMounted</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">theme</span><span class="p">,</span><span class="w"> </span><span class="nx">setTheme</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useTheme</span><span class="p">();</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setMounted</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">mounted</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">variant</span><span class="o">=</span><span class="s">&quot;ghost&quot;</span><span class="w"> </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;icon&quot;</span><span class="w"> </span><span class="na">disabled</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-5 w-5&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">DropdownMenu</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DropdownMenuTrigger</span><span class="w"> </span><span class="na">asChild</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">Button</span><span class="w"> </span><span class="na">variant</span><span class="o">=</span><span class="s">&quot;ghost&quot;</span><span class="w"> </span><span class="na">size</span><span class="o">=</span><span class="s">&quot;icon&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span><span class="err">üåô</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">theme</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;light&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span><span class="err">‚òÄÔ∏è</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span><span class="err">üíª</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">)}</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span><span class="nx">Toggle</span><span class="w"> </span><span class="nx">theme</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DropdownMenuTrigger</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">DropdownMenuContent</span><span class="w"> </span><span class="na">align</span><span class="o">=</span><span class="s">&quot;end&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DropdownMenuItem</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTheme</span><span class="p">(</span><span class="s1">&#39;light&#39;</span><span class="p">)}&gt;</span>
<span class="w">          </span><span class="err">‚òÄÔ∏è</span><span class="w"> </span><span class="nx">Light</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">DropdownMenuItem</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DropdownMenuItem</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTheme</span><span class="p">(</span><span class="s1">&#39;dark&#39;</span><span class="p">)}&gt;</span>
<span class="w">          </span><span class="err">üåô</span><span class="w"> </span><span class="nx">Dark</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">DropdownMenuItem</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">DropdownMenuItem</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTheme</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">)}&gt;</span>
<span class="w">          </span><span class="err">üíª</span><span class="w"> </span><span class="nx">System</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">DropdownMenuItem</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">DropdownMenuContent</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">DropdownMenu</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Verification</strong>:</p>
<p><strong>Browser Behavior</strong>:
- Click toggle ‚Üí dropdown menu appears
- Select "Light" ‚Üí light mode
- Select "Dark" ‚Üí dark mode
- Select "System" ‚Üí follows OS preference
- Change OS theme ‚Üí app theme updates automatically</p>
<h3 id="using-css-variables-for-theming">Using CSS Variables for Theming</h3>
<p>For more complex theming, use CSS variables that change based on dark mode. This is how shadcn/ui handles theming.</p>
<p>Update your globals.css:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/* src/app/globals.css */</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">base</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span><span class="w"> </span><span class="nt">utilities</span><span class="p">;</span>

<span class="p">@</span><span class="k">layer</span><span class="w"> </span><span class="nt">base</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">--background</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--primary</span><span class="p">:</span><span class="w"> </span><span class="mf">221.2</span><span class="w"> </span><span class="mf">83.2</span><span class="kt">%</span><span class="w"> </span><span class="mf">53.3</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--primary-foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--secondary</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mf">96.1</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--secondary-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mf">47.4</span><span class="kt">%</span><span class="w"> </span><span class="mf">11.2</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--muted</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mf">96.1</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--muted-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">215.4</span><span class="w"> </span><span class="mf">16.3</span><span class="kt">%</span><span class="w"> </span><span class="mf">46.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--accent</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mf">96.1</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--accent-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mf">47.4</span><span class="kt">%</span><span class="w"> </span><span class="mf">11.2</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--border</span><span class="p">:</span><span class="w"> </span><span class="mf">214.3</span><span class="w"> </span><span class="mf">31.8</span><span class="kt">%</span><span class="w"> </span><span class="mf">91.4</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--input</span><span class="p">:</span><span class="w"> </span><span class="mf">214.3</span><span class="w"> </span><span class="mf">31.8</span><span class="kt">%</span><span class="w"> </span><span class="mf">91.4</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--ring</span><span class="p">:</span><span class="w"> </span><span class="mf">221.2</span><span class="w"> </span><span class="mf">83.2</span><span class="kt">%</span><span class="w"> </span><span class="mf">53.3</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">.</span><span class="nc">dark</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">--background</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mi">84</span><span class="kt">%</span><span class="w"> </span><span class="mf">4.9</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--card-foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--primary</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">91.2</span><span class="kt">%</span><span class="w"> </span><span class="mf">59.8</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--primary-foreground</span><span class="p">:</span><span class="w"> </span><span class="mf">222.2</span><span class="w"> </span><span class="mf">47.4</span><span class="kt">%</span><span class="w"> </span><span class="mf">11.2</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--secondary</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">32.6</span><span class="kt">%</span><span class="w"> </span><span class="mf">17.5</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--secondary-foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--muted</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">32.6</span><span class="kt">%</span><span class="w"> </span><span class="mf">17.5</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--muted-foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">215</span><span class="w"> </span><span class="mf">20.2</span><span class="kt">%</span><span class="w"> </span><span class="mf">65.1</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--accent</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">32.6</span><span class="kt">%</span><span class="w"> </span><span class="mf">17.5</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--accent-foreground</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="w"> </span><span class="mi">98</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--border</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">32.6</span><span class="kt">%</span><span class="w"> </span><span class="mf">17.5</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--input</span><span class="p">:</span><span class="w"> </span><span class="mf">217.2</span><span class="w"> </span><span class="mf">32.6</span><span class="kt">%</span><span class="w"> </span><span class="mf">17.5</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="nv">--ring</span><span class="p">:</span><span class="w"> </span><span class="mf">224.3</span><span class="w"> </span><span class="mf">76.3</span><span class="kt">%</span><span class="w"> </span><span class="mi">48</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">layer</span><span class="w"> </span><span class="nt">base</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">@apply</span><span class="w"> </span><span class="err">border-border</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">@apply</span><span class="w"> </span><span class="err">bg-background</span><span class="w"> </span><span class="err">text-foreground</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>How CSS variables work</strong>:
- Define colors as HSL values (hue, saturation, lightness)
- Light mode: <code>--background: 0 0% 100%</code> (white)
- Dark mode: <code>--background: 222.2 84% 4.9%</code> (dark blue-gray)
- Use in Tailwind: <code>bg-background</code>, <code>text-foreground</code>
- Variables automatically switch when <code>dark</code> class is applied</p>
<p>Update Tailwind config to use these variables:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// tailwind.config.js</span>
<span class="cm">/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">darkMode</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;class&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;./src/pages/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/components/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;./src/app/**/*.{js,ts,jsx,tsx,mdx}&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">extend</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">border</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--border))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--input))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ring</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--ring))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--background))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DEFAULT</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--primary))&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--primary-foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">secondary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DEFAULT</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--secondary))&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--secondary-foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">muted</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DEFAULT</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--muted))&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--muted-foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">accent</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DEFAULT</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--accent))&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--accent-foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">card</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DEFAULT</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--card))&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">foreground</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hsl(var(--card-foreground))&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="p">}</span>
</code></pre></div>

<p>Now you can use semantic color names:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx - Using semantic colors</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductDetailDialog&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">ProductDetailDialog</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group cursor-pointer&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border bg-card shadow-sm transition-shadow hover:shadow-md&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;relative aspect-square overflow-hidden bg-muted&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-muted-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-card-foreground group-hover:text-primary&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-card-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">ProductDetailDialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Benefits of semantic colors</strong>:
- <code>bg-card</code> instead of <code>bg-white dark:bg-gray-800</code>
- <code>text-card-foreground</code> instead of <code>text-gray-900 dark:text-gray-100</code>
- Single class name, works in both themes
- Easy to customize entire theme by changing CSS variables
- Consistent color palette across application</p>
<h3 id="when-to-apply-dark-mode">When to Apply Dark Mode</h3>
<p><strong>What it optimizes for</strong>:
- User preference and accessibility
- Modern, professional appearance
- Reduced eye strain
- Battery savings on OLED screens</p>
<p><strong>What it sacrifices</strong>:
- Additional development time
- More complex styling (need to consider both themes)
- Testing burden (test in both modes)</p>
<p><strong>When to implement dark mode</strong>:
- Building consumer-facing applications
- Users spend extended time in your app
- Modern, professional brand
- Accessibility is a priority
- Using component library with dark mode support (shadcn/ui)</p>
<p><strong>When to skip dark mode</strong>:
- Internal tools with limited usage
- Tight deadlines (add later)
- Brand requires specific light theme
- Limited development resources</p>
<h3 id="code-characteristics_3">Code Characteristics</h3>
<p><strong>Setup complexity</strong>: Low (with next-themes)
- Single npm install
- Wrap app in ThemeProvider
- Add dark mode variants to components</p>
<p><strong>Maintenance burden</strong>: Medium
- Need to test both themes
- Every new component needs dark mode styles
- CSS variables simplify but require initial setup</p>
<p><strong>Performance impact</strong>: Minimal
- next-themes adds ~2KB gzipped
- No runtime performance cost
- CSS variables are native browser feature</p>
<h3 id="common-failure-modes-and-their-signatures_3">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-flash-of-incorrect-theme">Symptom: Flash of incorrect theme</h4>
<p><strong>Browser behavior</strong>:
Brief flash of light mode before dark mode applies</p>
<p><strong>Root cause</strong>: Not using next-themes or similar solution</p>
<p><strong>Solution</strong>: Use next-themes with blocking script</p>
<h4 id="symptom-hydration-mismatch-warning">Symptom: Hydration mismatch warning</h4>
<p><strong>Browser behavior</strong>:
Console warning about className mismatch</p>
<p><strong>Console pattern</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">Prop</span><span class="w"> </span><span class="n n-Quoted">`className`</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">match</span><span class="p">.</span><span class="w"> </span><span class="k">Server</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="w"> </span><span class="k">Client</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</code></pre></div>

<p><strong>Root cause</strong>: Rendering theme-dependent content without mounted check</p>
<p><strong>Solution</strong>: Use mounted state pattern:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">mounted</span><span class="p">,</span><span class="w"> </span><span class="nx">setMounted</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">setMounted</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">mounted</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">Placeholder</span><span class="w"> </span><span class="p">/&gt;;</span>
<span class="p">}</span>

<span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">ActualContent</span><span class="w"> </span><span class="p">/&gt;;</span>
</code></pre></div>

<h4 id="symptom-theme-doesnt-persist">Symptom: Theme doesn't persist</h4>
<p><strong>Browser behavior</strong>:
Theme resets to default on page reload</p>
<p><strong>Root cause</strong>: Not using next-themes or localStorage</p>
<p><strong>Solution</strong>: Use next-themes (handles persistence automatically)</p>
<h4 id="symptom-some-components-dont-respect-dark-mode">Symptom: Some components don't respect dark mode</h4>
<p><strong>Browser behavior</strong>:
Most UI is dark, but some components stay light</p>
<p><strong>Root cause</strong>: Forgot to add dark mode variants to those components</p>
<p><strong>Solution</strong>: Add <code>dark:</code> variants to all color-related classes</p>
<h3 id="debugging-workflow-dark-mode-issues">Debugging Workflow: Dark Mode Issues</h3>
<p><strong>Step 1: Verify dark class is applied</strong>
- Open DevTools ‚Üí Elements
- Check <code>&lt;html&gt;</code> element for <code>class="dark"</code>
- If missing, check ThemeProvider configuration</p>
<p><strong>Step 2: Check CSS variables</strong>
- DevTools ‚Üí Elements ‚Üí Computed
- Verify CSS variables change when toggling theme
- Light mode: <code>--background</code> should be light
- Dark mode: <code>--background</code> should be dark</p>
<p><strong>Step 3: Inspect component styles</strong>
- DevTools ‚Üí Elements ‚Üí Styles
- Check if dark mode variants are present
- Look for <code>.dark .component-class</code> rules</p>
<p><strong>Step 4: Test system preference</strong>
- Change OS theme (System Preferences ‚Üí Appearance)
- Verify app follows system preference when theme is "system"
- Check <code>window.matchMedia('(prefers-color-scheme: dark)').matches</code></p>
<p><strong>Step 5: Check localStorage</strong>
- DevTools ‚Üí Application ‚Üí Local Storage
- Look for <code>theme</code> key
- Value should be "light", "dark", or "system"</p>
<h2 id="the-styling-journey-from-unstyled-to-production">The Styling Journey: From Unstyled to Production</h2>
<h2 id="the-complete-journey">The Complete Journey</h2>
<p>Let's trace the evolution of our product catalog from unstyled components to a production-ready, themed application.</p>
<h3 id="the-styling-evolution-table">The Styling Evolution Table</h3>
<table>
<thead>
<tr>
<th>Iteration</th>
<th>Approach</th>
<th>Result</th>
<th>Bundle Impact</th>
<th>Maintenance</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No styling</td>
<td>Unstyled, 1995 aesthetic</td>
<td>0 KB</td>
<td>None</td>
</tr>
<tr>
<td>1</td>
<td>Tailwind utilities</td>
<td>Modern, responsive grid</td>
<td>~8 KB (purged)</td>
<td>Low</td>
</tr>
<tr>
<td>2</td>
<td>CSS Modules for animations</td>
<td>Polished loading states</td>
<td>+2 KB</td>
<td>Medium</td>
</tr>
<tr>
<td>3</td>
<td>Hybrid Tailwind + CSS Modules</td>
<td>Best of both worlds</td>
<td>~10 KB</td>
<td>Medium</td>
</tr>
<tr>
<td>4</td>
<td>shadcn/ui components</td>
<td>Accessible dialogs, toasts</td>
<td>+15 KB</td>
<td>Medium</td>
</tr>
<tr>
<td>5</td>
<td>Dark mode with next-themes</td>
<td>Full theme support</td>
<td>+2 KB</td>
<td>Medium</td>
</tr>
<tr>
<td>6</td>
<td>CSS variables for theming</td>
<td>Semantic color system</td>
<td>0 KB (CSS only)</td>
<td>Low</td>
</tr>
</tbody>
</table>
<p><strong>Total bundle cost</strong>: ~27 KB gzipped for complete styling solution</p>
<h3 id="final-implementation-production-ready-product-catalog">Final Implementation: Production-Ready Product Catalog</h3>
<p>Here's the complete, production-ready implementation with all improvements integrated:</p>
<p><strong>Project Structure</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">src</span><span class="o">/</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">app</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">layout</span><span class="o">.</span><span class="n">tsx</span><span class="w">              </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">ThemeProvider</span><span class="p">,</span><span class="w"> </span><span class="n">Toaster</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">globals</span><span class="o">.</span><span class="n">css</span><span class="w">             </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Tailwind</span><span class="p">,</span><span class="w"> </span><span class="n">CSS</span><span class="w"> </span><span class="n">variables</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">products</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">       </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="n">tsx</span><span class="w">            </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="n">listing</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">components</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ui</span><span class="o">/</span><span class="w">                     </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">shadcn</span><span class="o">/</span><span class="n">ui</span><span class="w"> </span><span class="n">components</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">dialog</span><span class="o">.</span><span class="n">tsx</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">toast</span><span class="o">.</span><span class="n">tsx</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">button</span><span class="o">.</span><span class="n">tsx</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">dropdown</span><span class="o">-</span><span class="n">menu</span><span class="o">.</span><span class="n">tsx</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductCard</span><span class="o">.</span><span class="n">tsx</span><span class="w">         </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Hybrid</span><span class="w"> </span><span class="n">styling</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductCard</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">css</span><span class="w">  </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">animations</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductCardSkeleton</span><span class="o">.</span><span class="n">tsx</span><span class="w"> </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Loading</span><span class="w"> </span><span class="n">state</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductGrid</span><span class="o">.</span><span class="n">tsx</span><span class="w">         </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Responsive</span><span class="w"> </span><span class="n">grid</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ProductDetailDialog</span><span class="o">.</span><span class="n">tsx</span><span class="w"> </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Modal</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">toast</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">ThemeToggle</span><span class="o">.</span><span class="n">tsx</span><span class="w">         </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Dark</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">toggle</span>
<span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span>
<span class="w">    </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">products</span><span class="o">.</span><span class="n">ts</span><span class="w">             </span><span class="err">‚Üê</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">fetching</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/layout.tsx - Final root layout</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;./globals.css&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ThemeProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next-themes&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Toaster</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ui/toaster&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">metadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Product Catalog&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Browse our products&#39;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">RootLayout</span><span class="p">({</span>
<span class="w">  </span><span class="nx">children</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">children</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">html</span><span class="w"> </span><span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="w"> </span><span class="na">suppressHydrationWarning</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">ThemeProvider</span><span class="w"> </span><span class="na">attribute</span><span class="o">=</span><span class="s">&quot;class&quot;</span><span class="w"> </span><span class="na">defaultTheme</span><span class="o">=</span><span class="s">&quot;system&quot;</span><span class="w"> </span><span class="na">enableSystem</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">Toaster</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">ThemeProvider</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductCard.tsx - Final implementation</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Image</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductDetailDialog</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductDetailDialog&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">styles</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./ProductCard.module.css&#39;</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">product</span><span class="o">:</span><span class="w"> </span><span class="kt">Product</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductCard</span><span class="p">({</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="nx">ProductCardProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">ProductDetailDialog</span><span class="w"> </span><span class="na">product</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">}&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;group cursor-pointer&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-hidden rounded-lg border bg-card shadow-sm transition-shadow hover:shadow-md&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`relative aspect-square overflow-hidden bg-muted </span><span class="si">${</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageContainer</span><span class="si">}</span><span class="sb">`</span><span class="p">}&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">Image</span>
<span class="w">              </span><span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
<span class="w">              </span><span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="na">fill</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;object-cover transition-transform group-hover:scale-105&quot;</span>
<span class="w">            </span><span class="p">/&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">isNew</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">badge</span><span class="p">}&gt;</span><span class="nx">New</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">)}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;p-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-muted-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">h3</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-1 text-lg font-semibold text-card-foreground group-hover:text-primary&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">p</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mt-2 text-xl font-bold text-card-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">ProductDetailDialog</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/app/products/page.tsx - Final products page</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Suspense</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getProducts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/lib/products&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductGrid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductGrid&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ProductCardSkeleton</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ProductCardSkeleton&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ThemeToggle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@/components/ThemeToggle&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductsPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getProducts</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-h-screen bg-background&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8 flex items-center justify-between&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">h1</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-foreground&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Our</span><span class="w"> </span><span class="nx">Products</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">ThemeToggle</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">Suspense</span><span class="w"> </span><span class="na">fallback</span><span class="o">=</span><span class="p">{</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">({</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="kt">8</span><span class="w"> </span><span class="p">}).</span><span class="nx">map</span><span class="p">((</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">ProductCardSkeleton</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">}&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">ProductGrid</span><span class="w"> </span><span class="na">products</span><span class="o">=</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">Suspense</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="decision-framework-choosing-your-styling-approach">Decision Framework: Choosing Your Styling Approach</h3>
<p>Use this flowchart to decide which styling approach to use:</p>
<p><strong>For standard UI components</strong>:
- ‚úÖ Use Tailwind utilities
- Fast development, consistent design
- Example: layouts, spacing, typography, colors</p>
<p><strong>For complex animations or pseudo-elements</strong>:
- ‚úÖ Use CSS Modules
- Full CSS power when needed
- Example: shimmer effects, custom badges, complex keyframes</p>
<p><strong>For accessible, interactive components</strong>:
- ‚úÖ Use shadcn/ui
- Production-ready, accessible, customizable
- Example: dialogs, dropdowns, toasts, forms</p>
<p><strong>For theming and dark mode</strong>:
- ‚úÖ Use CSS variables + next-themes
- Semantic colors, no hydration issues
- Example: theme switching, brand customization</p>
<p><strong>Hybrid approach</strong> (recommended):
- Tailwind for 80% of styling
- CSS Modules for complex custom styles
- shadcn/ui for interactive components
- CSS variables for theming</p>
<h3 id="lessons-learned-styling-in-nextjs">Lessons Learned: Styling in Next.js</h3>
<p><strong>1. Start with Tailwind</strong>
- Fastest path to good-looking UI
- Built-in responsive design
- Automatic purging keeps bundle small</p>
<p><strong>2. Add CSS Modules selectively</strong>
- Only when Tailwind can't express what you need
- Complex animations, pseudo-elements with content
- Keep CSS Modules focused and minimal</p>
<p><strong>3. Don't reinvent accessible components</strong>
- Use shadcn/ui for dialogs, dropdowns, toasts
- Accessibility is hard to get right
- Copy-paste approach gives you full control</p>
<p><strong>4. Plan for dark mode early</strong>
- Easier to add dark mode variants as you build
- Use CSS variables for semantic colors
- next-themes prevents hydration issues</p>
<p><strong>5. Optimize for maintainability</strong>
- Co-locate styles with components
- Use semantic color names (bg-card, text-foreground)
- Document custom CSS Modules
- Keep Tailwind classes readable (use Prettier plugin)</p>
<p><strong>6. Test in both themes</strong>
- Every component should work in light and dark mode
- Check contrast ratios for accessibility
- Verify focus states are visible in both themes</p>
<p><strong>7. Monitor bundle size</strong>
- Tailwind purges unused CSS automatically
- CSS Modules are code-split per component
- shadcn/ui only bundles what you use
- Total styling overhead should be &lt; 50 KB gzipped</p>
<h3 id="performance-metrics-before-and-after">Performance Metrics: Before and After</h3>
<p><strong>Before styling</strong>:
- Bundle size: 120 KB (Next.js + React only)
- First Contentful Paint: 0.8s
- Largest Contentful Paint: 1.2s
- Cumulative Layout Shift: 0.05</p>
<p><strong>After complete styling solution</strong>:
- Bundle size: 147 KB (+27 KB for styling)
- First Contentful Paint: 0.9s (+0.1s)
- Largest Contentful Paint: 1.3s (+0.1s)
- Cumulative Layout Shift: 0.02 (improved, images have aspect-ratio)</p>
<p><strong>Impact</strong>: Minimal performance cost for significant UX improvement.</p>
<h3 id="common-pitfalls-and-how-to-avoid-them">Common Pitfalls and How to Avoid Them</h3>
<p><strong>Pitfall 1: Verbose className strings</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Hard to read</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md dark:border-gray-700 dark:bg-gray-800&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>Solution</strong>: Extract to component or use CSS Modules for complex styles</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚úÖ More readable</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;card-container&quot;</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">{</span><span class="cm">/* Tailwind for simple utilities, CSS Module for complex pattern */</span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>Pitfall 2: Forgetting dark mode variants</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Only works in light mode</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white text-gray-900&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>Solution</strong>: Always add dark mode variants or use semantic colors</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚úÖ Works in both modes</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-card text-card-foreground&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>Pitfall 3: Hydration mismatches with theme</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Causes hydration mismatch</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">isDark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="p">;</span>
<span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">isDark</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;dark-class&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;light-class&#39;</span><span class="p">}&gt;</span>
</code></pre></div>

<p><strong>Solution</strong>: Use next-themes and mounted check</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚úÖ No hydration mismatch</span>
<span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">mounted</span><span class="p">,</span><span class="w"> </span><span class="nx">setMounted</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setMounted</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span><span class="w"> </span><span class="p">[]);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">mounted</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">Placeholder</span><span class="w"> </span><span class="p">/&gt;;</span>
</code></pre></div>

<p><strong>Pitfall 4: Not purging unused CSS</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Tailwind config missing content paths</span>
<span class="kr">module</span><span class="nx">.exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">// Empty!</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Solution</strong>: Include all component paths</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚úÖ Purges unused CSS</span>
<span class="kr">module</span><span class="nx">.exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;./src/**/*.{js,ts,jsx,tsx}&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Pitfall 5: Overusing CSS Modules</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">/* ‚ùå Reinventing Tailwind utilities */</span>
<span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Solution</strong>: Use Tailwind for standard utilities</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚úÖ Simpler and more maintainable</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex p-4 mb-8&quot;</span><span class="p">&gt;</span>
</code></pre></div>

<h3 id="the-professional-react-developers-styling-mental-model">The Professional React Developer's Styling Mental Model</h3>
<p><strong>Think in layers</strong>:
1. <strong>Base layer</strong>: Tailwind utilities for standard styling
2. <strong>Custom layer</strong>: CSS Modules for complex, unique styles
3. <strong>Component layer</strong>: shadcn/ui for interactive, accessible components
4. <strong>Theme layer</strong>: CSS variables for colors and theming</p>
<p><strong>Optimize for</strong>:
- Developer experience (fast iteration)
- User experience (smooth interactions, dark mode)
- Maintainability (clear patterns, minimal custom CSS)
- Performance (small bundle, fast load)</p>
<p><strong>Remember</strong>:
- Styling is not just aesthetics‚Äîit's UX, accessibility, and performance
- Good styling is invisible; users notice when it's missing
- Consistency matters more than perfection
- Dark mode is expected in modern applications
- Accessible components are not optional</p>
<p>You now have a complete, production-ready styling solution for Next.js applications. Your product catalog is responsive, accessible, themeable, and performant. The patterns you've learned apply to any Next.js project, from simple landing pages to complex web applications.</p>
        </div>
        <div class="footer">
            Generated on 2025-12-03 12:33:30 | Made with ‚ù§Ô∏è by GitHub Pages Generator
        </div>
    </div>
    <script>
        // Syntax highlighting for code blocks
        document.addEventListener('DOMContentLoaded', (event) => {
            // Highlight code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Add copy buttons to code blocks
            document.querySelectorAll('pre').forEach((pre) => {
                const button = document.createElement('button');
                button.className = 'copy-btn';
                button.textContent = 'Copy';
                
                button.addEventListener('click', () => {
                    const code = pre.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                        button.textContent = 'Error';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                });
                
                pre.appendChild(button);
            });
        });
    </script>
</body>
</html>