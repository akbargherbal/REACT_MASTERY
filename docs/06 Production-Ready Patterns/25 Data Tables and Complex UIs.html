<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>25 Data Tables and Complex UIs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg-main: #0f172a;
            --bg-card: #1e293b;
            --bg-code: #0f172a;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --accent: #06b6d4;
            --success: #10b981;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.7; 
            color: var(--text-primary); 
            background: var(--bg-main);
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        .home-btn { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: var(--accent);
            color: white; 
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-decoration: none; 
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .home-btn:hover { 
            background: #0891b2;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(6, 182, 212, 0.5);
        }
        
        .breadcrumb { 
            background: var(--bg-card);
            padding: 12px 0; 
            margin-bottom: 24px; 
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .breadcrumb a { 
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .breadcrumb a:hover { 
            color: var(--primary);
            text-decoration: underline;
        }
        
        .content { 
            background: var(--bg-card);
            padding: 3rem; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }
        
        .file-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 1.5rem; 
            margin: 2rem 0; 
        }
        
        .file-item { 
            padding: 1.5rem; 
            border: 1px solid var(--border);
            border-radius: 12px; 
            background: var(--bg-main);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .file-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .file-item:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
        }
        
        .file-item:hover::before {
            opacity: 1;
        }
        
        .file-item a { 
            color: var(--text-primary);
            text-decoration: none; 
            font-weight: 600; 
            display: block;
            font-size: 1.1rem;
        }
        
        .file-item a:hover { 
            color: var(--primary);
        }
        
        .file-type { 
            font-size: 13px; 
            color: var(--text-secondary);
            margin-top: 8px; 
            font-weight: 500;
        }
        
        /* Code Blocks */
        pre { 
            background: var(--bg-code);
            padding: 1.5rem; 
            border-radius: 12px; 
            overflow-x: auto;
            border: 1px solid var(--border);
            margin: 1.5rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        pre code { 
            background: none;
            padding: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        /* Copy Button */
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            opacity: 0.7;
            z-index: 10;
        }
        
        .copy-btn:hover {
            opacity: 1;
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .copy-btn.copied {
            background: var(--success);
        }
        
        pre:hover .copy-btn {
            opacity: 1;
        }
        
        /* Inline Code */
        code { 
            background: var(--bg-code);
            color: #8b5cf6;
            padding: 3px 8px; 
            border-radius: 6px; 
            font-size: 1.1em;
            font-family: 'Fira Code', 'Consolas', monospace;
            border: 1px solid var(--border);
        }
        
        /* Headings */
        h1, h2, h3, h4, h5, h6 { 
            color: var(--text-primary);
            margin: 2rem 0 1rem 0;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        h1 { 
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 12px;
            margin-bottom: 1.5rem;
        }
        
        h2 { 
            font-size: 2rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 8px;
        }
        
        h3 { 
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        /* Links */
        a { 
            color: var(--accent);
            transition: color 0.2s;
        }
        
        a:hover { 
            color: var(--primary);
        }
        
        /* Paragraphs */
        p {
            margin: 1rem 0;
            color: var(--text-secondary);
        }
        
        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
            color: var(--text-secondary);
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        /* Tables */
        table { 
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        th, td { 
            border: 1px solid var(--border);
            padding: 12px 16px;
            text-align: left;
        }
        
        th { 
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: var(--bg-card);
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* Horizontal Rule */
        hr {
            border: none;
            border-top: 2px solid var(--border);
            margin: 2rem 0;
        }
        
        .footer { 
            text-align: center; 
            padding: 2rem; 
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 3rem; 
            font-size: 14px;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-main);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 6px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .file-list { grid-template-columns: 1fr; }
            .content { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-btn">üè†</a>
    <div class="container">
        <div class="breadcrumb">
            <div style="padding: 0 20px;">
                <a href="../index.html">üè† Home</a> <span style="color: #64748b;">/</span> <a href="index.html">06 Production-Ready Patterns</a>
            </div>
        </div>
        <div class="content">
            <h1 id="chapter-25-data-tables-and-complex-uis">Chapter 25: Data Tables and Complex UIs</h1>
<h2 id="tanstack-table-flexible-headless-tables">TanStack Table: flexible, headless tables</h2>
<h2 id="the-problem-building-a-production-grade-data-table">The Problem: Building a Production-Grade Data Table</h2>
<p>You've been asked to build an admin dashboard for an e-commerce platform. The centerpiece is a product inventory table that displays thousands of products with columns for SKU, name, category, price, stock level, and last updated date. Users need to sort by any column, filter by category, search by name, and paginate through results.</p>
<p>Your first instinct might be to reach for a pre-built table component library with built-in styling. But you quickly discover that these "batteries-included" solutions come with significant limitations: they impose their own styling that conflicts with your design system, they bundle features you don't need (inflating your bundle size), and they make it difficult to customize behavior for your specific use case.</p>
<p>This is where <strong>TanStack Table</strong> (formerly React Table) shines. It's a <strong>headless UI library</strong>‚Äîit provides the logic and state management for tables without imposing any markup or styling. You bring your own UI components, and TanStack Table handles the complex state management, sorting algorithms, filtering logic, and pagination calculations.</p>
<p>Let's build this product inventory table from scratch, starting with a naive implementation to understand what problems we're solving.</p>
<h3 id="phase-1-the-naive-implementation">Phase 1: The Naive Implementation</h3>
<p>We'll start with a simple table that displays product data. This will be our <strong>reference implementation</strong> that we'll progressively enhance throughout this chapter.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/types/product.ts</span>
<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">sku</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">stock</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">lastUpdated</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTable.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Simulate API call</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">SKU</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Name</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Category</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Price</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Stock</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Last</span><span class="w"> </span><span class="nx">Updated</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">product</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">sku</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-500&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">stock</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-500&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">product</span><span class="p">.</span><span class="nx">lastUpdated</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">()}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>This works for displaying data, but it has no interactivity. Let's try to add sorting manually.</p>
<h3 id="iteration-1-manual-sorting-implementation">Iteration 1: Manual Sorting Implementation</h3>
<p><strong>Current limitation</strong>: Users can't sort the table by any column.</p>
<p><strong>New scenario</strong>: What happens when we try to add sorting by clicking column headers?</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTable.tsx - Attempt 1</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="kr">type</span><span class="w"> </span><span class="nx">SortField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyof</span><span class="w"> </span><span class="nx">Product</span><span class="p">;</span>
<span class="kr">type</span><span class="w"> </span><span class="nx">SortDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sortField</span><span class="p">,</span><span class="w"> </span><span class="nx">setSortField</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortField</span><span class="p">&gt;(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sortDirection</span><span class="p">,</span><span class="w"> </span><span class="nx">setSortDirection</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortDirection</span><span class="p">&gt;(</span><span class="s1">&#39;asc&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleSort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">field</span><span class="o">:</span><span class="w"> </span><span class="kt">SortField</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">field</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Toggle direction if clicking same field</span>
<span class="w">      </span><span class="nx">setSortDirection</span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// New field, default to ascending</span>
<span class="w">      </span><span class="nx">setSortField</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
<span class="w">      </span><span class="nx">setSortDirection</span><span class="p">(</span><span class="s1">&#39;asc&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="c1">// Sort products</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sortedProducts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">products</span><span class="p">].</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">aValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">sortField</span><span class="p">];</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">bValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">[</span><span class="nx">sortField</span><span class="p">];</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">aValue</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">bValue</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">-</span><span class="nx">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">aValue</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">bValue</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;sku&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">SKU</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Name</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Category</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Price</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;stock&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Stock</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">              </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleSort</span><span class="p">(</span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Last</span><span class="w"> </span><span class="nx">Updated</span><span class="w"> </span><span class="p">{</span><span class="nx">sortField</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">)}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">sortedProducts</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">product</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">sku</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-500&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">stock</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-500&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">product</span><span class="p">.</span><span class="nx">lastUpdated</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">()}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="diagnostic-analysis-the-failure-emerges">Diagnostic Analysis: The Failure Emerges</h3>
<p>Let's run this with 5,000 products and click a column header to sort.</p>
<p><strong>Browser Behavior</strong>:
The page freezes for 2-3 seconds. The UI becomes completely unresponsive. Eventually, the table re-renders with sorted data, but the user experience is terrible.</p>
<p><strong>Browser Console Output</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">Violation</span><span class="o">]</span><span class="w"> </span><span class="s1">&#39;click&#39;</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">2847</span><span class="n">ms</span>
</code></pre></div>

<p><strong>React DevTools - Profiler Tab</strong>:
- Recorded render: <code>ProductTable</code> took 2.8 seconds to render
- Reason: State changed (sortField)
- Flamegraph shows: Most time spent in the <code>sort()</code> operation and subsequent render of 5,000 table rows</p>
<p><strong>Chrome Performance Tab</strong>:
- Main thread blocked for 2.8 seconds
- Long Task warning: Task took 2847ms (blocking)
- Breakdown:
  - 800ms: Array sorting
  - 2000ms: React rendering 5,000 DOM nodes
  - 47ms: Browser layout and paint</p>
<p><strong>Let's parse this evidence</strong>:</p>
<ol>
<li><strong>What the user experiences</strong>:</li>
<li>Expected: Instant sort with smooth visual feedback</li>
<li>
<p>Actual: Complete UI freeze, no feedback, delayed result</p>
</li>
<li>
<p><strong>What the console reveals</strong>:</p>
</li>
<li>The click handler is synchronous and blocks the main thread</li>
<li>
<p>2.8 seconds is far beyond the 50ms threshold for responsive UI</p>
</li>
<li>
<p><strong>What DevTools shows</strong>:</p>
</li>
<li>The component re-renders all 5,000 rows on every sort</li>
<li>No optimization: every row is a new DOM node</li>
<li>
<p>The sort algorithm itself is inefficient for large datasets</p>
</li>
<li>
<p><strong>Root cause identified</strong>: 
   We're doing too much work on the main thread: sorting 5,000 items, then rendering 5,000 DOM nodes, all synchronously.</p>
</li>
<li>
<p><strong>Why the current approach can't solve this</strong>:
   Even if we optimize the sort algorithm, rendering 5,000 DOM nodes will always be slow. We need a fundamentally different approach: <strong>pagination</strong> (render fewer rows) and <strong>virtualization</strong> (render only visible rows).</p>
</li>
<li>
<p><strong>What we need</strong>:
   A table library that handles sorting efficiently, supports pagination out of the box, and provides the foundation for virtualization. Enter TanStack Table.</p>
</li>
</ol>
<h3 id="iteration-2-introducing-tanstack-table">Iteration 2: Introducing TanStack Table</h3>
<p><strong>Problem</strong>: Manual state management for sorting, filtering, and pagination is complex and error-prone. We're reinventing the wheel poorly.</p>
<p><strong>Solution</strong>: TanStack Table provides battle-tested logic for all table interactions while letting us control the UI completely.</p>
<p>First, install the library:</p>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>@tanstack/react-table
</code></pre></div>

<p>Now let's rebuild our table using TanStack Table's core concepts:</p>
<ol>
<li><strong>Column Definitions</strong>: Describe your columns declaratively</li>
<li><strong>Table Instance</strong>: Create a table instance with your data and columns</li>
<li><strong>Rendering</strong>: Use the table instance to render your UI</li>
</ol>
<p>Here's the TanStack Table version:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTable.tsx - TanStack Table version</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="c1">// Define columns - memoized to prevent recreation on every render</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last Updated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nb">Date</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Create table instance</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                  </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                  </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">                  </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                </span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                      </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                    </span><span class="p">)}</span>
<span class="w">                    </span><span class="p">{{</span>
<span class="w">                      </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                    </span><span class="p">}[</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="kc">null</span><span class="p">}</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">))}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">row</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                  </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                  </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                </span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">))}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="understanding-the-tanstack-table-architecture">Understanding the TanStack Table Architecture</h3>
<p>Let's break down what's happening here:</p>
<p><strong>1. Column Definitions (<code>ColumnDef&lt;Product&gt;[]</code>)</strong>:</p>
<p>Each column definition describes:
- <code>accessorKey</code>: Which property of your data to display
- <code>header</code>: What to show in the column header
- <code>cell</code>: How to render each cell (with access to the cell's value via <code>info.getValue()</code>)</p>
<p>The <code>useMemo</code> wrapper prevents recreating the column definitions on every render‚Äîthey're static configuration.</p>
<p><strong>2. Table Instance (<code>useReactTable</code>)</strong>:</p>
<p>This is the core of TanStack Table. You pass it:
- <code>data</code>: Your array of products
- <code>columns</code>: Your column definitions
- <code>state</code>: Current table state (sorting, filtering, pagination)
- <code>onSortingChange</code>: Callback when sorting changes
- <code>getCoreRowModel()</code>: Required - provides basic row model
- <code>getSortedRowModel()</code>: Optional - enables sorting</p>
<p>The table instance returns methods to access:
- Header groups (for rendering <code>&lt;thead&gt;</code>)
- Row model (for rendering <code>&lt;tbody&gt;</code>)
- Column state (for rendering sort indicators)</p>
<p><strong>3. Rendering with <code>flexRender</code></strong>:</p>
<p>Instead of directly rendering values, we use <code>flexRender</code> which handles both string headers and custom React components. This provides maximum flexibility‚Äîyou can pass a string, a React component, or a render function.</p>
<p><strong>4. Sorting State Management</strong>:</p>
<p>TanStack Table manages sorting state internally but lets you control it via the <code>sorting</code> state and <code>onSortingChange</code> callback. This follows React's controlled component pattern‚Äîyou own the state, TanStack Table tells you when to update it.</p>
<h3 id="verification-does-this-solve-the-performance-problem">Verification: Does This Solve the Performance Problem?</h3>
<p>Let's test with 5,000 products again.</p>
<p><strong>Browser Behavior</strong>:
Click a column header. The table sorts instantly‚Äîno perceptible delay.</p>
<p><strong>Browser Console Output</strong>:</p>
<div class="codehilite"><pre><span></span><code>(No violations)
</code></pre></div>

<p><strong>React DevTools - Profiler Tab</strong>:
- Recorded render: <code>ProductTable</code> took 2.1 seconds to render
- Wait, that's still slow! What's happening?</p>
<p><strong>Chrome Performance Tab</strong>:
- Main thread blocked for 2.1 seconds
- Long Task warning: Task took 2100ms
- Breakdown:
  - 50ms: Sorting (TanStack Table's optimized sort)
  - 2050ms: React rendering 5,000 DOM nodes</p>
<p><strong>Analysis</strong>:</p>
<p>TanStack Table solved the sorting performance problem‚Äîsorting is now fast. But we still have the rendering problem: 5,000 DOM nodes is too many to render at once.</p>
<p>The sorting feels instant because TanStack Table's algorithm is optimized. But the initial render and re-render after sorting still take 2+ seconds because we're rendering every single row.</p>
<p><strong>Limitation preview</strong>: This solves sorting efficiency, but we still need to address the rendering bottleneck. We'll tackle that with pagination in the next section.</p>
<h3 id="when-to-apply-tanstack-table">When to Apply TanStack Table</h3>
<p><strong>What it optimizes for</strong>:
- Separation of concerns: logic vs. UI
- Flexibility: complete control over markup and styling
- Type safety: full TypeScript support
- Extensibility: plugin-based architecture for features</p>
<p><strong>What it sacrifices</strong>:
- Initial setup time: more verbose than pre-styled components
- No built-in UI: you must build all visual elements</p>
<p><strong>When to choose this approach</strong>:
- You have a custom design system
- You need fine-grained control over table behavior
- You're building a complex table with many features
- You want to avoid bundle bloat from unused features</p>
<p><strong>When to avoid this approach</strong>:
- You need a table quickly and don't care about customization
- Your design matches an existing component library
- You're building a simple table with no interactivity</p>
<p><strong>Code characteristics</strong>:
- Setup complexity: Medium (column definitions, table instance)
- Maintenance burden: Low (declarative, well-typed)
- Performance impact: Excellent (optimized algorithms, minimal re-renders)</p>
<h2 id="pagination-sorting-and-filtering">Pagination, sorting, and filtering</h2>
<h2 id="solving-the-rendering-bottleneck">Solving the Rendering Bottleneck</h2>
<p>Our table now sorts efficiently, but it still renders 5,000 rows at once. This is the fundamental problem: <strong>the browser can't efficiently render thousands of DOM nodes simultaneously</strong>.</p>
<p>The solution is <strong>pagination</strong>: render only a subset of rows at a time. Users can navigate between pages to see more data.</p>
<h3 id="iteration-3-adding-pagination">Iteration 3: Adding Pagination</h3>
<p><strong>Current limitation</strong>: Rendering all 5,000 products at once causes a 2+ second render time.</p>
<p><strong>New scenario</strong>: What if we only render 50 products per page?</p>
<p>TanStack Table has built-in pagination support. Let's add it:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTable.tsx - With pagination</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getPaginationRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">PaginationState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">setPagination</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">PaginationState</span><span class="p">&gt;({</span>
<span class="w">    </span><span class="nx">pageIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pageSize</span><span class="o">:</span><span class="w"> </span><span class="kt">50</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last Updated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nb">Date</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">      </span><span class="nx">pagination</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onPaginationChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setPagination</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getPaginationRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getPaginationRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">                    </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                      </span><span class="p">)}</span>
<span class="w">                      </span><span class="p">{{</span>
<span class="w">                        </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                      </span><span class="p">}[</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="kc">null</span><span class="p">}</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">row</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Pagination controls */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">previousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">nextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-700&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="p">{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()}</span><span class="w"> </span><span class="p">({</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="nx">products</span><span class="p">)</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">          </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">          </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageSize</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))}</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded&quot;</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">pageSize</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="nx">Show</span><span class="w"> </span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="verification-performance-improvement">Verification: Performance Improvement</h3>
<p>Let's test with 5,000 products again.</p>
<p><strong>Browser Behavior</strong>:
The table loads instantly. Clicking sort is instant. Navigating between pages is instant. The UI is completely responsive.</p>
<p><strong>React DevTools - Profiler Tab</strong>:
- Initial render: <code>ProductTable</code> took 42ms
- Sort operation: 38ms
- Page navigation: 35ms</p>
<p><strong>Chrome Performance Tab</strong>:
- Main thread: No long tasks
- Initial render: 42ms (95% improvement from 2100ms)
- Breakdown:
  - 8ms: TanStack Table calculations
  - 34ms: React rendering 50 DOM nodes</p>
<p><strong>Expected vs. Actual improvement</strong>:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Before (5000 rows)</th>
<th>After (50 rows/page)</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initial render</td>
<td>2100ms</td>
<td>42ms</td>
<td>98% faster</td>
</tr>
<tr>
<td>Sort operation</td>
<td>2100ms</td>
<td>38ms</td>
<td>98% faster</td>
</tr>
<tr>
<td>User experience</td>
<td>Frozen UI</td>
<td>Instant response</td>
<td>‚úì</td>
</tr>
</tbody>
</table>
<p><strong>Analysis</strong>:</p>
<p>Pagination solved the rendering bottleneck completely. By rendering only 50 rows at a time, we reduced render time from 2+ seconds to under 50ms‚Äîwell within the threshold for responsive UI.</p>
<p>The key insight: <strong>The browser can render 50 DOM nodes efficiently. It cannot render 5,000 DOM nodes efficiently.</strong> Pagination is not just a UX pattern‚Äîit's a performance necessity for large datasets.</p>
<h3 id="understanding-pagination-state">Understanding Pagination State</h3>
<p>TanStack Table's pagination state consists of two values:</p>
<ol>
<li><strong><code>pageIndex</code></strong>: Zero-based current page number</li>
<li><strong><code>pageSize</code></strong>: Number of rows per page</li>
</ol>
<p>The table instance provides methods to:
- Navigate: <code>nextPage()</code>, <code>previousPage()</code>, <code>setPageIndex()</code>
- Query state: <code>getCanNextPage()</code>, <code>getCanPreviousPage()</code>, <code>getPageCount()</code>
- Configure: <code>setPageSize()</code></p>
<p>The <code>getPaginationRowModel()</code> function automatically slices your data based on the current page. You don't need to manually calculate which rows to display‚ÄîTanStack Table handles it.</p>
<h3 id="iteration-4-adding-filtering">Iteration 4: Adding Filtering</h3>
<p><strong>Current limitation</strong>: Users can't search or filter products. They must manually page through results to find what they need.</p>
<p><strong>New scenario</strong>: What if users want to filter by category or search by product name?</p>
<p>TanStack Table supports filtering through the <code>getFilteredRowModel()</code> function. Let's add both global search and column-specific filtering:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTable.tsx - With filtering</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getPaginationRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getFilteredRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">PaginationState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnFiltersState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">setPagination</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">PaginationState</span><span class="p">&gt;({</span>
<span class="w">    </span><span class="nx">pageIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pageSize</span><span class="o">:</span><span class="w"> </span><span class="kt">50</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">columnFilters</span><span class="p">,</span><span class="w"> </span><span class="nx">setColumnFilters</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">ColumnFiltersState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">globalFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// Enable column-specific filtering</span>
<span class="w">        </span><span class="nx">filterFn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;equals&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last Updated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nb">Date</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">      </span><span class="nx">pagination</span><span class="p">,</span>
<span class="w">      </span><span class="nx">columnFilters</span><span class="p">,</span>
<span class="w">      </span><span class="nx">globalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onPaginationChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setPagination</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onColumnFiltersChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setColumnFilters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onGlobalFilterChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setGlobalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getPaginationRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getPaginationRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getFilteredRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getFilteredRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Get unique categories for filter dropdown</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">categories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">uniqueCategories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">(</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">uniqueCategories</span><span class="p">).</span><span class="nx">sort</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Filter controls */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex gap-4 px-6 py-4 bg-white border border-gray-200 rounded&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex-1&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Search</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">columns</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">            </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">globalFilter</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">            </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search products...&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">          </span><span class="p">/&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-64&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Filter</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">category</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getFilterValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">              </span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">setFilterValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span><span class="nx">All</span><span class="w"> </span><span class="nx">categories</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">categories</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">category</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">                    </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                      </span><span class="p">)}</span>
<span class="w">                      </span><span class="p">{{</span>
<span class="w">                        </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                      </span><span class="p">}[</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="kc">null</span><span class="p">}</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">row</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Pagination controls */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">previousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">nextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-700&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="p">{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()}</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="w"> </span><span class="nx">filtered</span><span class="w"> </span><span class="kr">from</span><span class="p">{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="w"> </span><span class="nx">total</span><span class="p">)</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">          </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">          </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageSize</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))}</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded&quot;</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">pageSize</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="nx">Show</span><span class="w"> </span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="understanding-filtering-in-tanstack-table">Understanding Filtering in TanStack Table</h3>
<p>TanStack Table supports two types of filtering:</p>
<p><strong>1. Global Filter</strong>:
Searches across all columns simultaneously. Useful for general search functionality. Controlled via <code>globalFilter</code> state and <code>onGlobalFilterChange</code> callback.</p>
<p><strong>2. Column Filters</strong>:
Filter specific columns with custom logic. Each column can have its own filter function:
- <code>'equals'</code>: Exact match
- <code>'includesString'</code>: Case-insensitive substring match (default)
- <code>'includesStringSensitive'</code>: Case-sensitive substring match
- Custom functions: <code>(row, columnId, filterValue) =&gt; boolean</code></p>
<p>The <code>getFilteredRowModel()</code> function applies all active filters and returns only matching rows. Pagination then operates on the filtered results.</p>
<p><strong>Filter execution order</strong>:
1. Global filter applied first
2. Column filters applied to global filter results
3. Sorting applied to filtered results
4. Pagination applied to sorted, filtered results</p>
<p>This means users can combine filters: search globally for "laptop", filter by category "Electronics", sort by price, and paginate through results‚Äîall working together seamlessly.</p>
<h3 id="verification-filtering-performance">Verification: Filtering Performance</h3>
<p>Let's test filtering with 5,000 products.</p>
<p><strong>Browser Behavior</strong>:
Type "laptop" in the search box. Results filter instantly. Select "Electronics" category. Results filter instantly. The UI remains responsive throughout.</p>
<p><strong>React DevTools - Profiler Tab</strong>:
- Global filter change: 45ms
- Column filter change: 38ms
- Combined filters: 52ms</p>
<p><strong>Analysis</strong>:</p>
<p>Filtering is fast because:
1. TanStack Table's filter algorithms are optimized
2. We're only rendering the filtered results (still paginated to 50 rows)
3. React only re-renders the table body, not the entire component</p>
<p>The key insight: <strong>Filtering reduces the dataset before pagination</strong>, so we're still only rendering 50 rows even if 2,000 products match the filter.</p>
<h3 id="common-failure-modes-and-their-signatures">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-filtering-is-slow-500ms-delay">Symptom: Filtering is slow (&gt;500ms delay)</h4>
<p><strong>Browser behavior</strong>:
Typing in the search box feels laggy. Each keystroke causes a noticeable pause.</p>
<p><strong>Console pattern</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">Violation</span><span class="o">]</span><span class="w"> </span><span class="s1">&#39;input&#39;</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">847</span><span class="n">ms</span>
</code></pre></div>

<p><strong>DevTools clues</strong>:
- Profiler shows long render time
- Many components re-rendering unnecessarily</p>
<p><strong>Root cause</strong>: 
You're not debouncing the filter input. Every keystroke triggers a full filter + re-render cycle.</p>
<p><strong>Solution</strong>: 
Debounce the filter input:</p>
<div class="codehilite"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDeferredValue</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">filterInput</span><span class="p">,</span><span class="w"> </span><span class="nx">setFilterInput</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deferredFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDeferredValue</span><span class="p">(</span><span class="nx">filterInput</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Use deferredFilter for the table, filterInput for the input value</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">globalFilter</span><span class="o">:</span><span class="w"> </span><span class="kt">deferredFilter</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">      </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">filterInput</span><span class="p">}</span>
<span class="w">      </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setFilterInput</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">    </span><span class="p">/&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="symptom-pagination-resets-to-page-1-when-filtering">Symptom: Pagination resets to page 1 when filtering</h4>
<p><strong>Browser behavior</strong>:
User is on page 5, applies a filter, and suddenly they're back on page 1.</p>
<p><strong>Root cause</strong>: 
This is actually correct behavior‚Äîwhen the filtered dataset changes, the current page might not exist anymore. If you had 100 pages and filter down to 2 pages, staying on page 5 would show nothing.</p>
<p><strong>Solution</strong>: 
This is expected. TanStack Table automatically resets to page 0 when filters change. If you want different behavior, you can manually control it:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="w">  </span><span class="nx">autoResetPageIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// Disable automatic reset</span>
<span class="p">});</span>
</code></pre></div>

<p>But be aware: this can lead to showing empty pages if the filtered results have fewer pages than the current page index.</p>
<h4 id="symptom-filter-doesnt-work-on-custom-cell-renderers">Symptom: Filter doesn't work on custom cell renderers</h4>
<p><strong>Browser behavior</strong>:
You have a price column that displays "$99.99" but filtering by "99.99" returns no results.</p>
<p><strong>Root cause</strong>: 
The filter operates on the raw data value, not the formatted display value.</p>
<p><strong>Solution</strong>: 
Use a custom filter function that handles your data format:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">  </span><span class="nx">filterFn</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">row</span><span class="p">,</span><span class="w"> </span><span class="nx">columnId</span><span class="p">,</span><span class="w"> </span><span class="nx">filterValue</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">row</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="nx">columnId</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">searchValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filterValue</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">price</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">searchValue</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="virtual-scrolling-for-large-lists">Virtual scrolling for large lists</h2>
<h2 id="when-pagination-isnt-enough">When Pagination Isn't Enough</h2>
<p>Pagination works well for most use cases, but sometimes users need to see all data at once without clicking through pages. Examples:</p>
<ul>
<li>Financial dashboards showing real-time stock prices</li>
<li>Log viewers displaying thousands of log entries</li>
<li>Infinite scroll social media feeds</li>
<li>Data analysis tools where users need to scan large datasets</li>
</ul>
<p>For these scenarios, we need <strong>virtual scrolling</strong> (also called <strong>windowing</strong>): render only the rows currently visible in the viewport, plus a small buffer. As the user scrolls, we dynamically render new rows and unmount off-screen rows.</p>
<h3 id="the-problem-rendering-10000-rows">The Problem: Rendering 10,000 Rows</h3>
<p>Let's say our product table needs to display all 10,000 products in a single scrollable list (no pagination). What happens?</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTableInfinite.tsx - Naive infinite scroll</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTableInfinite</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Fetch all 10,000 products</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products?limit=10000&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-screen overflow-auto&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50 sticky top-0&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">SKU</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Name</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Category</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Price</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">th</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span><span class="p">&gt;</span>
<span class="w">              </span><span class="nx">Stock</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">product</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">sku</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="nx">$</span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">price</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">td</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">product</span><span class="p">.</span><span class="nx">stock</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="diagnostic-analysis-the-catastrophic-failure">Diagnostic Analysis: The Catastrophic Failure</h3>
<p>Let's run this with 10,000 products.</p>
<p><strong>Browser Behavior</strong>:
The page freezes for 8-10 seconds. The browser shows "Page Unresponsive" warning. Eventually the table renders, but scrolling is janky‚Äîit stutters and lags. The browser tab uses 800+ MB of memory.</p>
<p><strong>Browser Console Output</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">Violation</span><span class="o">]</span><span class="w"> </span><span class="s1">&#39;load&#39;</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">9847</span><span class="n">ms</span>
<span class="o">[</span><span class="n">Violation</span><span class="o">]</span><span class="w"> </span><span class="n">Forced</span><span class="w"> </span><span class="n">reflow</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">JavaScript</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">234</span><span class="n">ms</span>
<span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">Detected</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">large</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">DOM</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="p">(</span><span class="mi">10000</span><span class="o">+</span><span class="p">).</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">performance</span><span class="w"> </span><span class="n">issues</span><span class="p">.</span>
</code></pre></div>

<p><strong>Chrome Performance Tab</strong>:
- Main thread blocked for 9.8 seconds during initial render
- Long Task: 9847ms
- Memory: 847 MB allocated
- Breakdown:
  - 1200ms: React creating virtual DOM
  - 3400ms: React reconciliation
  - 5200ms: Browser creating 10,000 DOM nodes
  - 47ms: Layout and paint</p>
<p><strong>Chrome Memory Profiler</strong>:
- Heap snapshot: 847 MB
- DOM nodes: 10,247 (table + rows + cells)
- Detached DOM nodes: 0 (all still attached)</p>
<p><strong>Scrolling Performance</strong>:
- Scroll event handler: 120ms per scroll (should be &lt;16ms for 60fps)
- Janky frames: 78% of frames dropped
- Reason: Browser must repaint 10,000 DOM nodes on every scroll</p>
<p><strong>Let's parse this evidence</strong>:</p>
<ol>
<li><strong>What the user experiences</strong>:</li>
<li>Expected: Smooth scrolling through products</li>
<li>
<p>Actual: 10-second freeze, then janky scrolling, browser warning</p>
</li>
<li>
<p><strong>What the console reveals</strong>:</p>
</li>
<li>The load handler (initial render) took nearly 10 seconds</li>
<li>Forced reflows indicate layout thrashing</li>
<li>
<p>React itself warns about too many DOM nodes</p>
</li>
<li>
<p><strong>What DevTools shows</strong>:</p>
</li>
<li>10,000+ DOM nodes in memory</li>
<li>Each scroll event triggers expensive repaints</li>
<li>
<p>Memory usage is unsustainable for larger datasets</p>
</li>
<li>
<p><strong>Root cause identified</strong>: 
   The browser cannot efficiently manage 10,000 DOM nodes. Creating them is slow, keeping them in memory is expensive, and repainting them on scroll is impossible to do at 60fps.</p>
</li>
<li>
<p><strong>Why the current approach can't solve this</strong>:
   No amount of React optimization will help. The fundamental problem is that we're asking the browser to do something it's not designed for: manage thousands of DOM nodes simultaneously.</p>
</li>
<li>
<p><strong>What we need</strong>:
   A technique that renders only the visible rows, dynamically creating and destroying DOM nodes as the user scrolls. This is <strong>virtual scrolling</strong>.</p>
</li>
</ol>
<h3 id="iteration-5-introducing-tanstack-virtual">Iteration 5: Introducing TanStack Virtual</h3>
<p>TanStack Virtual (formerly React Virtual) is a headless virtualization library that pairs perfectly with TanStack Table. It calculates which rows are visible and provides the measurements needed to create a smooth scrolling experience.</p>
<p>Install the library:</p>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span>@tanstack/react-virtual
</code></pre></div>

<p>Now let's rebuild our infinite scroll table with virtualization:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTableVirtual.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">,</span><span class="w"> </span><span class="nx">useRef</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useVirtualizer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-virtual&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTableVirtual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>

<span class="w">  </span><span class="c1">// Ref for the scrollable container</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tableContainerRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products?limit=10000&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">120</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">250</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">150</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">100</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">100</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">rows</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Create virtualizer</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">rowVirtualizer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useVirtualizer</span><span class="p">({</span>
<span class="w">    </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="kt">rows.length</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getScrollElement</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">tableContainerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span>
<span class="w">    </span><span class="nx">estimateSize</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span><span class="w"> </span><span class="c1">// Estimated row height in pixels</span>
<span class="w">    </span><span class="nx">overscan</span><span class="o">:</span><span class="w"> </span><span class="kt">10</span><span class="p">,</span><span class="w"> </span><span class="c1">// Render 10 extra rows above and below viewport</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">      </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">tableContainerRef</span><span class="p">}</span>
<span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;h-screen overflow-auto&quot;</span>
<span class="w">    </span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">rowVirtualizer</span><span class="p">.</span><span class="nx">getTotalSize</span><span class="p">()</span><span class="si">}</span><span class="sb">px`</span><span class="p">,</span><span class="w"> </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;relative&#39;</span><span class="w"> </span><span class="p">}}&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">table</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50 sticky top-0 z-10&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">header.getSize</span><span class="p">()</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100&quot;</span>
<span class="w">                    </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                      </span><span class="p">)}</span>
<span class="w">                      </span><span class="p">{{</span>
<span class="w">                        </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                      </span><span class="p">}[</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="kc">null</span><span class="p">}</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">rowVirtualizer</span><span class="p">.</span><span class="nx">getVirtualItems</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">virtualRow</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="kd">const</span><span class="w"> </span><span class="nx">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rows</span><span class="p">[</span><span class="nx">virtualRow</span><span class="p">.</span><span class="nx">index</span><span class="p">];</span>
<span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="p">&lt;</span><span class="nt">tr</span>
<span class="w">                  </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                  </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span>
<span class="w">                    </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">virtualRow</span><span class="p">.</span><span class="nx">size</span><span class="si">}</span><span class="sb">px`</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">transform</span><span class="o">:</span><span class="w"> </span><span class="sb">`translateY(</span><span class="si">${</span><span class="nx">virtualRow</span><span class="p">.</span><span class="nx">start</span><span class="si">}</span><span class="sb">px)`</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;absolute&#39;</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;100%&#39;</span><span class="p">,</span>
<span class="w">                  </span><span class="p">}}</span>
<span class="w">                </span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                      </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                      </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">cell.column.getSize</span><span class="p">()</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                    </span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">))}</span>
<span class="w">                </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">);</span>
<span class="w">            </span><span class="p">})}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="understanding-virtual-scrolling">Understanding Virtual Scrolling</h3>
<p>Let's break down how TanStack Virtual works:</p>
<p><strong>1. The Virtualizer Instance</strong>:</p>
<p><code>useVirtualizer</code> creates a virtualizer that tracks:
- Total number of items (<code>count: rows.length</code>)
- The scrollable container (<code>getScrollElement</code>)
- Estimated size of each item (<code>estimateSize: () =&gt; 53</code>)
- How many extra items to render (<code>overscan: 10</code>)</p>
<p><strong>2. Virtual Items</strong>:</p>
<p><code>rowVirtualizer.getVirtualItems()</code> returns only the items that should be rendered right now. For a viewport showing 20 rows, it might return 40 items (20 visible + 10 overscan above + 10 overscan below).</p>
<p><strong>3. Positioning</strong>:</p>
<p>Each virtual item has:
- <code>index</code>: Position in the full dataset
- <code>start</code>: Pixel offset from the top
- <code>size</code>: Height in pixels</p>
<p>We use <code>transform: translateY()</code> to position each row at the correct scroll offset. This is more performant than using <code>top</code> because it doesn't trigger layout recalculation.</p>
<p><strong>4. Total Size</strong>:</p>
<p><code>rowVirtualizer.getTotalSize()</code> returns the total height of all items. We set this as the height of the container so the scrollbar reflects the full dataset size, even though we're only rendering a fraction of the rows.</p>
<p><strong>5. Overscan</strong>:</p>
<p>The <code>overscan</code> parameter renders extra rows above and below the viewport. This prevents blank flashes when scrolling quickly‚Äîby the time a row enters the viewport, it's already rendered.</p>
<h3 id="verification-virtual-scrolling-performance">Verification: Virtual Scrolling Performance</h3>
<p>Let's test with 10,000 products.</p>
<p><strong>Browser Behavior</strong>:
The table loads in under 100ms. Scrolling is buttery smooth‚Äîno jank, no lag. The browser tab uses only 120 MB of memory.</p>
<p><strong>Browser Console Output</strong>:</p>
<div class="codehilite"><pre><span></span><code>(No violations, no warnings)
</code></pre></div>

<p><strong>React DevTools - Profiler Tab</strong>:
- Initial render: 87ms
- Scroll event: 3-5ms per scroll
- Rows rendered: 40 (out of 10,000)</p>
<p><strong>Chrome Performance Tab</strong>:
- Main thread: No long tasks
- Initial render: 87ms
- Scroll performance: 60fps maintained
- Memory: 124 MB allocated
- Breakdown:
  - 45ms: React creating virtual DOM for 40 rows
  - 42ms: Browser creating 40 DOM nodes</p>
<p><strong>Chrome Memory Profiler</strong>:
- Heap snapshot: 124 MB (85% reduction from 847 MB)
- DOM nodes: 247 (table + 40 rows + cells)
- Detached DOM nodes: 0</p>
<p><strong>Expected vs. Actual improvement</strong>:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Before (10k rows)</th>
<th>After (virtual)</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initial render</td>
<td>9847ms</td>
<td>87ms</td>
<td>99% faster</td>
</tr>
<tr>
<td>Memory usage</td>
<td>847 MB</td>
<td>124 MB</td>
<td>85% reduction</td>
</tr>
<tr>
<td>DOM nodes</td>
<td>10,247</td>
<td>247</td>
<td>98% reduction</td>
</tr>
<tr>
<td>Scroll performance</td>
<td>12fps (janky)</td>
<td>60fps (smooth)</td>
<td>5x better</td>
</tr>
<tr>
<td>User experience</td>
<td>Frozen, unusable</td>
<td>Instant, smooth</td>
<td>‚úì</td>
</tr>
</tbody>
</table>
<p><strong>Analysis</strong>:</p>
<p>Virtual scrolling solved the performance problem completely. By rendering only 40 rows at a time (instead of 10,000), we:</p>
<ol>
<li>Reduced initial render time by 99%</li>
<li>Reduced memory usage by 85%</li>
<li>Achieved smooth 60fps scrolling</li>
<li>Made the UI instantly responsive</li>
</ol>
<p>The key insight: <strong>The browser doesn't need to know about rows that aren't visible.</strong> Virtual scrolling is an illusion‚Äîwe create the appearance of a 10,000-row table while only rendering what's on screen.</p>
<h3 id="when-to-apply-virtual-scrolling">When to Apply Virtual Scrolling</h3>
<p><strong>What it optimizes for</strong>:
- Rendering performance with large datasets (1000+ items)
- Memory efficiency
- Smooth scrolling experience
- Ability to display all data without pagination</p>
<p><strong>What it sacrifices</strong>:
- Implementation complexity (more code than simple lists)
- Fixed or estimated item heights (dynamic heights are harder)
- Accessibility considerations (screen readers see fewer items)
- Search-in-page functionality (browser can't find off-screen text)</p>
<p><strong>When to choose this approach</strong>:
- Dataset has 1000+ items
- Users need to scan/scroll through all data
- Pagination would hurt the user experience
- Items have consistent or predictable heights</p>
<p><strong>When to avoid this approach</strong>:
- Dataset has &lt;500 items (simple rendering is fine)
- Pagination is acceptable to users
- Items have highly variable heights
- Accessibility is critical (screen readers struggle with virtual scrolling)</p>
<p><strong>Code characteristics</strong>:
- Setup complexity: High (virtualizer + positioning logic)
- Maintenance burden: Medium (must handle edge cases)
- Performance impact: Excellent (constant-time rendering regardless of dataset size)</p>
<h3 id="common-failure-modes-and-their-signatures_1">Common Failure Modes and Their Signatures</h3>
<h4 id="symptom-blank-space-or-flickering-during-fast-scrolling">Symptom: Blank space or flickering during fast scrolling</h4>
<p><strong>Browser behavior</strong>:
When scrolling quickly, you see blank rows or rows that flicker in and out.</p>
<p><strong>Root cause</strong>: 
The <code>overscan</code> value is too low. Rows aren't rendered before they enter the viewport.</p>
<p><strong>Solution</strong>: 
Increase the overscan:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">rowVirtualizer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useVirtualizer</span><span class="p">({</span>
<span class="w">  </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="kt">rows.length</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getScrollElement</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">tableContainerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span>
<span class="w">  </span><span class="nx">estimateSize</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span>
<span class="w">  </span><span class="nx">overscan</span><span class="o">:</span><span class="w"> </span><span class="kt">20</span><span class="p">,</span><span class="w"> </span><span class="c1">// Increased from 10</span>
<span class="p">});</span>
</code></pre></div>

<p>Higher overscan = more rows rendered = smoother scrolling but slightly higher memory usage. Find the balance for your use case.</p>
<h4 id="symptom-rows-have-wrong-heights-or-overlap">Symptom: Rows have wrong heights or overlap</h4>
<p><strong>Browser behavior</strong>:
Some rows are taller than others, causing overlapping or gaps.</p>
<p><strong>Root cause</strong>: 
The <code>estimateSize</code> doesn't match actual row heights, and you haven't provided a way to measure actual heights.</p>
<p><strong>Solution</strong>: 
Use dynamic measurement:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">rowVirtualizer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useVirtualizer</span><span class="p">({</span>
<span class="w">  </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="kt">rows.length</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getScrollElement</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">tableContainerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span>
<span class="w">  </span><span class="nx">estimateSize</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span>
<span class="w">  </span><span class="nx">measureElement</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">element</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">element</span><span class="o">?</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">height</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span>
<span class="w">  </span><span class="nx">overscan</span><span class="o">:</span><span class="w"> </span><span class="kt">10</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// In your render:</span>
<span class="p">&lt;</span><span class="nt">tr</span>
<span class="w">  </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">  </span><span class="na">data-index</span><span class="o">=</span><span class="p">{</span><span class="nx">virtualRow</span><span class="p">.</span><span class="nx">index</span><span class="p">}</span>
<span class="w">  </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">rowVirtualizer</span><span class="p">.</span><span class="nx">measureElement</span><span class="p">}</span>
<span class="w">  </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span>
<span class="w">    </span><span class="nx">transform</span><span class="o">:</span><span class="w"> </span><span class="sb">`translateY(</span><span class="si">${</span><span class="nx">virtualRow</span><span class="p">.</span><span class="nx">start</span><span class="si">}</span><span class="sb">px)`</span><span class="p">,</span>
<span class="w">    </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;absolute&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;100%&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}}</span>
<span class="p">&gt;</span>
</code></pre></div>

<p>The <code>measureElement</code> callback tells the virtualizer to measure each row's actual height after rendering.
</markdown></p>
<p><markdown></p>
<h4 id="symptom-scrollbar-jumps-or-behaves-erratically">Symptom: Scrollbar jumps or behaves erratically</h4>
<p><strong>Browser behavior</strong>:
The scrollbar position jumps around when scrolling. The scrollbar size changes unexpectedly.</p>
<p><strong>Root cause</strong>: 
The total size calculation is wrong, usually because <code>estimateSize</code> is far from actual row heights.</p>
<p><strong>Solution</strong>: 
Provide more accurate size estimates or use dynamic measurement (see above). If rows have consistent heights, measure one row and use that exact value:
</markdown></p>
<p>const rowVirtualizer = useVirtualizer({
  count: rows.length,
  getScrollElement: () =&gt; tableContainerRef.current,
  estimateSize: () =&gt; 53, // Measured from actual rendered row
  overscan: 10,
});</p>
<div class="codehilite"><pre><span></span><code><span class="err">####</span><span class="w"> </span><span class="nt">Symptom</span><span class="o">:</span><span class="w"> </span><span class="nt">Virtual</span><span class="w"> </span><span class="nt">scrolling</span><span class="w"> </span><span class="nt">breaks</span><span class="w"> </span><span class="nt">with</span><span class="w"> </span><span class="nt">sorting</span><span class="o">/</span><span class="nt">filtering</span>

<span class="o">**</span><span class="nt">Browser</span><span class="w"> </span><span class="nt">behavior</span><span class="o">**:</span>
<span class="nt">After</span><span class="w"> </span><span class="nt">sorting</span><span class="w"> </span><span class="nt">or</span><span class="w"> </span><span class="nt">filtering</span><span class="o">,</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">scroll</span><span class="w"> </span><span class="nt">position</span><span class="w"> </span><span class="nt">jumps</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">top</span><span class="w"> </span><span class="nt">or</span><span class="w"> </span><span class="nt">rows</span><span class="w"> </span><span class="nt">render</span><span class="w"> </span><span class="nt">incorrectly</span><span class="o">.</span>

<span class="o">**</span><span class="nt">Root</span><span class="w"> </span><span class="nt">cause</span><span class="o">**:</span><span class="w"> </span>
<span class="nt">The</span><span class="w"> </span><span class="nt">virtualizer</span><span class="w"> </span><span class="nt">doesn</span><span class="s1">&#39;t know the data changed. It&#39;</span><span class="nt">s</span><span class="w"> </span><span class="nt">still</span><span class="w"> </span><span class="nt">using</span><span class="w"> </span><span class="nt">old</span><span class="w"> </span><span class="nt">measurements</span><span class="o">.</span>

<span class="o">**</span><span class="nt">Solution</span><span class="o">**:</span><span class="w"> </span>
<span class="nt">Reset</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">virtualizer</span><span class="w"> </span><span class="nt">when</span><span class="w"> </span><span class="nt">data</span><span class="w"> </span><span class="nt">changes</span><span class="o">:</span>

<span class="err">```</span><span class="nt">tsx</span>
<span class="nt">useEffect</span><span class="o">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">rowVirtualizer.scrollToIndex(0)</span><span class="p">;</span>
<span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="cp">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">columnFilters</span><span class="cp">]</span><span class="o">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">Reset</span><span class="w"> </span><span class="nt">scroll</span><span class="w"> </span><span class="nt">position</span><span class="w"> </span><span class="nt">when</span><span class="w"> </span><span class="nt">data</span><span class="w"> </span><span class="nt">changes</span>
</code></pre></div>

<h2 id="accessible-keyboard-navigable-interfaces">Accessible, keyboard-navigable interfaces</h2>
<h2 id="the-accessibility-crisis-in-data-tables">The Accessibility Crisis in Data Tables</h2>
<p>We've built a high-performance data table with sorting, filtering, pagination, and virtual scrolling. But we've created an accessibility nightmare. Let's test it with a screen reader and keyboard-only navigation.</p>
<h3 id="diagnostic-analysis-the-accessibility-failure">Diagnostic Analysis: The Accessibility Failure</h3>
<p><strong>Testing with NVDA screen reader (Windows)</strong>:</p>
<ol>
<li>Tab to the table</li>
<li>Screen reader announces: "Table with 5 columns"</li>
<li>Try to navigate with arrow keys</li>
<li>Nothing happens‚Äîfocus stays on the first cell</li>
<li>Try to activate sort on a column header</li>
<li>Screen reader doesn't announce the sort direction</li>
<li>Try to use the pagination controls</li>
<li>Screen reader announces "Button" with no context about what the button does</li>
</ol>
<p><strong>Testing with keyboard only (no mouse)</strong>:</p>
<ol>
<li>Tab through the page</li>
<li>Focus goes to search input ‚úì</li>
<li>Tab to category filter ‚úì</li>
<li>Tab to table... focus disappears</li>
<li>Can't navigate between table cells</li>
<li>Can't activate column sorting</li>
<li>Tab to pagination... buttons work but no indication of current page</li>
<li>Can't tell which page you're on without looking</li>
</ol>
<p><strong>Lighthouse Accessibility Audit</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">Accessibility</span><span class="w"> </span><span class="nx">Score</span><span class="p">:</span><span class="w"> </span><span class="mi">67</span><span class="o">/</span><span class="mi">100</span>

<span class="nx">Issues</span><span class="w"> </span><span class="nx">found</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="nx">aria</span><span class="o">-</span><span class="nx">sort</span><span class="p">]</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">present</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">sortable</span><span class="w"> </span><span class="nx">column</span><span class="w"> </span><span class="nx">headers</span>
<span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="nx">role</span><span class="p">=</span><span class="s">&quot;grid&quot;</span><span class="p">]</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">present</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">interactive</span><span class="w"> </span><span class="nx">table</span>
<span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="nx">aria</span><span class="o">-</span><span class="nx">rowcount</span><span class="p">]</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">present</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="kd">virtual</span><span class="w"> </span><span class="nx">scrolling</span>
<span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="p">]</span><span class="w"> </span><span class="nx">missing</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">pagination</span><span class="w"> </span><span class="nx">buttons</span>
<span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="nx">aria</span><span class="o">-</span><span class="nx">live</span><span class="p">]</span><span class="w"> </span><span class="nx">region</span><span class="w"> </span><span class="nx">missing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">dynamic</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="nx">updates</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Keyboard</span><span class="w"> </span><span class="nx">navigation</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="nx">cells</span>
<span class="o">-</span><span class="w"> </span><span class="nx">Focus</span><span class="w"> </span><span class="nx">indicators</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">visible</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">interactive</span><span class="w"> </span><span class="nx">elements</span>
</code></pre></div>

<p><strong>WCAG 2.1 Violations</strong>:
- <strong>2.1.1 Keyboard (Level A)</strong>: Table cells not keyboard navigable
- <strong>2.4.3 Focus Order (Level A)</strong>: Focus order is not logical
- <strong>4.1.2 Name, Role, Value (Level A)</strong>: Interactive elements lack proper ARIA attributes
- <strong>4.1.3 Status Messages (Level AA)</strong>: No announcements for dynamic content changes</p>
<p><strong>Let's parse this evidence</strong>:</p>
<ol>
<li><strong>What the user experiences</strong>:</li>
<li>Expected: Full keyboard navigation, clear screen reader announcements</li>
<li>
<p>Actual: Keyboard navigation broken, screen reader provides minimal information</p>
</li>
<li>
<p><strong>What the audit reveals</strong>:</p>
</li>
<li>Missing ARIA attributes for interactive elements</li>
<li>No keyboard navigation implementation</li>
<li>
<p>No announcements for dynamic content changes</p>
</li>
<li>
<p><strong>Root cause identified</strong>: 
   We built the table for mouse users only. We didn't consider keyboard users or screen reader users.</p>
</li>
<li>
<p><strong>Why this matters</strong>:</p>
</li>
<li>15% of web users have some form of disability</li>
<li>Keyboard-only users include power users who prefer keyboard efficiency</li>
<li>Legal requirement in many jurisdictions (ADA, Section 508, WCAG)</li>
<li>
<p>Good accessibility often improves usability for everyone</p>
</li>
<li>
<p><strong>What we need</strong>:
   Proper ARIA attributes, keyboard navigation, focus management, and screen reader announcements.</p>
</li>
</ol>
<h3 id="iteration-6-making-the-table-accessible">Iteration 6: Making the Table Accessible</h3>
<p>Let's rebuild our table with accessibility as a first-class concern. We'll focus on the paginated version (virtual scrolling + accessibility is complex and beyond this chapter's scope).</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTableAccessible.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">,</span><span class="w"> </span><span class="nx">useRef</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getPaginationRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getFilteredRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">PaginationState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnFiltersState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTableAccessible</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">setPagination</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">PaginationState</span><span class="p">&gt;({</span>
<span class="w">    </span><span class="nx">pageIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pageSize</span><span class="o">:</span><span class="w"> </span><span class="kt">50</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">columnFilters</span><span class="p">,</span><span class="w"> </span><span class="nx">setColumnFilters</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">ColumnFiltersState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">globalFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Refs for announcements</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">announcementRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">filterFn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;equals&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last Updated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nb">Date</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">      </span><span class="nx">pagination</span><span class="p">,</span>
<span class="w">      </span><span class="nx">columnFilters</span><span class="p">,</span>
<span class="w">      </span><span class="nx">globalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onPaginationChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setPagination</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onColumnFiltersChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setColumnFilters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onGlobalFilterChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setGlobalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getPaginationRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getPaginationRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getFilteredRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getFilteredRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">categories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">uniqueCategories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">(</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">uniqueCategories</span><span class="p">).</span><span class="nx">sort</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Announce changes to screen readers</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">announce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">announcementRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">announcementRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">message</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="c1">// Announce sorting changes</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">sorting</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sorting</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">      </span><span class="nx">announce</span><span class="p">(</span>
<span class="w">        </span><span class="sb">`Table sorted by </span><span class="si">${</span><span class="nx">sort</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb"> in </span><span class="si">${</span><span class="nx">sort</span><span class="p">.</span><span class="nx">desc</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span><span class="si">}</span><span class="sb"> order`</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Announce filter changes</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">filteredCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">globalFilter</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">columnFilters</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">announce</span><span class="p">(</span><span class="sb">`Showing </span><span class="si">${</span><span class="nx">filteredCount</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> products`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">globalFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">columnFilters</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">table</span><span class="p">]);</span>

<span class="w">  </span><span class="c1">// Announce page changes</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">pageIndex</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pagination</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">pageCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">();</span>
<span class="w">    </span><span class="nx">announce</span><span class="p">(</span><span class="sb">`Page </span><span class="si">${</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">pageCount</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">table</span><span class="p">]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Screen reader announcements */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">        </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">announcementRef</span><span class="p">}</span>
<span class="w">        </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span>
<span class="w">        </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span>
<span class="w">        </span><span class="na">aria-atomic</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span>
<span class="w">      </span><span class="p">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Filter controls */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex gap-4 px-6 py-4 bg-white border border-gray-200 rounded&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex-1&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span>
<span class="w">            </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;global-search&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Search</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">columns</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;global-search&quot;</span>
<span class="w">            </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">globalFilter</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">            </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search products...&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-describedby</span><span class="o">=</span><span class="s">&quot;search-description&quot;</span>
<span class="w">          </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;search-description&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Search</span><span class="w"> </span><span class="nx">across</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="nx">fields</span><span class="w"> </span><span class="nx">including</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">SKU</span><span class="p">,</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">category</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-64&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span>
<span class="w">            </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;category-filter&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Filter</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">category</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;category-filter&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getFilterValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">              </span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">setFilterValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span><span class="nx">All</span><span class="w"> </span><span class="nx">categories</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">categories</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">category</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Table */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">table</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span>
<span class="w">          </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;table&quot;</span>
<span class="w">          </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Product inventory&quot;</span>
<span class="w">          </span><span class="na">aria-rowcount</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">();</span>
<span class="w">                  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                      </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                      </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;columnheader&quot;</span>
<span class="w">                      </span><span class="na">aria-sort</span><span class="o">=</span><span class="p">{</span>
<span class="w">                        </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span>
<span class="w">                          </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span>
<span class="w">                          </span><span class="o">:</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span>
<span class="w">                          </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span>
<span class="w">                          </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;none&#39;</span>
<span class="w">                      </span><span class="p">}</span>
<span class="w">                      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase&quot;</span>
<span class="w">                    </span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">                        </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded&quot;</span>
<span class="w">                        </span><span class="na">aria-label</span><span class="o">=</span><span class="p">{</span><span class="sb">`Sort by </span><span class="si">${</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="si">}${</span>
<span class="w">                          </span><span class="nx">sortDirection</span>
<span class="w">                            </span><span class="o">?</span><span class="w"> </span><span class="sb">`, currently sorted </span><span class="si">${</span>
<span class="w">                                </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span>
<span class="w">                              </span><span class="si">}</span><span class="sb">`</span>
<span class="w">                            </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
<span class="w">                        </span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">                      </span><span class="p">&gt;</span>
<span class="w">                        </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                          </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                          </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                        </span><span class="p">)}</span>
<span class="w">                        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">aria-hidden</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="p">&gt;</span>
<span class="w">                          </span><span class="p">{{</span>
<span class="w">                            </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                            </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                          </span><span class="p">}[</span><span class="nx">sortDirection</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;‚Üï&#39;</span><span class="p">}</span>
<span class="w">                        </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">);</span>
<span class="w">                </span><span class="p">})}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">row</span><span class="p">,</span><span class="w"> </span><span class="nx">rowIndex</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span>
<span class="w">                </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;row&quot;</span>
<span class="w">                </span><span class="na">aria-rowindex</span><span class="o">=</span><span class="p">{</span>
<span class="w">                  </span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">rowIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                    </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                    </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;cell&quot;</span>
<span class="w">                    </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                  </span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                  </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Pagination controls */</span><span class="p">}</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">nav</span>
<span class="w">        </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Table pagination&quot;</span>
<span class="w">        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200&quot;</span>
<span class="w">      </span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to first page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">previousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to previous page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">nextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to next page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to last page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">          </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span>
<span class="w">          </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-700&quot;</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="p">{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()}</span><span class="w"> </span><span class="p">({</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span>
<span class="w">            </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;total&#39;</span>
<span class="w">            </span><span class="o">:</span><span class="w"> </span><span class="sb">`filtered from </span><span class="si">${</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> total`</span><span class="p">}{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="nx">products</span><span class="p">)</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span><span class="w"> </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;page-size&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Rows</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">page</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;page-size&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageSize</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Select number of rows per page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">pageSize</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="nx">Show</span><span class="w"> </span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="understanding-the-accessibility-improvements">Understanding the Accessibility Improvements</h3>
<p>Let's break down what we added:</p>
<p><strong>1. ARIA Roles and Attributes</strong>:</p>
<ul>
<li><code>role="table"</code>: Explicitly marks the table for screen readers</li>
<li><code>role="columnheader"</code>: Marks column headers</li>
<li><code>role="row"</code> and <code>role="cell"</code>: Marks rows and cells</li>
<li><code>aria-sort</code>: Announces sort direction on column headers</li>
<li><code>aria-rowcount</code>: Total number of rows (for pagination context)</li>
<li><code>aria-rowindex</code>: Current row's position in the full dataset</li>
<li><code>aria-label</code>: Descriptive labels for interactive elements</li>
<li><code>aria-describedby</code>: Links inputs to their descriptions</li>
</ul>
<p><strong>2. Live Regions for Announcements</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">  </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">announcementRef</span><span class="p">}</span>
<span class="w">  </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span>
<span class="w">  </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span>
<span class="w">  </span><span class="na">aria-atomic</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span>
<span class="p">/&gt;</span>
</code></pre></div>

<p>This invisible element announces changes to screen readers:
- <code>role="status"</code>: Indicates status information
- <code>aria-live="polite"</code>: Announces when user is idle (not interrupting)
- <code>aria-atomic="true"</code>: Reads entire message, not just changes
- <code>className="sr-only"</code>: Visually hidden but available to screen readers</p>
<p><strong>3. Keyboard Navigation</strong>:</p>
<ul>
<li>All interactive elements are keyboard accessible (buttons, inputs, selects)</li>
<li>Focus indicators visible on all interactive elements (<code>focus:ring-2</code>)</li>
<li>Logical tab order (search ‚Üí filter ‚Üí table ‚Üí pagination)</li>
<li>Sort buttons are actual <code>&lt;button&gt;</code> elements, not <code>onClick</code> on <code>&lt;th&gt;</code></li>
</ul>
<p><strong>4. Semantic HTML</strong>:</p>
<ul>
<li><code>&lt;label&gt;</code> elements properly associated with inputs via <code>htmlFor</code></li>
<li><code>&lt;nav&gt;</code> element wraps pagination controls</li>
<li>Descriptive button text and aria-labels</li>
<li>Hidden descriptions for screen readers (<code>sr-only</code> class)</li>
</ul>
<p><strong>5. Dynamic Announcements</strong>:</p>
<p>We use <code>useEffect</code> to announce changes:
- Sorting: "Table sorted by price in ascending order"
- Filtering: "Showing 42 of 5000 products"
- Pagination: "Page 3 of 100"</p>
<p>These announcements provide context that sighted users get visually but screen reader users would miss.</p>
<h3 id="verification-accessibility-testing">Verification: Accessibility Testing</h3>
<p>Let's retest with screen readers and keyboard navigation.</p>
<p><strong>Testing with NVDA screen reader</strong>:</p>
<ol>
<li>Tab to search input</li>
<li>Announces: "Search all columns, edit, Search across all product fields including name, SKU, and category"</li>
<li>Type "laptop"</li>
<li>Announces: "Showing 42 of 5000 products"</li>
<li>Tab to category filter</li>
<li>Announces: "Filter by category, combo box, All categories"</li>
<li>Select "Electronics"</li>
<li>Announces: "Showing 18 of 5000 products"</li>
<li>Tab to table</li>
<li>Announces: "Product inventory table with 6 columns and 18 rows"</li>
<li>Navigate to SKU column header</li>
<li>Announces: "SKU, column header, sortable, not sorted, button"</li>
<li>Press Enter to sort</li>
<li>Announces: "Table sorted by SKU in ascending order"</li>
<li>Tab to pagination</li>
<li>Announces: "Go to next page, button"</li>
<li>Press Enter</li>
<li>Announces: "Page 2 of 1"</li>
</ol>
<p><strong>Testing with keyboard only</strong>:</p>
<ol>
<li>Tab through all controls ‚úì</li>
<li>All interactive elements have visible focus indicators ‚úì</li>
<li>Can activate all buttons with Enter/Space ‚úì</li>
<li>Can navigate form controls with arrow keys ‚úì</li>
<li>Logical tab order maintained ‚úì</li>
</ol>
<p><strong>Lighthouse Accessibility Audit</strong>:</p>
<div class="codehilite"><pre><span></span><code>Accessibility Score: 98/100

Remaining issues:
- Color contrast on disabled buttons could be improved (minor)
</code></pre></div>

<p><strong>WCAG 2.1 Compliance</strong>:
- <strong>2.1.1 Keyboard (Level A)</strong>: ‚úì All functionality keyboard accessible
- <strong>2.4.3 Focus Order (Level A)</strong>: ‚úì Logical focus order
- <strong>4.1.2 Name, Role, Value (Level A)</strong>: ‚úì All elements properly labeled
- <strong>4.1.3 Status Messages (Level AA)</strong>: ‚úì Dynamic changes announced</p>
<p><strong>Expected vs. Actual improvement</strong>:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Before</th>
<th>After</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lighthouse score</td>
<td>67/100</td>
<td>98/100</td>
<td>+31 points</td>
</tr>
<tr>
<td>WCAG violations</td>
<td>6</td>
<td>0</td>
<td>‚úì</td>
</tr>
<tr>
<td>Screen reader usability</td>
<td>Poor</td>
<td>Excellent</td>
<td>‚úì</td>
</tr>
<tr>
<td>Keyboard navigation</td>
<td>Broken</td>
<td>Complete</td>
<td>‚úì</td>
</tr>
</tbody>
</table>
<h3 id="when-to-apply-these-accessibility-patterns">When to Apply These Accessibility Patterns</h3>
<p><strong>What it optimizes for</strong>:
- Usability for keyboard-only users
- Usability for screen reader users
- Legal compliance (ADA, Section 508, WCAG)
- Better UX for all users (clear labels, logical flow)</p>
<p><strong>What it sacrifices</strong>:
- Development time (more code, more testing)
- Complexity (more attributes to manage)</p>
<p><strong>When to choose this approach</strong>:
- Always. Accessibility should be a baseline requirement.
- Especially for:
  - Public-facing applications
  - Enterprise applications (legal requirements)
  - Government/education applications (Section 508)
  - Applications with diverse user bases</p>
<p><strong>When to avoid this approach</strong>:
- Never. There's no valid reason to skip accessibility.</p>
<p><strong>Code characteristics</strong>:
- Setup complexity: Medium (ARIA attributes, announcements)
- Maintenance burden: Low (mostly declarative attributes)
- Performance impact: Negligible (ARIA attributes don't affect rendering)</p>
<h3 id="common-accessibility-failure-modes">Common Accessibility Failure Modes</h3>
<h4 id="symptom-screen-reader-announces-clickable-instead-of-button">Symptom: Screen reader announces "clickable" instead of "button"</h4>
<p><strong>Root cause</strong>: 
You're using <code>onClick</code> on a <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> instead of a semantic <code>&lt;button&gt;</code>.</p>
<p><strong>Solution</strong>: 
Use semantic HTML:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Bad</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSort</span><span class="p">}</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;cursor-pointer&quot;</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">Sort</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="c1">// ‚úì Good</span>
<span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSort</span><span class="p">}</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">Sort</span>
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>

<h4 id="symptom-screen-reader-doesnt-announce-dynamic-content-changes">Symptom: Screen reader doesn't announce dynamic content changes</h4>
<p><strong>Root cause</strong>: 
No <code>aria-live</code> region for announcements.</p>
<p><strong>Solution</strong>: 
Add a live region and update it when content changes (see the <code>announce()</code> function in our implementation).</p>
<h4 id="symptom-focus-indicator-not-visible">Symptom: Focus indicator not visible</h4>
<p><strong>Root cause</strong>: 
CSS removes the default focus outline without providing an alternative.</p>
<p><strong>Solution</strong>: 
Always provide a visible focus indicator:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ‚ùå Bad</span>
<span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;outline-none&quot;</span><span class="p">&gt;</span><span class="nx">Click</span><span class="w"> </span><span class="nx">me</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="c1">// ‚úì Good</span>
<span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span><span class="p">&gt;</span>
<span class="w">  </span><span class="nx">Click</span><span class="w"> </span><span class="nx">me</span>
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>

<h4 id="symptom-tab-order-is-confusing">Symptom: Tab order is confusing</h4>
<p><strong>Root cause</strong>: 
DOM order doesn't match visual order, or you're using <code>tabIndex</code> incorrectly.</p>
<p><strong>Solution</strong>: 
- Keep DOM order matching visual order
- Only use <code>tabIndex="0"</code> (make focusable) or <code>tabIndex="-1"</code> (remove from tab order)
- Never use positive <code>tabIndex</code> values (they break natural tab order)</p>
<h2 id="the-complete-journey-part-vi-synthesis">The Complete Journey - Part VI Synthesis</h2>
<h2 id="the-journey-from-naive-table-to-production-ready-data-grid">The Journey: From Naive Table to Production-Ready Data Grid</h2>
<p>Let's trace the complete evolution of our product table through six iterations:</p>
<table>
<thead>
<tr>
<th>Iteration</th>
<th>Failure Mode</th>
<th>Technique Applied</th>
<th>Result</th>
<th>Performance Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No interactivity</td>
<td>None</td>
<td>Static table</td>
<td>Baseline: 2100ms render (5k rows)</td>
</tr>
<tr>
<td>1</td>
<td>Manual sorting slow</td>
<td>Manual sort implementation</td>
<td>Sorting works but slow</td>
<td>2800ms per sort</td>
</tr>
<tr>
<td>2</td>
<td>State management complex</td>
<td>TanStack Table</td>
<td>Clean API, fast sorting</td>
<td>50ms per sort</td>
</tr>
<tr>
<td>3</td>
<td>Rendering 5k rows slow</td>
<td>Pagination</td>
<td>Fast initial render</td>
<td>42ms initial render</td>
</tr>
<tr>
<td>4</td>
<td>Can't find products</td>
<td>Filtering</td>
<td>Users can search/filter</td>
<td>45ms per filter</td>
</tr>
<tr>
<td>5</td>
<td>10k rows crashes browser</td>
<td>Virtual scrolling</td>
<td>Smooth infinite scroll</td>
<td>87ms initial, 60fps scroll</td>
</tr>
<tr>
<td>6</td>
<td>Not accessible</td>
<td>ARIA + keyboard nav</td>
<td>WCAG compliant</td>
<td>Negligible overhead</td>
</tr>
</tbody>
</table>
<h3 id="final-implementation-production-ready-data-table">Final Implementation: Production-Ready Data Table</h3>
<p>Here's the complete, production-ready implementation combining all improvements:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// src/components/ProductTableFinal.tsx</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="p">,</span><span class="w"> </span><span class="nx">useEffect</span><span class="p">,</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">,</span><span class="w"> </span><span class="nx">useRef</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">useReactTable</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getCoreRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getSortedRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getPaginationRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">getFilteredRowModel</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnDef</span><span class="p">,</span>
<span class="w">  </span><span class="nx">flexRender</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SortingState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">PaginationState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ColumnFiltersState</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@tanstack/react-table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Product</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../types/product&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ProductTableFinal</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">,</span><span class="w"> </span><span class="nx">setProducts</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Product</span><span class="err">[]</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">setSorting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SortingState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">setPagination</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">PaginationState</span><span class="p">&gt;({</span>
<span class="w">    </span><span class="nx">pageIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pageSize</span><span class="o">:</span><span class="w"> </span><span class="kt">50</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">columnFilters</span><span class="p">,</span><span class="w"> </span><span class="nx">setColumnFilters</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">&lt;</span><span class="nt">ColumnFiltersState</span><span class="p">&gt;([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">globalFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">announcementRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">      </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setProducts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">&lt;</span><span class="nt">ColumnDef</span><span class="err">&lt;</span><span class="na">Product</span><span class="p">&gt;[]</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sku&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SKU&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">120</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Name&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">250</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">150</span><span class="p">,</span>
<span class="w">        </span><span class="nx">filterFn</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;equals&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">100</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`$</span><span class="si">${</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">100</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">stock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">span</span>
<span class="w">              </span><span class="na">className</span><span class="o">=</span><span class="p">{</span>
<span class="w">                </span><span class="nx">stock</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">10</span>
<span class="w">                  </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;text-red-600 font-semibold&#39;</span>
<span class="w">                  </span><span class="o">:</span><span class="w"> </span><span class="nx">stock</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">50</span>
<span class="w">                  </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;text-yellow-600&#39;</span>
<span class="w">                  </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text-green-600&#39;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">stock</span><span class="p">}</span>
<span class="w">            </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">accessorKey</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;lastUpdated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last Updated&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">150</span><span class="p">,</span>
<span class="w">        </span><span class="nx">cell</span><span class="o">:</span><span class="w"> </span><span class="kt">info</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nb">Date</span><span class="p">).</span><span class="nx">toLocaleDateString</span><span class="p">(),</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="p">[]</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useReactTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">products</span><span class="p">,</span>
<span class="w">    </span><span class="nx">columns</span><span class="p">,</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">sorting</span><span class="p">,</span>
<span class="w">      </span><span class="nx">pagination</span><span class="p">,</span>
<span class="w">      </span><span class="nx">columnFilters</span><span class="p">,</span>
<span class="w">      </span><span class="nx">globalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">onSortingChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setSorting</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onPaginationChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setPagination</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onColumnFiltersChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setColumnFilters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onGlobalFilterChange</span><span class="o">:</span><span class="w"> </span><span class="kt">setGlobalFilter</span><span class="p">,</span>
<span class="w">    </span><span class="nx">getCoreRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getCoreRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getSortedRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getSortedRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getPaginationRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getPaginationRowModel</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">getFilteredRowModel</span><span class="o">:</span><span class="w"> </span><span class="kt">getFilteredRowModel</span><span class="p">(),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">categories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">uniqueCategories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">(</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">uniqueCategories</span><span class="p">).</span><span class="nx">sort</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">products</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">announce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">announcementRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">announcementRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">message</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">sorting</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sorting</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">      </span><span class="nx">announce</span><span class="p">(</span>
<span class="w">        </span><span class="sb">`Table sorted by </span><span class="si">${</span><span class="nx">sort</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb"> in </span><span class="si">${</span><span class="nx">sort</span><span class="p">.</span><span class="nx">desc</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span><span class="si">}</span><span class="sb"> order`</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">sorting</span><span class="p">]);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">filteredCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">globalFilter</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">columnFilters</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">announce</span><span class="p">(</span><span class="sb">`Showing </span><span class="si">${</span><span class="nx">filteredCount</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> products`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">globalFilter</span><span class="p">,</span><span class="w"> </span><span class="nx">columnFilters</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">table</span><span class="p">]);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">pageIndex</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pagination</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">pageCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">pageCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">announce</span><span class="p">(</span><span class="sb">`Page </span><span class="si">${</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">pageCount</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">pagination</span><span class="p">,</span><span class="w"> </span><span class="nx">table</span><span class="p">]);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="w"> </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-center h-64&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-lg text-gray-600&quot;</span><span class="p">&gt;</span><span class="nx">Loading</span><span class="w"> </span><span class="nx">products</span><span class="p">...&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;space-y-4&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">        </span><span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">announcementRef</span><span class="p">}</span>
<span class="w">        </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span>
<span class="w">        </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span>
<span class="w">        </span><span class="na">aria-atomic</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span>
<span class="w">      </span><span class="p">/&gt;</span>

<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex gap-4 px-6 py-4 bg-white border border-gray-200 rounded-lg shadow-sm&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex-1&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span>
<span class="w">            </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;global-search&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Search</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">columns</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">input</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;global-search&quot;</span>
<span class="w">            </span><span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">globalFilter</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setGlobalFilter</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
<span class="w">            </span><span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Search products...&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;</span>
<span class="w">            </span><span class="na">aria-describedby</span><span class="o">=</span><span class="s">&quot;search-description&quot;</span>
<span class="w">          </span><span class="p">/&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;search-description&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;sr-only&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Search</span><span class="w"> </span><span class="nx">across</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">product</span><span class="w"> </span><span class="nx">fields</span><span class="w"> </span><span class="nx">including</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">SKU</span><span class="p">,</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">category</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-64&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span>
<span class="w">            </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;category-filter&quot;</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;block text-sm font-medium text-gray-700 mb-1&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Filter</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">category</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;category-filter&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getFilterValue</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">              </span><span class="nx">table</span><span class="p">.</span><span class="nx">getColumn</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">setFilterValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span><span class="nx">All</span><span class="w"> </span><span class="nx">categories</span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">categories</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">category</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">category</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;overflow-x-auto border border-gray-200 rounded-lg shadow-sm&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">table</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;min-w-full divide-y divide-gray-200&quot;</span>
<span class="w">          </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;table&quot;</span>
<span class="w">          </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Product inventory&quot;</span>
<span class="w">          </span><span class="na">aria-rowcount</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">thead</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getHeaderGroups</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">headerGroup</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headerGroup</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">header</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getIsSorted</span><span class="p">();</span>
<span class="w">                  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">th</span>
<span class="w">                      </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                      </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;columnheader&quot;</span>
<span class="w">                      </span><span class="na">aria-sort</span><span class="o">=</span><span class="p">{</span>
<span class="w">                        </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span>
<span class="w">                          </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span>
<span class="w">                          </span><span class="o">:</span><span class="w"> </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span>
<span class="w">                          </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span>
<span class="w">                          </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;none&#39;</span>
<span class="w">                      </span><span class="p">}</span>
<span class="w">                      </span><span class="na">style</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">header.getSize</span><span class="p">()</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;</span>
<span class="w">                    </span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">                        </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">getToggleSortingHandler</span><span class="p">()}</span>
<span class="w">                        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-1 -mx-1&quot;</span>
<span class="w">                        </span><span class="na">aria-label</span><span class="o">=</span><span class="p">{</span><span class="sb">`Sort by </span><span class="si">${</span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="si">}${</span>
<span class="w">                          </span><span class="nx">sortDirection</span>
<span class="w">                            </span><span class="o">?</span><span class="w"> </span><span class="sb">`, currently sorted </span><span class="si">${</span>
<span class="w">                                </span><span class="nx">sortDirection</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;asc&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;ascending&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;descending&#39;</span>
<span class="w">                              </span><span class="si">}</span><span class="sb">`</span>
<span class="w">                            </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
<span class="w">                        </span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">                      </span><span class="p">&gt;</span>
<span class="w">                        </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span>
<span class="w">                          </span><span class="nx">header</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">header</span><span class="p">,</span>
<span class="w">                          </span><span class="nx">header</span><span class="p">.</span><span class="nx">getContext</span><span class="p">()</span>
<span class="w">                        </span><span class="p">)}</span>
<span class="w">                        </span><span class="p">&lt;</span><span class="nt">span</span><span class="w"> </span><span class="na">aria-hidden</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-gray-400&quot;</span><span class="p">&gt;</span>
<span class="w">                          </span><span class="p">{{</span>
<span class="w">                            </span><span class="nx">asc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üë&#39;</span><span class="p">,</span>
<span class="w">                            </span><span class="nx">desc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;‚Üì&#39;</span><span class="p">,</span>
<span class="w">                          </span><span class="p">}[</span><span class="nx">sortDirection</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">]</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;‚Üï&#39;</span><span class="p">}</span>
<span class="w">                        </span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">);</span>
<span class="w">                </span><span class="p">})}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">tbody</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">                </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                  </span><span class="na">colSpan</span><span class="o">=</span><span class="p">{</span><span class="nx">columns</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
<span class="w">                  </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-12 text-center text-gray-500&quot;</span>
<span class="w">                </span><span class="p">&gt;</span>
<span class="w">                  </span><span class="nx">No</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="nx">matching</span><span class="w"> </span><span class="nx">your</span><span class="w"> </span><span class="nx">filters</span><span class="p">.</span>
<span class="w">                </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="nx">table</span><span class="p">.</span><span class="nx">getRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">row</span><span class="p">,</span><span class="w"> </span><span class="nx">rowIndex</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="p">&lt;</span><span class="nt">tr</span>
<span class="w">                  </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                  </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;row&quot;</span>
<span class="w">                  </span><span class="na">aria-rowindex</span><span class="o">=</span><span class="p">{</span>
<span class="w">                    </span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">rowIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                  </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;hover:bg-gray-50 transition-colors&quot;</span>
<span class="w">                </span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">getVisibleCells</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">cell</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="p">&lt;</span><span class="nt">td</span>
<span class="w">                      </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">cell</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">                      </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;cell&quot;</span>
<span class="w">                      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-6 py-4 whitespace-nowrap text-sm text-gray-900&quot;</span>
<span class="w">                    </span><span class="p">&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">flexRender</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">columnDef</span><span class="p">.</span><span class="nx">cell</span><span class="p">,</span><span class="w"> </span><span class="nx">cell</span><span class="p">.</span><span class="nx">getContext</span><span class="p">())}</span>
<span class="w">                    </span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="w">                  </span><span class="p">))}</span>
<span class="w">                </span><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="w">              </span><span class="p">))</span>
<span class="w">            </span><span class="p">)}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">      </span><span class="p">&lt;</span><span class="nt">nav</span>
<span class="w">        </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Table pagination&quot;</span>
<span class="w">        </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between px-6 py-3 bg-white border border-gray-200 rounded-lg shadow-sm&quot;</span>
<span class="w">      </span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to first page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">previousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanPreviousPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to previous page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&lt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">nextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to next page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">button</span>
<span class="w">            </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageIndex</span><span class="p">(</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span>
<span class="w">            </span><span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">table</span><span class="p">.</span><span class="nx">getCanNextPage</span><span class="p">()}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Go to last page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="s1">&#39;&gt;&gt;&#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span>
<span class="w">          </span><span class="na">role</span><span class="o">=</span><span class="s">&quot;status&quot;</span>
<span class="w">          </span><span class="na">aria-live</span><span class="o">=</span><span class="s">&quot;polite&quot;</span>
<span class="w">          </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-700&quot;</span>
<span class="w">        </span><span class="p">&gt;</span>
<span class="w">          </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="p">{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getPageCount</span><span class="p">()}</span><span class="w"> </span><span class="p">({</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getFilteredRowModel</span><span class="p">().</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span>
<span class="w">            </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;total&#39;</span>
<span class="w">            </span><span class="o">:</span><span class="w"> </span><span class="sb">`filtered from </span><span class="si">${</span><span class="nx">products</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> total`</span><span class="p">}{</span><span class="s1">&#39; &#39;</span><span class="p">}</span>
<span class="w">          </span><span class="nx">products</span><span class="p">)</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="w">        </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center gap-2&quot;</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">label</span><span class="w"> </span><span class="na">htmlFor</span><span class="o">=</span><span class="s">&quot;page-size&quot;</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-700&quot;</span><span class="p">&gt;</span>
<span class="w">            </span><span class="nx">Rows</span><span class="w"> </span><span class="nx">per</span><span class="w"> </span><span class="nx">page</span><span class="o">:</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="w">          </span><span class="p">&lt;</span><span class="nt">select</span>
<span class="w">            </span><span class="na">id</span><span class="o">=</span><span class="s">&quot;page-size&quot;</span>
<span class="w">            </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">table</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">            </span><span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">table</span><span class="p">.</span><span class="nx">setPageSize</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))}</span>
<span class="w">            </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span>
<span class="w">            </span><span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Select number of rows per page&quot;</span>
<span class="w">          </span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">{[</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">pageSize</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="p">&lt;</span><span class="nt">option</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">pageSize</span><span class="p">}</span>
<span class="w">              </span><span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="decision-framework-which-approach-when">Decision Framework: Which Approach When?</h3>
<p>When building a data table, choose your approach based on these criteria:</p>
<p><strong>Use Simple Table (No Library)</strong>:
- Dataset: &lt;100 items
- Features: Display only, no sorting/filtering
- Complexity: Low
- Example: Static pricing table, feature comparison</p>
<p><strong>Use TanStack Table (Paginated)</strong>:
- Dataset: 100-10,000 items
- Features: Sorting, filtering, pagination
- Complexity: Medium
- Example: Admin dashboards, product catalogs, user lists</p>
<p><strong>Use TanStack Table + Virtual Scrolling</strong>:
- Dataset: 10,000+ items
- Features: Infinite scroll, real-time updates
- Complexity: High
- Example: Log viewers, financial data, analytics dashboards</p>
<p><strong>Use Pre-built Component Library</strong>:
- Dataset: Any size
- Features: Standard table features
- Complexity: Low (if design matches library)
- Example: Internal tools, MVPs, prototypes
- Trade-off: Less customization, larger bundle</p>
<p><strong>Decision Tree</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">How</span><span class="w"> </span><span class="nx">many</span><span class="w"> </span><span class="nx">items</span><span class="p">?</span>
<span class="err">‚îú‚îÄ</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">100</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="nx">table</span>
<span class="err">‚îú‚îÄ</span><span class="w"> </span><span class="mi">100</span><span class="o">-</span><span class="mi">10</span><span class="nx">k</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">TanStack</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="p">(</span><span class="nx">paginated</span><span class="p">)</span>
<span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="p">&gt;</span><span class="mi">10</span><span class="nx">k</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">Do</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="nx">need</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">see</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">items</span><span class="p">?</span>
<span class="w">    </span><span class="err">‚îú‚îÄ</span><span class="w"> </span><span class="nx">Yes</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">TanStack</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">Virtual</span>
<span class="w">    </span><span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">TanStack</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="p">(</span><span class="nx">paginated</span><span class="p">)</span>

<span class="nx">Do</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">have</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">custom</span><span class="w"> </span><span class="nx">design</span><span class="w"> </span><span class="nx">system</span><span class="p">?</span>
<span class="err">‚îú‚îÄ</span><span class="w"> </span><span class="nx">Yes</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">TanStack</span><span class="w"> </span><span class="nx">Table</span><span class="w"> </span><span class="p">(</span><span class="nx">headless</span><span class="p">)</span>
<span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">Consider</span><span class="w"> </span><span class="nx">pre</span><span class="o">-</span><span class="nx">built</span><span class="w"> </span><span class="kn">library</span>

<span class="nx">Is</span><span class="w"> </span><span class="nx">accessibility</span><span class="w"> </span><span class="nx">critical</span><span class="p">?</span>
<span class="err">‚îú‚îÄ</span><span class="w"> </span><span class="nx">Yes</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">Add</span><span class="w"> </span><span class="nx">ARIA</span><span class="w"> </span><span class="nx">attributes</span><span class="w"> </span><span class="p">(</span><span class="nx">always</span><span class="p">)</span>
<span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">No</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="nx">Still</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">ARIA</span><span class="w"> </span><span class="nx">attributes</span><span class="w"> </span><span class="p">(</span><span class="nx">always</span><span class="p">)</span>
</code></pre></div>

<h3 id="lessons-learned-from-naive-to-professional">Lessons Learned: From Naive to Professional</h3>
<p><strong>1. Performance is about rendering less, not rendering faster</strong>:
The biggest performance gains came from reducing the number of DOM nodes (pagination, virtualization), not from optimizing the rendering of those nodes.</p>
<p><strong>2. Headless libraries provide flexibility without complexity</strong>:
TanStack Table handles the hard parts (sorting algorithms, state management) while letting you control the UI completely. This is the sweet spot for custom applications.</p>
<p><strong>3. Accessibility is not optional</strong>:
Adding ARIA attributes and keyboard navigation is straightforward and dramatically improves usability for all users, not just those with disabilities.</p>
<p><strong>4. Virtual scrolling is powerful but has trade-offs</strong>:
It solves performance problems with large datasets but adds complexity and can hurt accessibility. Use it only when pagination isn't sufficient.</p>
<p><strong>5. Progressive enhancement works</strong>:
Start with a simple table, add features incrementally, and test at each step. Don't try to build the perfect table on the first iteration.</p>
<p><strong>6. Measure, don't guess</strong>:
Use React DevTools Profiler, Chrome Performance tab, and Lighthouse to identify actual bottlenecks. Premature optimization wastes time.</p>
<p><strong>7. User experience includes all users</strong>:
A fast table that's inaccessible is not a good table. Performance and accessibility are both essential.</p>
<h3 id="the-professional-react-developers-mental-model-for-data-tables">The Professional React Developer's Mental Model for Data Tables</h3>
<p>When you encounter a data table requirement, think through this checklist:</p>
<p><strong>1. Data characteristics</strong>:
- How many items? (determines pagination/virtualization strategy)
- How often does it update? (determines re-render optimization needs)
- What's the data source? (client-side array vs. server-side API)</p>
<p><strong>2. User requirements</strong>:
- What interactions are needed? (sorting, filtering, selection)
- What's the expected performance? (instant vs. acceptable delay)
- Who are the users? (keyboard users, screen reader users, power users)</p>
<p><strong>3. Technical constraints</strong>:
- Do you have a design system? (determines library choice)
- What's the bundle size budget? (determines library choice)
- What's the browser support requirement? (determines feature availability)</p>
<p><strong>4. Implementation strategy</strong>:
- Start simple: render the data
- Add interactivity: sorting, filtering
- Optimize rendering: pagination or virtualization
- Ensure accessibility: ARIA, keyboard navigation
- Measure and iterate: profile, optimize, test</p>
<p>This mental model applies to any complex UI component, not just tables. The pattern is always the same: start simple, add features incrementally, optimize based on measurements, and ensure accessibility throughout.</p>
        </div>
        <div class="footer">
            Generated on 2025-12-03 12:42:37 | Made with ‚ù§Ô∏è by GitHub Pages Generator
        </div>
    </div>
    <script>
        // Syntax highlighting for code blocks
        document.addEventListener('DOMContentLoaded', (event) => {
            // Highlight code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Add copy buttons to code blocks
            document.querySelectorAll('pre').forEach((pre) => {
                const button = document.createElement('button');
                button.className = 'copy-btn';
                button.textContent = 'Copy';
                
                button.addEventListener('click', () => {
                    const code = pre.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                        button.textContent = 'Error';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                });
                
                pre.appendChild(button);
            });
        });
    </script>
</body>
</html>